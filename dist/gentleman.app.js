/*! For license information please see gentleman.app.js.LICENSE.txt */
<<<<<<< HEAD
(()=>{var t={22:(t,e,a)=>{"use strict";a.r(e),a.d(e,{App:()=>he});var n=a(835),i=a(624);const s=(t,e)=>t.getAttributeByName(e).target,o=(t,e,a=!1)=>s(t,e).getValue(a),c=(t,e)=>s(t,e).hasValue(),l=(t,e)=>t.isAttributeCreated(e);function r(t){let e={};return l(t,"css")&&c(t,"css")&&(e.css=o(t,"css",!0)),l(t,"ref")&&c(t,"ref")&&(e.ref=o(t,"ref",!0).map((t=>{return e=this.conceptModel.getConcept(t),o(e,"name").toLowerCase();var e}))),l(t,"gss")&&(e.gss=p.call(this,s(t,"gss"))),l(t,"text")&&(e.text=y.call(this,s(t,"text"))),l(t,"box")&&(e.box=u.call(this,s(t,"box"))),e}function p(t){let e={};return l(t,"text")&&(e.text=y.call(this,s(t,"text"))),l(t,"box")&&(e.box=u.call(this,s(t,"box"))),e}function y(t){let e={};if(l(t,"bold")&&o(t,"bold")&&(e.bold=!0),l(t,"italic")&&o(t,"italic")&&(e.italic=!0),l(t,"underline")&&o(t,"underline")&&(e.underline=!0),l(t,"strikethrough")&&o(t,"strikethrough")&&(e.strikethrough=!0),l(t,"nonbreakable")&&o(t,"nonbreakable")&&(e.nonbreakable=!0),l(t,"transform")&&c(t,"transform")&&(e.transform=o(t,"transform")),l(t,"color")&&c(t,"color")){let a=b.call(this,s(t,"color"));a&&(e.color=a)}if(l(t,"opacity")&&c(t,"opacity")&&(e.opacity=o(t,"opacity")),l(t,"size")){let a=h.call(this,s(t,"size"));a&&(e.size=a)}return e}function u(t){let e={};if(l(t,"inner")){let a=m.call(this,s(t,"inner"));a&&(e.inner=a)}if(l(t,"outer")){let a=m.call(this,s(t,"outer"));a&&(e.outer=a)}if(l(t,"background")&&(e.background=f.call(this,s(t,"background"))),l(t,"width")){let a=h.call(this,s(t,"width"));a&&(e.width=a)}if(l(t,"height")){let a=h.call(this,s(t,"height"));a&&(e.height=a)}if(l(t,"border")&&(e.border=d.call(this,s(t,"border"))),l(t,"corner")&&(e.corner=g.call(this,s(t,"corner"))),l(t,"shadow")){let a=x.call(this,s(t,"shadow"));a&&(e.shadow=a)}return l(t,"opacity")&&c(t,"opacity")&&(e.opacity=o(t,"opacity")),e}function m(t){let e={},a=!1;return["all","top","right","bottom","left"].forEach((i=>{if(l(t,i)){let o=h.call(this,s(t,i));(0,n.le)(o)||(e[i]=o,a=!0)}})),a?e:null}function d(t){let e={};return["all","top","right","bottom","left"].forEach((a=>{if(l(t,a)){let n=s(t,a),i=h.call(this,s(n,"width"));if(i){let t=s(n,"color");e[a]={width:i,color:b.call(this,t),type:o(n,"type")}}}})),e}function g(t){let e={},a=!1;return["all","top-left","top-right","bottom-right","bottom-left"].forEach((i=>{if(l(t,i)){let o=h.call(this,s(t,i));(0,n.le)(o)||(e[i]=o,a=!0)}})),a?e:null}function f(t){let e={};if(l(t,"color")){let a=s(t,"color");e.color=b.call(this,a)}if(l(t,"image")){let a=s(t,"image");e.image=o(a,"url")}return e}function b(t){let e={};if((0,n.le)(t))return e;if("hex-color"===t.name){if(!c(t,"value"))return null;e.type="hex";let a=o(t,"value")||"";e.value=a.startsWith("#")?a:`#${a}`}else"rgb-color"===t.name&&(e.type="rgb",e.value={red:o(t,"red"),green:o(t,"green"),blue:o(t,"blue")});return e}function h(t){return(0,n.le)(t)||!c(t,"value")?null:{value:o(t,"value"),unit:o(t,"unit")}}function x(t){if((0,n.le)(t))return null;const e="offsetX",a="offsetY",i="blur",c="spread",r="inset";let p=3,y={};if(l(t,e)){let a=h.call(this,s(t,e));(0,n.le)(a)||(y.offsetX=a,p--)}if(l(t,a)){let e=h.call(this,s(t,a));(0,n.le)(e)||(y.offsetY=e,p--)}if(l(t,i)){let e=h.call(this,s(t,i));(0,n.le)(e)||(y.blur=e,p--)}if(l(t,c)){let e=h.call(this,s(t,c));(0,n.le)(e)||(y.spread=e,p--)}if(p>0)return null;if(l(t,r)&&o(t,r)&&(y.inset=!0),l(t,"color")){let e=s(t,"color");y.color=b.call(this,e)}return y}const v="content",_="concept",w="name",k="style",j="required",T="prototype",S="tag",E="tags",z="value",C="focusable",A="hidden",q=(t,e)=>t.getAttributeByName(e).target,L=(t,e)=>q(t,e).getReference(),I=(t,e,a=!1)=>L(t,e).getValue(),R=(t,e,a=!1)=>q(t,e).getValue(a),O=(t,e)=>q(t,e).hasValue(),P=(t,e)=>t.isAttributeCreated(e),N=t=>R(t,w).toLowerCase();function M(t,e){const{id:a,name:i}=e;let s=(0,n.UF)({class:["link","error-message__link"],title:i},t);const o=`.projection[data-concept="${a}"]`;return s.addEventListener("mouseenter",(t=>{let e=(0,n.sb)(o,this.body);e&&this.highlight(e)})),s.addEventListener("mouseleave",(t=>{this.unhighlight()})),s.addEventListener("click",(t=>{let e=this.resolveElement((0,n.sb)(o,this.body));e&&e.focus()})),s}const V={projection:D,template:function(t){const e=N(t);if((0,n.hr)(e)){let e=M.call(this,"name",q(t,w)),a=(0,n.kQ)({class:["error-message"]},["Template error: ",e," is missing a value"]);this.__errors.push(a)}if(!O(t,v)){let e=M.call(this,"content",q(t,v)),a=(0,n.kQ)({class:["error-message"]},["Template error: ",e," is missing a value"]);this.__errors.push(a)}const a=[];return R(t,v).filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);a.push(U.call(this,e))})),{success:!0,message:{id:t.id,type:"template",name:e,content:a}}},style:function(t){const e=N(t);if((0,n.hr)(e)){let e=M.call(this,"name",q(t,w)),a=(0,n.kQ)({class:["error-message"]},["StyleRule error: ",e," is missing a value"]);this.__errors.push(a)}const a=p.call(this,q(t,k));return{success:!0,message:{id:t.id,type:"style",name:e,style:a}}}},B={layout:Z,container:$,"svg-container":X,"svg-pattern":function(t){const e={type:"pattern"};if(P(t,"base-pattern")&&(e.base=W.call(this,q(t,"base-pattern"))),P(t,"width")&&(e.width=R(t,"width")),P(t,"height")&&(e.height=R(t,"height")),P(t,"baseX")&&(e.baseX=R(t,"baseX")),P(t,"baseY")&&(e.baseY=R(t,"baseY")),P(t,"baseRatio")&&(e.baseRatio=R(t,"baseRatio")),P(t,"anchor")&&(e.anchor=R(t,"anchor")),P(t,"add-set")&&!(0,n.xb)(R(t,"add-set"))){let a=[];R(t,"add-set").forEach((t=>{a.push(Q.call(this,t))})),e.attributes=a}return e},field:it};function F(t={}){const e=[],{conceptModel:a}=this;this.logs.clear();const s=Object.assign({name:"projection",download:!0,notify:"always"},t),o=a.getConcepts(["projection","template","style rule"]);return(0,n.xb)(o)?(this.notify("<strong>Empty model</strong>: Please create at least one projection.",i.k$.WARNING,2e3),!1):(this.__errors=[],o.forEach((t=>{const a=V[(0,n.XI)(t.getProperty("handler"),"")],{message:i}=a.call(this,t);e.push(i)})),(0,n.xb)(this.__errors)?("always"===s.notify&&this.notify("The projection model was <strong>successfully</strong> built",i.k$.SUCCESS,2e3),s.download&&this.download({projection:e},s.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",i.k$.ERROR),this.logs.add(this.__errors,"Validation error",i.hi.ERROR),delete this.__errors,!1))}function D(t){const e=P(t,E)?R(t,E,!0):[];let a=q(t,_);if(t.hasParent()){let e=t.getParent("collection");a=q(e,_)}const i=H.call(this,a);if((0,n.xb)(Object.keys(i))){let e=M.call(this,"concept",q(t,_)),a=(0,n.kQ)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(a)}if(!O(t,v)){let e=M.call(this,"content",q(t,v)),a=(0,n.kQ)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(a)}const s=R(t,v,!0);if((0,n.le)(s)){let a=M.call(this,"content",q(t,v));return(0,n.kQ)({class:["error-message"]},["Projection error: ",a," is missing a value"]),{success:!1,message:{id:t.id,concept:i,tags:e,type:null,content:null}}}const o=s.getProperty("contentType");let c={id:t.id,concept:i,tags:e,sibling:ut.call(this,q(s,"sibling")),type:"container"===o||"svg-pattern"===o||"svg-container"===o?"layout":o,content:B[o].call(this,s)};return P(t,w)&&O(t,w)&&(c.name=N(t)),{success:!0,message:c}}function H(t){const e={};return P(t,w)&&O(t,w)&&(e.name=R(t,w).toLowerCase()),P(t,T)&&O(t,T)&&(e.prototype=R(t,T).toLowerCase()),e}const G={static:function(t){const e=t.getProperty("elementType");let a={type:e};const i=at[e];return(0,n.mf)(i)?(a.focusable=R(t,C),a.hidden=R(t,A),Object.assign(a,i.call(this,t)),P(t,k)&&(a.style=r.call(this,q(t,k))),a):null},layout:Z,dynamic:et,field:it,container:$,"svg-container":X};function U(t){const e=t.getProperty("contentType"),a=G[e];if(!(0,n.mf)(a))return null;let i="container"===e||"svg-container"===e?"layout":e;return{type:i,[i]:a.call(this,t)}}function $(t){const e={};var a=[];R(t,"elements").filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);a.push(U.call(this,e))}));let n=q(t,"layout");return e.type="flex",e.orientation=R(n,"orientation"),e.wrappable=R(t,"wrappable"),e.focusable=R(t,C),e.hidden=R(t,A),e.alignItems=R(n,"align-items"),e.justifyContent=R(n,"justify-content"),e.disposition=a,P(t,"style")&&(e.style=r.call(this,q(t,"style"))),e}function W(t){const e={};return P(t,"pattern")&&(e.pattern=U.call(this,R(t,"pattern",!0))),e}function Q(t){const e={};return P(t,"template")&&(e.template=R(t,"template")),P(t,"repeat")&&(e.repeat=R(t,"repeat")),P(t,"attribute")&&(e.attribute={type:"dynamic",dynamic:et.call(this,q(t,"attribute"))}),P(t,"properties")&&(e.props=J.call(this,q(t,"properties"))),e}function J(t){const e={};return P(t,"x")&&(e.x=R(t,"x")),P(t,"y")&&(e.y=R(t,"y")),P(t,"ratio")&&(e.ratio=R(t,"ratio")),P(t,"anchor")&&(e.anchor=R(t,"anchor")),e}function X(t){const e={type:"svg"};return P(t,"content")&&(e.content=R(t,"content")),P(t,"p-link")&&(e.link=function(t){const e={};return P(t,"tag")&&(e.tag=R(t,"tag")),P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"external")&&(e.external=R(t,"external")),e}(q(t,"p-link"))),P(t,"attributes")&&!(0,n.xb)(q(t,"attributes"))&&(e.attributes=[],R(t,"attributes").forEach((t=>{e.attributes.push(function(t){const e={};return P(t,"value")&&(e.value=R(t,"value")),P(t,"placement")&&(e.placement=function(t){const e={};switch(e.type=t.name,e.type){case"in-place":return P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"tag")&&(e.tag=R(t,"tag")),e;case"link-place":return P(t,"static-dependents")&&!(0,n.xb)(R(t,"static-dependents"))&&(e.sd=[],R(t,"static-dependents").forEach((t=>{e.sd.push(Y(t))}))),P(t,"dynamic-dependents")&&!(0,n.xb)(R(t,"dynamic-dependents"))&&(e.dd=[],R(t,"dynamic-dependents").forEach((t=>{e.dd.push(Y(t))}))),e}}(R(t,"placement",!0))),P(t,"property")&&(e.property=R(t,"property")),e}(t))}))),e}function Y(t){const e={};return P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"template")&&(e.template=R(t,"template")),e}const K={flex:function(t){const e={};var a=[];return e.orientation=R(t,"orientation"),e.wrappable=R(t,"wrappable"),e.alignItems=R(t,"align-items"),e.justifyContent=R(t,"justify-content"),R(t,"elements").filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);a.push(U.call(this,e))})),e.disposition=a,e},table:function(t){const e={};var a=[];return e.orientation=R(t,"orientation"),R(t,"rows").forEach((t=>{const e=[];R(t,"cells").forEach((t=>{let a=(0,n.XI)(R(t,"span"),1);if(O(t,"content")){let n=R(t,"content",!0);e.push({type:"cell",span:a,content:U.call(this,n)})}})),a.push(e)})),e.disposition=a,e}};function Z(t){const e=t.getProperty("elementType");var a={type:e};const i=K[e];return(0,n.mf)(i)?(Object.assign(a,i.call(this,t)),P(t,"style")&&(a.style=r.call(this,q(t,"style"))),a):null}const tt={attribute:function(t){const e={type:"attribute",name:R(t,"value")},a="tag",n="placeholder";if(P(t,a)&&O(t,a)&&(e.tag=I(t,a)),P(t,j)&&(e.required=R(t,j)),P(t,n)&&O(t,n)){const a=[];let i=q(t,n);R(i,v).filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);a.push(U.call(this,e))})),e.placeholder=a}return e},projection:function(t){const e={type:"projection",src:"value"},a="tag",n="placeholder";if(P(t,a)&&O(t,a)&&(e.tag=I(t,a)),P(t,n)&&O(t,n)){const a=[];let i=q(t,n);R(i,v).filter((t=>t.hasValue())).forEach((t=>{const e=t.getValue(!0);a.push(U.call(this,e))})),e.placeholder=a}return e},template:function(t){return O(t,z)?{type:"template",name:(e=t,z,N(L(e,"value")))}:null;var e}};function et(t){const e=t.getProperty("elementType");var a={type:e};const i=tt[e];return(0,n.mf)(i)?(Object.assign(a,i.call(this,t)),a):null}const at={text:function(t){const e={};return e.asHTML=R(t,"asHTML"),e.content=R(t,v,!0),e},image:function(t){const e={};return e.url=R(t,"url"),e.alt=R(t,"alt"),e},link:function(t){const e={};e.url=R(t,"url"),e.urlType=R(t,"url type"),e.content=[];let a=q(t,v);return R(a,v).filter((t=>t.hasValue())).forEach((t=>{const a=t.getValue(!0);e.content.push(U.call(this,a))})),e},plink:function(t){const e={};return e.content=R(t,"tag"),e.tag=R(t,"tag"),e},button:function(t){const e={};return e.trigger=R(t,"trigger"),e.disabled=R(t,"disabled"),e.content=R(t,v).filter((t=>t.hasValue())).map((t=>{const e=t.getValue(!0);return U.call(this,e)})),e}},nt={text:function(t){const e={},a="input";return e.multiline=R(t,"multiline"),e.resizable=R(t,"resizable"),P(t,a)&&(e.input=lt.call(this,q(t,a))),e},binary:function(t){const e={},a="checkbox";e.state={};let n=q(t,"true");O(n,v)&&(e.state.true={content:R(n,v).filter((t=>t.hasValue())).map((t=>U.call(this,t.getValue(!0))))});let i=q(t,"false");return O(i,v)&&(e.state.false={content:R(i,v).filter((t=>t.hasValue())).map((t=>U.call(this,t.getValue(!0))))}),P(t,a)&&(e.checkbox=rt.call(this,q(t,a))),e},choice:function(t){const e={},a="placeholder",n="expanded",i="input",s="choice template";return e.choice={},P(t,a)&&(e.placeholder=R(t,a)),P(t,n)&&(e.expanded=R(t,n)),P(t,i)&&(e.input=lt.call(this,q(t,i))),P(t,s)&&(e.choice.option={template:yt.call(this,q(t,s))}),e},list:function(t){const e={},a="action",n="item template";if(e.list={},P(t,n)&&(e.list.item={template:yt.call(this,q(t,n))}),P(t,a)){let n=q(t,a);e.action={};const i="add";if(P(n,i)){let t=q(n,i);e.action[i]={position:R(t,"position")};const a=[{type:"static",static:{type:"text",content:R(t,v)}}];e.action.add.content=a}}return e},table:function(t){const e={},a="row template",n="header",i="body",s="footer";return e.table={},P(t,a)&&(e.table.row={template:yt.call(this,q(t,a))}),P(t,n)&&(e.header=r.call(this,q(t,n))),P(t,i)&&(e.body=r.call(this,q(t,i))),P(t,s)&&(e.footer=r.call(this,q(t,s))),e},interactive:function(t){const e={};return P(t,"content")&&(e.content=R(t,"content")),P(t,"field")&&(e.source=function(t){const e={};return P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"tag")&&(e.tag=R(t,"tag")),e}(q(t,"field"))),P(t,"static-dependents")&&!(0,n.xb)(R(t,"static-dependents"))&&(e.sd=[],R(t,"static-dependents").forEach((t=>{e.sd.push(Y(t))}))),P(t,"dynamic-dependents")&&!(0,n.xb)(R(t,"dynamic-dependents"))&&(e.dd=[],R(t,"dynamic-dependents").forEach((t=>{e.dd.push(Y(t))}))),P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"markers")&&(e.markers=[],R(t,"markers").forEach((t=>{e.markers.push(st(t))}))),P(t,"self")&&(e.self=[],R(t,"self").forEach((t=>{e.self.push(R(t,"property"))}))),e},dynamic:function(t){const e={};return P(t,"content")&&(e.content=R(t,"content")),P(t,"marker")&&(e.marker=R(t,"marker")),P(t,"markers")&&(e.markers=[],R(t,"markers").forEach((t=>{e.markers.push(st(t))}))),P(t,"self")&&(e.self=[],R(t,"self").forEach((t=>{e.self.push(R(t,"property"))}))),e},static:function(t){const e={};return P(t,"content")&&(e.content=R(t,"content")),P(t,"model-value")&&(e.mv=R(t,"model-value")),e},add:function(t){const e={type:"add"};return P(t,"content")&&(e.content=R(t,"content")),P(t,"items")&&(e.items=yt.call(this,q(t,"items"))),P(t,"ratio")&&(e.ratio=R(t,"ratio")),e},arrow:function(t){const e={type:"arrow"};return P(t,"source")&&(e.source=R(t,"source")),P(t,"target")&&(e.target=R(t,"target")),P(t,"decorator")&&(e.decorator=ot.call(this,q(t,"decorator"))),P(t,"arrow-style")&&(e.arrowStyle=ct.call(this,q(t,"arrow-style"))),console.log(e),e},svg:function(t){const e={};return P(t,"content")&&(e.content=R(t,"content")),P(t,"x")&&(e.x=R(t,"x")),P(t,"x")&&(e.x=R(t,"x")),e}};function it(t){const e=t.getProperty("elementType");var a={type:e};a.focusable=R(t,C),a.readonly=R(t,"readonly"),a.disabled=R(t,"disabled"),a.hidden=R(t,A);const i=nt[e];return(0,n.mf)(i)?(Object.assign(a,i.call(this,t)),P(t,k)&&(a.style=r.call(this,q(t,k))),a):null}function st(t){const e={};return P(t,"model-value")&&(e.mv=R(t,"model-value")),P(t,"aliases")&&(e.aliases=[],R(t,"aliases").forEach((t=>{e.aliases.push(function(t){const e={};return P(t,"marker-value")&&(e.mv=R(t,"marker-value")),P(t,"properties")&&(e.props=function(t){let e={props:[]};if(P(t,"bold")&&R(t,"bold")){const t={props:"font-weight",value:"bold"};e.props.push(t)}if(P(t,"italic")&&R(t,"italic")){const t={props:"font-style",value:"italic"};e.props.push(t)}if(P(t,"underline")&&R(t,"underline")){const t={props:"text-decoration",value:"underline"};e.props.push(t)}if(P(t,"color")){let a=q(t,"color"),i=R(a,"value");if(!(0,n.le)(i)){const t={props:"fill"};t.value=i,e.props.push(t)}}if(P(t,"size")){let a=q(t,"size");if(!(0,n.le)(a)&&O(a,"value")){const t={props:"font-size"};t.value=R(a,"value")+R(a,"unit"),e.props.push(t)}}if(P(t,"text-content")){let a=R(t,"text-content");(0,n.le)(a)||""===a||e.props.push({props:"textContent",value:a})}return P(t,"others")&&R(t,"others").forEach((t=>{e.props.push(function(t){const e={};return e.property=R(t,"property"),e.value=R(t,"value"),e}(t))})),e.props}(q(t,"properties"))),e}(t))}))),e}function ot(t){const e={};return P(t,"attribute")&&(e.attribute={type:"dynamic",dynamic:et.call(this,q(t,"attribute"))}),P(t,"base")&&(e.base=R(t,"base")),e}function ct(t){const e={};if(P(t,"stroke")){let a=q(t,"stroke"),i=R(a,"value");(0,n.le)(i)?e.stroke="#000000":e.stroke=i.startsWith("#")?i:`#${i}`}return P(t,"stroke-width")&&(e.width=R(t,"stroke-width")),P(t,"stroke-dasharray")&&(e.dasharray=R(t,"stroke-dasharray")),P(t,"stroke-linecap")&&(e.linecap=R(t,"stroke-linecap")),P(t,"marker-end")&&(e.end=R(t,"marker-end")),P(t,"marker-start")&&(e.start=R(t,"marker-start")),e}function lt(t){let e={type:R(t,"type"),placeholder:R(t,"placeholder")};return P(t,k)&&(e.style=r.call(this,q(t,k))),e}function rt(t){let e={position:R(t,"position"),label:pt.call(this,q(t,"label"))};return P(t,k)&&(e.style=r.call(this,q(t,k))),e}function pt(t){let e={content:R(t,"content")};return P(t,k)&&(e.style=r.call(this,q(t,k))),e}function yt(t){const e={};return P(t,S)&&O(t,S)&&(e.tag=I(t,S)),P(t,w)&&O(t,w)&&(e.name=R(t,w)),P(t,k)&&(e.style=r.call(this,q(t,k))),e}function ut(t){const e={};return P(t,"tag")&&(e.tag=R(t,"tag")),P(t,"receiver")&&(e.receiver=R(t,"receiver")),e}const mt="attributes",dt="base",gt="name",ft="required",bt="properties",ht="prototype",xt=(t,e)=>t.getAttributeByName(e).target,vt=(t,e)=>xt(t,e).getReference(),_t=(t,e,a=!1)=>xt(t,e).getValue(a),wt=(t,e)=>xt(t,e).hasValue(),kt=(t,e)=>t.isAttributeCreated(e),jt=t=>_t(t,gt).toLowerCase();function Tt(t,e){const{id:a,name:i}=e;let s=(0,n.UF)({class:["link","error-message__link"],title:i},t);const o=`.projection[data-concept="${a}"]`;return s.addEventListener("mouseenter",(t=>{let e=(0,n.sb)(o,this.body);e&&this.highlight(e)})),s.addEventListener("mouseleave",(t=>{this.unhighlight()})),s.addEventListener("click",(t=>{let e=this.resolveElement((0,n.sb)(o,this.body));e&&e.focus()})),s}function St(t={}){const e=[],{conceptModel:a}=this;this.logs.clear();const s=Object.assign({name:"metamodel",download:!0},t),o=a.getConcepts(["prototype concept","concrete concept","derivative concept"]);return(0,n.xb)(o)?(this.notify("<strong>Empty model</strong>: Please create at least one concept.",i.k$.WARNING),!1):(this.__errors=[],o.forEach((t=>{const{message:a}=Et.call(this,t);e.find((t=>t.name===a.name))?this.__errors.push(`The model has two concepts with the same name: ${a.name}`):e.push(a)})),(0,n.xb)(this.__errors)?(this.notify("The concept model was <strong>successfully</strong> built",i.k$.SUCCESS,2e3),s.download&&this.download({concept:e},s.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",i.k$.ERROR),this.logs.add(this.__errors,"Validation error",i.hi.ERROR),delete this.__errors,!1))}function Et(t){const e=jt(t),a=t.getProperty("nature"),i=[],s=[];if((0,n.hr)(e)){let e=Tt.call(this,"name",xt(t,gt)),i=(0,n.kQ)({class:["error-message"]},[`${(0,n.fm)(a)} concept: `,e," is missing a value"]);this.__errors.push(i)}t.isAttributeCreated(mt)&&_t(t,mt).forEach((t=>{const{message:e}=zt.call(this,t);i.find((t=>t.name===e.name))?this.__errors.push(`The concept has two attributes with the same name: ${e.name}`):i.push(e)})),t.isAttributeCreated(bt)&&_t(t,bt).forEach((t=>{const{message:e}=qt.call(this,t);s.find((t=>t.name===e.name))?this.__errors.push(`The concept has two properties with the same name: ${e.name}`):s.push(e)}));let o={id:t.id,name:e,nature:a,attributes:i,properties:s};return t.isAttributeCreated(ht)&&wt(t,ht)&&(o.prototype=jt(vt(t,ht))),t.isAttributeCreated(dt)&&wt(t,dt)&&Object.assign(o,Ct.call(this,_t(t,dt,!0),"base")),{message:o}}function zt(t){const e=jt(t),a=!kt(t,ft)||!wt(t,ft)||_t(t,ft);if((0,n.hr)(e)){let e=Tt.call(this,"name",xt(t,gt)),a=(0,n.kQ)({class:["error-message"]},["Attribute: ",e," is missing a value"]);this.__errors.push(a)}if(!wt(t,"target")){let e=Tt.call(this,"target",xt(t,"target")),a=(0,n.kQ)({class:["error-message"]},["Attribute: ",e," is missing a value"]);this.__errors.push(a)}return{message:{name:e,target:Ct.call(this,_t(t,"target",!0)),required:a}}}function Ct(t,e="name"){let a=t.getProperty("cname");if("concept"===a)if(wt(t,"concept")){let e=vt(t,"concept");a=jt(e)}else{let e=Tt.call(this,"concept",xt(t,"concept")),a=(0,n.kQ)({class:["error-message"]},[`${(0,n.fm)(t.getName())}: `,e," is missing a value"]);this.__errors.push(a)}const i={[e]:a};if(kt(t,"accept")){let e=_t(t,"accept",!0);(0,n.Kn)(e)?i.accept=Ct.call(this,e):i.accept={name:e.toLowerCase()}}return["default","ordered","rel"].filter((e=>kt(t,e)&&wt(t,e))).forEach((e=>{i[e]=_t(t,e)})),kt(t,"constraint")&&(i.constraint=At.call(this,xt(t,"constraint"))),i}function At(t){const e={};return kt(t,"scope")&&wt(t,"scope")&&(e.scope=jt(vt(t,"scope"))),["ordered","pattern"].filter((e=>kt(t,e)&&wt(t,e))).forEach((a=>{e[a]=_t(t,a)})),["length","value","cardinality"].filter((e=>kt(t,e)&&wt(t,e))).forEach((a=>{let n=_t(t,a,!0),i={};if("number constraint value"===n.name){let t={};wt(n,"value")&&(t.value=_t(n,"value")),i.type="fixed",i.fixed=t}else if("number constraint range"===n.name){let t={},e=xt(n,"min");wt(e,"value")&&(t.min={value:_t(e,"value")});let a=xt(n,"max");wt(a,"value")&&(t.max={value:_t(a,"value")}),i.type="range",i.range=t}else if("string pattern constraint"===n.name){let t={};wt(n,"value")&&(t.value=_t(n,"value")),wt(n,"insensitive")&&(t.insensitive=_t(n,"insensitive")),wt(n,"global")&&(t.global=_t(n,"global")),i.type="pattern",i.pattern=t}else if("string match constraint"===n.name){let t={},e=xt(n,"start");wt(e,"value")&&(t.start={value:_t(e,"value")});let a=xt(n,"end");wt(a,"value")&&(t.end={value:_t(a,"value")}),i.type="match",i.match=t}e[a]=i})),kt(t,"values")&&wt(t,"values")&&(e.values=_t(t,"values",!0)),e}function qt(t){const e=jt(t);if((0,n.hr)(e)){let e=Tt.call(this,"name",xt(t,gt)),a=(0,n.kQ)({class:["error-message"]},["Property: ",e," is missing a value"]);this.__errors.push(a)}kt(t,"target")&&wt(t,"target")||this.__errors.push(`Property ${(0,n.hr)(e)?"N/A":`'${e}'`}: <<target>> is missing a value.`);const a=_t(t,"target",!0),i=a.getProperty("type");return(0,n.le)(i)&&this.__errors.push(`The property '${e}' target's type is missing a value.`),{message:{name:jt(t),type:i,value:_t(a,"value")}}}const Lt="rtags",It="algorithm",Rt="concept",Ot="name",Pt=(t,e)=>t.getAttributeByName(e).target,Nt=(t,e,a=!1)=>Pt(t,e).getValue(a),Mt=(t,e)=>Pt(t,e).hasValue(),Vt=(t,e)=>t.isAttributeCreated(e),Bt=t=>Nt(t,Ot).toLowerCase(),Ft={general:function(t){const e=Vt(t,Lt)?Nt(t,Lt,!0):[];let a=Pt(t,Rt);if(t.hasParent()){let e=t.getParent("collection");a=Pt(e,Rt)}const i=H.call(this,a);if((0,n.xb)(Object.keys(i))){let e=M.call(this,"concept",Pt(t,Rt)),a=(0,n.kQ)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(a)}if(!Mt(t,It)){let e=M.call(this,"content",Pt(t,It)),a=(0,n.kQ)({class:["error-message"]},["Projection error: ",e," is missing a value"]);this.__errors.push(a)}const s=Nt(t,It,!0);if((0,n.le)(s)){let a=M.call(this,"content",Pt(t,It));return(0,n.kQ)({class:["error-message"]},["Projection error: ",a," is missing a value"]),{success:!1,message:{id:t.id,concept:i,rtags:e,type:null,content:null}}}const o=s.getProperty("contentType");let c={id:t.id,concept:i,rtags:e,type:"algorithm",content:Dt[o].call(this,s)};return Vt(t,Ot)&&Mt(t,Ot)&&(c.name=Bt(t)),{success:!0,message:c}},projection:function(t){return D.call(this,t)},template:function(t){const e=Bt(t);if((0,n.hr)(e)){let e=M.call(this,"name",Pt(t,"name")),a=(0,n.kQ)({class:["error-message"]},["Template error: ",e," is missing a value"]);this.__errors.push(a)}const a=Nt(t,"content",!0),i=Gt[a.getProperty("elementType")].call(this,a);return{success:!0,message:{id:t.id,type:"g-fragment",name:e,content:i}}}},Dt={force:function(t){const e={type:"force"};if(Vt(t,"dimensions")&&(e.dimensions=$t.call(this,Pt(t,"dimensions"))),Vt(t,"direction")&&(e.direction=Nt(t,"direction")),Vt(t,"intensity")&&(e.intensity=Ut.call(this,Nt(t,"intensity",!0))),Vt(t,"center")&&(e.center=Nt(t,"center")),Vt(t,"edges")&&(e.edges=Nt(t,"edges")),Vt(t,"attributes")&&!(0,n.xb)(Nt(t,"attributes"))){let a=[];Nt(t,"attributes").forEach((t=>{a.push({type:"dynamic",dynamic:et.call(this,t)})})),e.attributes=a}if(Vt(t,"fixed-elements")&&!(0,n.xb)(Nt(t,"fixed-elements"))){let a=[];Nt(t,"fixed-elements").forEach((t=>{a.push(Wt.call(this,t))})),e.fixed=a}return Vt(t,"arrow-management")&&(e.arrowManagement=ne.call(this,Nt(t,"arrow-management",!0))),e},pattern:function(t){const e={type:"pattern"};Vt(t,"dimensions")&&(e.dimensions=$t.call(this,Pt(t,"dimensions")));let a=[];Vt(t,"attributes")&&Nt(t,"attributes").forEach((t=>{a.push({type:"dynamic",dynamic:et.call(this,t)})})),e.attributes=a,Vt(t,"pattern")&&(e.pattern=Jt.call(this,Pt(t,"pattern")));let n=[];return Vt(t,"anchor-attributes")&&Nt(t,"anchor-attributes").forEach((t=>{n.push(Xt.call(this,t))})),e.anchorAttr=n,Vt(t,"arrow-management")&&(e.arrow=ee.call(this,Pt(t,"arrow-management"))),console.log(e),e}};function Ht(t={}){const e=[],{conceptModel:a}=this;this.logs.clear();const s=Object.assign({name:"projection",download:!0,notify:"always"},t),o=a.getConcepts(["general","projection","g-fragment"]);return(0,n.xb)(o)?(this.notify("<strong>Empty model</strong>: Please create at least one projection.",i.k$.WARNING,2e3),!1):(this.__errors=[],o.forEach((t=>{const a=Ft[(0,n.XI)(t.getProperty("handler"),"")],{message:i}=a.call(this,t);e.push(i)})),(0,n.xb)(this.__errors)?("always"===s.notify&&this.notify("The projection model was <strong>successfully</strong> built",i.k$.SUCCESS,2e3),s.download&&this.download({projection:e},s.name),delete this.__errors,e):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",i.k$.ERROR),this.logs.add(this.__errors,"Validation error",i.hi.ERROR),delete this.__errors,!1))}const Gt={static:function(t){const e={};return Vt(t,"content")&&(e.content=Nt(t,"content")),Vt(t,"model-value")&&(e.mv=Nt(t,"model-value")),e},dynamic:function(t){const e={};return Vt(t,"content")&&(e.content=Nt(t,"content")),Vt(t,"marker")&&(e.marker=Nt(t,"marker")),Vt(t,"markers")&&(e.markers=[],Nt(t,"markers").forEach((t=>{e.markers.push(function(t){const e={};return Vt(t,"model-value")&&(e.mv=Nt(t,"model-value")),Vt(t,"aliases")&&(e.aliases=[],Nt(t,"aliases").forEach((t=>{e.aliases.push(function(t){const e={};return Vt(t,"marker-value")&&(e.mv=Nt(t,"marker-value")),Vt(t,"properties")&&(e.props=function(t){let e={props:[]};if(Vt(t,"bold")&&Nt(t,"bold")){const t={props:"font-weight",value:"bold"};e.props.push(t)}if(Vt(t,"italic")&&Nt(t,"italic")){const t={props:"font-style",value:"italic"};e.props.push(t)}if(Vt(t,"underline")&&Nt(t,"underline")){const t={props:"text-decoration",value:"underline"};e.props.push(t)}if(Vt(t,"color")){let a=Pt(t,"color"),i=Nt(a,"value");if(!(0,n.le)(i)){const t={props:"fill"};t.value=i,e.props.push(t)}}if(Vt(t,"size")){let a=Pt(t,"size");if(!(0,n.le)(a)&&Mt(a,"value")){const t={props:"font-size"};t.value=Nt(a,"value")+Nt(a,"unit"),e.props.push(t)}}if(Vt(t,"text-content")){let a=Nt(t,"text-content");(0,n.le)(a)||""===a||e.props.push({props:"textContent",value:a})}return Vt(t,"others")&&Nt(t,"others").forEach((t=>{e.props.push(function(t){const e={};return e.property=Nt(t,"property"),e.value=Nt(t,"value"),e}(t))})),e.props}(Pt(t,"properties"))),e}(t))}))),e}(t))}))),Vt(t,"self")&&(e.self=[],Nt(t,"self").forEach((t=>{e.self.push(Nt(t,"property"))}))),e}};function Ut(t){return Nt(t,"intensity")}function $t(t){const e={};return e.width=Nt(t,"x"),e.height=Nt(t,"y"),e}function Wt(t){const e={};return e.attribute={type:"dynamic",dynamic:et.call(this,Pt(t,"attribute"))},e.coordinates=$t.call(this,Pt(t,"coordinates")),e.ratio=Qt.call(this,Pt(t,"ratio")),e}function Qt(t){return Nt(t,"value")}function Jt(t){const e={};return Vt(t,"attribute")&&(e.attribute={type:"dynamic",dynamic:et.call(this,Pt(t,"attribute"))}),Vt(t,"placement")&&(e.placement=Zt.call(this,Pt(t,"placement"))),Vt(t,"anchors")&&(e.anchors=Zt.call(this,Nt(t,"anchors",!0))),Vt(t,"size")&&(e.size=Kt.call(this,Nt(t,"size",!0))),e}function Xt(t){const e={};return Vt(t,"attribute")&&(e.attribute={type:"dynamic",dynamic:et.call(this,Pt(t,"attribute"))}),Vt(t,"placement")&&(e.placement=Yt.call(this,Nt(t,"placement",!0))),e}function Yt(t){const e={};switch(e.type=t.name,e.type){case"unique-placement":case"anchor-based":return e.base=Nt(t,"base"),e}}function Kt(t){const e={};switch(e.type=t.name,e.type){case"inherited-size":return e.marker=Nt(t,"marker"),e.property=Nt(t,"property"),e;case"ratio-sized":case"absolute-sized":return e.ratio=Nt(t,"ratio"),e}}function Zt(t){const e={};switch(e.type=t.name,e.type){case"evolutive-anchors":return Vt(t,"first")&&(e.first=te.call(this,Pt(t,"first"))),Vt(t,"next")&&(e.next=te.call(this,Pt(t,"next"))),e;case"inherited-anchors":return e}}function te(t){const e={};return e.x=Nt(t,"x"),e.y=Nt(t,"y"),e}function ee(t){const e={};e.content=Nt(t,"content");let a=[];Nt(t,"attribute").forEach((t=>{a.push({type:"dynamic",dynamic:et.call(this,t)})})),e.attribute=a;let n=[];return Nt(t,"self-behavior").forEach((t=>{n.push(te.call(this,t))})),e.selfArrow=n,Vt(t,"ranking")&&(e.ranking=ae.call(this,Pt(t,"ranking"))),console.log("arrowSChema"),console.log(e),e}function ae(t){const e={};return Vt(t,"target")&&(e.target=Nt(t,"target")),Vt(t,"order")&&(e.order=Nt(t,"order")),e}function ne(t){const e={};switch(e.type=t.name,e.type){case"interaction-management":e.content=Nt(t,"content");let a=[];Nt(t,"attribute").forEach((t=>{a.push({type:"dynamic",dynamic:et.call(this,t)})})),e.attribute=a;let n=[];return Nt(t,"self-behavior").forEach((t=>{n.push(te.call(this,t))})),e.selfArrow=n,e;case"svg-management":return e.content=Nt(t,"content"),e.attribute={type:"dynamic",dynamic:et.call(this,Pt(t,"attribute"))},e.ratio=Nt(t,"ratio"),e.position=te.call(this,Pt(t,"position")),e}}const ie=a(868),se=a(512),oe=a(68),ce=a(221),le=a(843),re=a(547),pe=a(521),ye=a(276),ue={"value.changed":function(){if(!this.__previewStarted)return!1;xe["preview-projection"](this)},"value.added":function(){if(!this.__previewStarted)return!1;xe["preview-projection"](this)},"value.removed":function(){if(!this.__previewStarted)return!1;xe["preview-projection"](this)},"open-style":function(t){let e=t[0],a=this.createProjection(e,"style"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)},"open-state":function(t){let e=t[0],a=this.createProjection(e,"state"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)},"open-edit":function(t){let e=t[0],a=this.createProjection(e,"visualizer"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)},"make dynamic":function(t){let e=t[0].createProj(),a=this.createConcept("template"),n=this.createConcept("render","list-item");n.schema.accept=a.getAttributeByName("content").target.accept.accept;let i=this.createConcept("dynamic-svg","choice");i.getAttributeByName("content").target.setValue(e),n.setValue(i),a.getAttributeByName("content").target.addElement(n),this.createInstance(a)},"make static":function(t){let e=t[0].createProj(),a=this.createConcept("template"),n=this.createConcept("render","list-item");n.schema.accept=a.getAttributeByName("content").target.accept.accept;let i=this.createConcept("static-svg","choice");i.getAttributeByName("content").target.setValue(e),n.setValue(i),a.getAttributeByName("content").target.addElement(n),this.createInstance(a)},"make interactive":function(t){let e=t[0].createProj(),a=this.createConcept("projection"),n=this.createConcept("interactive-svg");n.getAttributeByName("content").target.setValue(e),a.getAttributeByName("content").target.setValue(n),this.createInstance(a)}},me=a(78),de=a(425),ge=a(445),fe={"open-state":function(t){let e=t[0],a=this.createProjection(e,"state"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)},"open-sibling":function(t){let e=t[0],a=this.createProjection(e,"sibling"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)},"open-style":function(t){let e=t[0],a=this.createProjection(e,"style"),i=this.findWindow("side-instance");(0,n.le)(i)&&(i=this.createWindow("side-instance"),i.container.classList.add("model-projection-sideview")),i.instances.size>0&&Array.from(i.instances)[0].delete();let s=this.createInstance(e,a,{type:"projection",close:"DELETE-PROJECTION"});i.addInstance(s)}};var be=0;const he={menu:null,editorSection:null,btnNew:null,tabList:null,editors:null,tabs:null,activeEditor:null,activeTab:null,init(){return this.editors=[],this.tabs=new Map,this.bindDOM(),this.bindEvents(),this.render(),this},refresh(){return 0===this.tabs.size&&this.createEditor(),this},render(){this.refresh()},createEditor(t){let e=Gentleman.createEditor().init(t);return e.id="GE"+be++,this.addEditor(e),e},addEditor(t){this.editors.push(t),this.editorSection.append(t.container);let e=function(t){let e=(0,n.oL)({class:["ico","ico-delete"]},"✖"),a=(0,n.ax)({class:["btn","btn-close"],dataset:{action:"close"}},e);return(0,n.HV)({class:["app-tab"]},[t,a])}(t.id);return this.addTab(e,t),this.changeTab(e),this.refresh(),this},getEditors(t){const e=this.editors;return(0,n.mf)(t)?this.editors.filter((e=>t(e))):e},getEditor(t){return this.editors.find((e=>e.id===t))},deleteEditor(t){let e=this.editors.findIndex((e=>e.id===t));return-1!==e&&(this.getEditor(t).destroy(),this.editors.splice(e,1),this.refresh(),!0)},addTab(t,e){return this.tabList.append(t),this.tabs.set(t,e),this},closeTab(t){if((0,n.le)(t)||!this.tabs.has(t))return!1;let e=this.tabs.get(t);return this.deleteEditor(e.id),this.tabs.delete(t),t===this.activeTab&&(this.activeTab=null,this.tabList.hasChildNodes()&&this.changeTab(t.previousSibling||t.nextSibling)),t.remove(),this.refresh(),!0},changeTab(t){if(!(0,n.le)(t)){if(this.activeTab){if(this.activeTab===t)return this;this.activeTab.classList.remove("active"),this.tabs.get(this.activeTab).hide()}return this.activeTab=t,this.activeTab.classList.add("active"),this.tabs.get(this.activeTab).show(),this.refresh(),this}},bindDOM(){return this.menu=(0,n.sb)('[data-component="menu"]'),this.editorSection=(0,n.sb)('[data-component="editor"]'),this.tabSection=(0,n.sb)('[data-component="nav"]'),this.tabList=(0,n.w_)({class:["bare-list","app-tabs"]}),this.tabSection.append(this.tabList),this},bindEvents(){function t(t,e){return(0,n.le)(t)||t===e?null:(0,n.RI)(t.dataset,"action")?t:t.parentElement===e?(0,n.sb)("[data-action]",t):(0,n.wr)(t,(t=>(0,n.RI)(t.dataset,"action")),5)}this.menu.addEventListener("click",(e=>{let a=t(e.target,this.menu);if(!(0,n.Re)(a))return!1;const{action:i}=a.dataset;if("new"===i)this.createEditor();else if("new-metamodel"===i){let t=this.createEditor({conceptModel:se,projectionModel:oe,config:ie}),e=ve.call(this,"build-concept","Build",t);t.header.menu.append(e)}else if("new-projection"===i){let t=this.createEditor({conceptModel:pe,projectionModel:ye,config:re,handlers:ue});t.addConcept(ce),t.addProjection(le);let e=ve.call(this,"build-projection","Build",t),a=ve.call(this,"preview-projection","Preview",t);t.header.menu.append(e,a)}else if("new-graphical"===i){let t=this.createEditor({conceptModel:de,projectionModel:ge,config:me,handlers:fe});t.addConcept(ce),t.addProjection(le),t.addConcept(pe),t.addProjection(ye);let e=ve.call(this,"build-graphical","Build",t),a=ve.call(this,"preview-projection","Preview",t);t.header.menu.append(e,a)}})),this.tabList.addEventListener("click",(e=>{let a=(i=e.target,s=this.tabList,i.parentElement===s?i:(0,n.wr)(i,(t=>t.parentElement===s)));var i,s;if(!(0,n.Re)(a))return!1;let o=t(e.target,a);if((0,n.Re)(o)){const{action:t}=o.dataset;"close"===t&&this.closeTab(a)}else this.changeTab(a)}))}},xe={"build-concept":function(t){St.call(t)},"build-projection":function(t){F.call(t)},"build-graphical":function(t){Ht.call(t)},"preview-projection":function(t){const e="metamodel";if(!t.hasResource(e))return t.notify("<strong>Metamodel not found</strong>.","error",3e3),t.triggerEvent({name:"load-resource",args:[e]}),!1;let a=F.call(t,{download:!1,notify:"error"});if(!a)return;let n=t.getModel(e);const s=`gentleman.editor@${t.id}`,o=new BroadcastChannel(s);t.__previewStarted||(localStorage.setItem("gentleman.preview",s),(0,i.Oj)(),t.__previewStarted=!0,setTimeout((()=>{o.postMessage({concept:n,projection:a})}),100)),o.postMessage({concept:n,projection:a})}};function ve(t,e,a){let i=(0,n.ax)({class:["btn","app-editor-header__button"],dataset:{action:t}},e),s=xe[t];return i.addEventListener("click",(()=>{s.call(this,a)})),i}},675:(t,e,a)=>{"use strict";a.r(e),a.d(e,{Preview:()=>s});var n=a(835),i=a(624);const s={menu:null,editorSection:null,editor:null,channel:null,init(t){return this.channel=new BroadcastChannel(t),this.editor=Gentleman.createEditor().init({config:{settings:!1}}),this.bindDOM(),this.render(),this.bindEvents(),this},refresh(){return this.editor.isReady?this.editor.open():this.editor.close(),this},render(){this.editorSection.append(this.editor.container),this.refresh()},getEditor(){return this.editor},bindDOM(){this.menu=(0,n.sb)('[data-component="menu"]'),this.editorSection=(0,n.sb)('[data-component="editor"]'),(0,i.Cp)(this.menu)},bindEvents(){this.channel.addEventListener("message",(t=>{const{concept:e,projection:a}=t.data;let n=[];this.editor.conceptModel&&(n=this.editor.conceptModel.export()),this.editor.unload().freeze().loadConceptModel(e,n).loadProjectionModel(a).unfreeze().open()}))}}},512:t=>{"use strict";t.exports=JSON.parse('{"concept":[{"name":"model element","nature":"prototype","attributes":[{"name":"name","target":{"name":"name"},"required":true},{"name":"description","target":{"name":"string"},"required":true}]},{"name":"model concept","description":"A prototype of a concept.","nature":"prototype","prototype":"model element","attributes":[{"name":"properties","target":{"name":"set","accept":{"name":"property"}},"required":true,"description":"The list of properties of your concept."}]},{"name":"prototype concept","description":"A prototype creates a base skeleton to provide reusability and extension to concepts of the model. Any concept can reuse a prototype and would inherit its structure.","nature":"concrete","prototype":"model concept","attributes":[{"name":"attributes","target":{"name":"set","accept":{"name":"attribute"}},"required":true,"description":"The list of attributes of your concept."},{"name":"prototype","target":{"name":"reference","accept":{"name":"prototype concept"}},"required":false}],"properties":[{"name":"nature","type":"string","value":"prototype"}]},{"name":"concrete concept","description":"A concrete concept represents the model\'s actual concepts. Projections can be defined against its structure.","nature":"concrete","prototype":"model concept","attributes":[{"name":"attributes","target":{"name":"set","accept":{"name":"attribute"}},"required":true,"description":"The list of attributes of your concept."},{"name":"prototype","target":{"name":"reference","accept":{"name":"prototype concept"}},"required":false}],"properties":[{"name":"nature","type":"string","value":"concrete"}]},{"name":"derivative concept","description":"A derivative concept represents...","nature":"concrete","prototype":"model concept","attributes":[{"name":"base","target":{"name":"primitive","accept":[{"name":"string primitive"},{"name":"number primitive"},{"name":"boolean primitive"}]},"required":true}],"properties":[{"name":"nature","type":"string","value":"derivative"}]},{"name":"structure","nature":"prototype","prototype":"model element","attributes":[{"name":"alias","target":{"name":"string"},"required":false,"description":"The alias of the structure."}]},{"name":"attribute","nature":"concrete","prototype":"structure","attributes":[{"name":"required","target":{"name":"boolean"},"required":true,"description":"The value indicating whether the structure is required for the parent concept."},{"name":"target","target":{"name":"primitive"},"required":true,"description":"The target concept of the attribute structure."}]},{"name":"property","nature":"concrete","prototype":"structure","attributes":[{"name":"target","target":{"name":"value"},"required":true,"description":"The target concept of the property structure."}]},{"name":"primitive","nature":"prototype","attributes":[]},{"name":"string primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"string"},"description":"Default value."},{"name":"constraint","target":{"name":"string primitive constraint"},"description":"Constraint.","required":false}],"properties":[{"name":"cname","type":"string","value":"string"}]},{"name":"string primitive constraint","nature":"concrete","attributes":[{"name":"length","target":{"name":"number constraint"},"required":false},{"name":"value","target":{"name":"string constraint"},"required":false},{"name":"values","target":{"name":"set","accept":{"name":"string"}},"required":false,"description":"The list of string values accepted by the string instance."}]},{"name":"number primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"number"}},{"name":"constraint","target":{"name":"number primitive constraint"},"description":"Constraint.","required":false}],"properties":[{"name":"cname","type":"string","value":"number"}]},{"name":"number primitive constraint","nature":"concrete","attributes":[{"name":"value","target":{"name":"number constraint"},"required":false},{"name":"values","target":{"name":"set","accept":{"name":"number"}},"required":false}]},{"name":"boolean primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"default","target":{"name":"boolean"}}],"properties":[{"name":"cname","type":"string","value":"boolean"}]},{"name":"set primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"accept","target":{"name":"primitive"},"required":true},{"name":"ordered","target":{"name":"boolean","default":true},"required":true},{"name":"constraint","target":{"name":"set primitive constraint"},"description":"Constraint.","required":false}],"properties":[{"name":"cname","type":"string","value":"set"}]},{"name":"set primitive constraint","nature":"concrete","attributes":[{"name":"cardinality","target":{"name":"number constraint"},"required":false}]},{"name":"reference primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"accept","target":{"name":"name","constraint":{"values":["string","number","boolean","set","reference",{"type":"reference","rel":"parent","scope":"model concept"}]}}},{"name":"rel","target":{"name":"string","constraint":{"values":["parent","child","sibling"]}}}],"properties":[{"name":"cname","type":"string","value":"reference"}]},{"name":"reference primitive constraint","nature":"concrete","attributes":[{"name":"scope","target":{"name":"reference","accept":{"name":"model concept"}},"required":false}]},{"name":"concept primitive","nature":"concrete","prototype":"primitive","attributes":[{"name":"concept","target":{"name":"reference","accept":{"name":"model concept"}},"required":true}],"properties":[{"name":"cname","type":"string","value":"concept"}]},{"name":"number constraint","nature":"prototype","attributes":[]},{"name":"number constraint value","nature":"concrete","prototype":"number constraint","attributes":[{"name":"value","target":{"name":"number"}}]},{"name":"number constraint range","nature":"concrete","prototype":"number constraint","attributes":[{"name":"min","target":{"name":"number constraint value"},"description":"Defines the minimum number of characters the user must input. This must be an integer value 0 or higher. If no minlength is specified, or an invalid value is specified, the input has no minimum length."},{"name":"max","target":{"name":"number constraint value"},"description":"Defines the maximum number of characters the user can input. This must be an integer value 0 or higher. If no maxlength is specified, or an invalid value is specified, the input has no maximum length."}]},{"name":"string constraint","nature":"prototype","attributes":[]},{"name":"string pattern constraint","nature":"concrete","prototype":"string constraint","attributes":[{"name":"value","target":{"name":"string"}},{"name":"insensitive","target":{"name":"boolean"}},{"name":"global","target":{"name":"boolean"}}]},{"name":"string match constraint","nature":"concrete","prototype":"string constraint","attributes":[{"name":"start","target":{"name":"string constraint value"}},{"name":"end","target":{"name":"string constraint value"}}]},{"name":"string constraint value","nature":"concrete","attributes":[{"name":"value","target":{"name":"string"}},{"name":"insensitive","target":{"name":"boolean","default":false}}]},{"name":"value","nature":"prototype","attributes":[]},{"name":"string value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"string"}}],"properties":[{"name":"type","type":"string","value":"string"}]},{"name":"number value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"number"}}],"properties":[{"name":"type","type":"string","value":"number"}]},{"name":"boolean value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"boolean"}}],"properties":[{"name":"type","type":"string","value":"boolean"}]},{"name":"name","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":{"value":1},"max":{"value":50}}}}}]}')},868:t=>{"use strict";t.exports=JSON.parse('{"name":"Gentleman concept","concepts":[{"name":"concrete concept"},{"name":"prototype concept"},{"name":"derivative concept"}]}')},68:t=>{"use strict";t.exports=JSON.parse('{"projection":[{"type":"template","name":"concept-definition","param":[{"name":"conceptType","type":"string"}],"content":[{"type":"static","static":{"type":"text","content":{"type":"param","name":"conceptType"},"style":{"css":["keyword","model-concept__keyword"],"gss":{"text":{"bold":true}}}}},{"type":"attribute","name":"name","tag":"textual"}]},{"type":"template","name":"attribute-definition","content":[{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["concept-section-title"]}}},{"type":"attribute","name":"attributes","tag":"attribute-set","required":true}]},{"type":"template","name":"property-definition","content":[{"type":"static","static":{"type":"text","content":"Properties","style":{"css":["concept-section-title"]}}},{"type":"attribute","name":"properties","tag":"property-set"}]},{"type":"template","name":"collapse-menu","content":[{"type":"static","static":{"type":"plink","tag":"collapse","content":[{"type":"static","static":{"type":"text","content":"","help":"Collapse"}}],"style":{"css":["nav-projection","render__nav-projection","render__nav-projection--collapse"]}}}]},{"type":"template","name":"vertical-bar","content":[{"type":"static","static":{"type":"text","content":"|","style":{"css":["separator","vertical-bar"]}}}]},{"type":"template","name":"arrow","content":[{"type":"static","static":{"type":"text","content":">"}}]},{"type":"style","name":"pad-top","style":{"gss":{"box":{"inner":{"top":{"value":6,"unit":"px"}}}}}},{"type":"style","name":"pad-right","style":{"gss":{"box":{"inner":{"right":{"value":6,"unit":"px"}}}}}},{"type":"style","name":"pad-bottom","style":{"gss":{"box":{"inner":{"bottom":{"value":6,"unit":"px"}}}}}},{"type":"style","name":"pad-left","style":{"gss":{"box":{"inner":{"left":{"value":6,"unit":"px"}}}}}},{"type":"style","name":"pad-all","style":{"gss":{"box":{"inner":{"all":{"value":6,"unit":"px"}}}}}},{"concept":{"name":"prototype concept"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"template","name":"concept-definition","param":[{"name":"conceptType","value":"Prototype concept"}]},{"type":"template","name":"vertical-bar"},{"type":"attribute","name":"prototype","tag":"label-reference","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Use a prototype","focusable":true,"style":{"css":["btn","textual-option","textual-option--prototype"]}}}}}],"style":{"css":["line"],"ref":["pad-left"]}}},{"type":"attribute","name":"attributes","tag":"attribute-set","required":true}],"style":{"css":["model-concept","model-concept--textual"]}}},{"concept":{"name":"concrete concept"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"template","name":"concept-definition","param":[{"name":"conceptType","value":"Concrete concept"}]},{"type":"template","name":"vertical-bar"},{"type":"attribute","name":"prototype","tag":"label-reference","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add a prototype","focusable":true,"style":{"css":["btn","textual-option","textual-option--prototype"]}}}}}],"style":{"css":["line"],"ref":["pad-left","pad-right"]}}},{"type":"attribute","name":"attributes","tag":"attribute-set","required":true}],"style":{"css":["model-concept","model-concept--textual"]}}},{"concept":{"name":"derivative concept"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"template","name":"concept-definition","param":[{"name":"conceptType","value":"Derivative concept"}]}],"style":{"css":["line"],"ref":["pad-left"]}}},{"type":"attribute","tag":"base","name":"base"}],"style":{"css":["model-concept","model-concept--textual"]}}},{"concept":{"prototype":"model concept"},"tags":["choice","choice-selection"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"attribute","name":"name","tag":"readonly-string"}]}},{"concept":{"name":"attribute"},"tags":["attribute-list-item--textual","full"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"name","tag":"textual"},{"type":"template","name":"vertical-bar"},{"type":"attribute","name":"required","tag":"field-binary-state"},{"type":"static","static":{"type":"plink","tag":"base","content":[{"type":"static","static":{"type":"text","help":"Compact view (hide target details)","content":{"type":"html","html":"&ndash;"}}}],"style":{"css":["attribute-list-item__plink","attribute-list-item__plink--expanded"]}}}],"style":{"css":["model-concept__line"],"gss":{"box":{"inner":{"bottom":{"value":4,"unit":"px"}}}}}}},{"type":"attribute","name":"target","tag":"textual"}],"style":{"css":["attribute-list-item-container"]}}},{"concept":{"name":"attribute"},"tags":["attribute-list-item--textual","base"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"name","tag":"textual"},{"type":"template","name":"vertical-bar"},{"type":"attribute","name":"required","tag":"field-binary-state"},{"type":"static","static":{"type":"plink","tag":"full","help":"Expand view (show all details)","content":[{"type":"template","name":"arrow"}],"style":{"css":["attribute-list-item__plink","attribute-list-item__plink--compact"]}}},{"type":"attribute","name":"target","tag":"value"}],"style":{"css":["model-concept__line"],"gss":{"box":{"inner":{"bottom":{"value":4,"unit":"px"}}}}}}}],"style":{"css":["attribute-list-item-container"]}}},{"concept":{"name":"property"},"tags":["property-list-item--textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"name","tag":"textual"}],"style":{"css":["model-concept__line"],"gss":{"box":{"inner":{"bottom":{"value":4,"unit":"px"}}}}}}},{"type":"attribute","name":"target","tag":"textual"}],"style":{"css":["attribute-list-item-container"]}}},{"concept":{"name":"primitive"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Target","style":{"css":["label"]}}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["target-choice--textual__list-option"]}},"style":{"css":["target-choice--textual__list"]}},"input":false,"style":{"css":["target-choice--textual"]}}}],"style":{"gss":{"box":{"border":{"bottom":{"type":"solid","width":{"value":2,"unit":"px"},"color":{"type":"hexadecimal","value":"#c0c0c0"}}},"width":{"value":100,"unit":"%"}}}}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["primitive-constraint"]}}],"style":{"css":["inline"]}}},{"concept":{"name":"primitive"},"tags":["base"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Base","style":{"css":["label"]}}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["target-choice--textual__list-option"]}},"style":{"css":["target-choice--textual__list"]}},"input":false,"style":{"css":["target-choice--textual"]}}}],"style":{"ref":["pad-left"],"gss":{"box":{"border":{"bottom":{"type":"solid","width":{"value":2,"unit":"px"},"color":{"type":"hexadecimal","value":"#c0c0c0"}}},"width":{"value":100,"unit":"%"}}}}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["primitive-constraint"],"ref":["pad-left","pad-right"]}}],"style":{"css":["inline"]}}},{"concept":{"name":"primitive"},"tags":["value"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["target-choice--textual__list-option"]}},"style":{"css":["target-choice--textual__list"]}},"input":false,"style":{"css":["target-choice--textual"]}}}]}},{"concept":{"name":"string primitive"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"template","name":"collapse-menu"},{"type":"attribute","name":"default","tag":"default-string"},{"type":"attribute","name":"constraint","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add constraint","style":{"css":["btn","textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint__attribute"]}}]}},{"concept":{"name":"string primitive constraint"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Constraint","style":{"css":["title--small","primitive-constraint__title--small"]}}},{"type":"layout","layout":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"length","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Length","style":{"css":["textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint-option"]}},{"type":"attribute","name":"value","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Value","style":{"css":["textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint-option"]}},{"type":"attribute","name":"values","tag":"value-set","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Fixed values","style":{"css":["textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint-option"]}}],"style":{"css":["primitive-constraint__options"]}}}]}},{"concept":{"name":"string primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"String","focusable":false}}]}},{"concept":{"name":"number primitive"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"template","name":"collapse-menu"},{"type":"attribute","name":"default","tag":"default-number"},{"type":"attribute","name":"constraint","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add constraint","style":{"css":["btn","textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint__attribute"]}}]}},{"concept":{"name":"number primitive constraint"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Constraint","style":{"css":["title--small","primitive-constraint__title--small"]}}},{"type":"layout","layout":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Value","style":{"css":["textual-option","textual-option--style"]}}}},"style":{"css":["primitive-constraint-option"]}},{"type":"attribute","name":"values","tag":"value-set","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Fixed values","style":{"css":["textual-option","textual-option--style"]}}}},"style":{"css":["primitive-constraint-option"]}}],"style":{"css":["primitive-constraint__options"]}}}]}},{"concept":{"name":"number primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Number"}}]}},{"concept":{"name":"boolean primitive"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"template","name":"collapse-menu"},{"type":"attribute","name":"default","tag":"default-boolean"}]}},{"concept":{"name":"boolean primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Boolean"}}]}},{"concept":{"name":"reference primitive"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"template","name":"collapse-menu"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Target","style":{"css":["keyword","label"]}}},{"type":"attribute","name":"accept","tag":"textual"}],"style":{"css":["line"]}}}]}},{"concept":{"name":"reference primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Reference","focusable":false}}]}},{"concept":{"name":"set primitive"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"template","name":"collapse-menu"},{"type":"layout","layout":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"ordered","tag":"field-binary-state--ordered"},{"type":"static","static":{"type":"text","content":"set of","style":{"css":["keyword"]}}}],"style":{"css":["line"]}}},{"type":"attribute","name":"accept","tag":"textual"}],"style":{"css":["primitive-sub"]}}},{"type":"attribute","name":"constraint","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add constraint","style":{"css":["btn","textual-option","textual-option--constraint"]}}}},"style":{"css":["primitive-constraint__attribute"]}}]}},{"concept":{"name":"set primitive constraint"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Constraint","style":{"css":["title--small","primitive-constraint__title--small"]}}},{"type":"layout","layout":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"cardinality","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Cardinality","style":{"css":["textual-option","textual-option--style"]}}}},"style":{"css":["primitive-constraint-option"]}}],"style":{"css":["primitive-constraint__options"]}}}]}},{"concept":{"name":"set primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Set","focusable":false}}]}},{"concept":{"name":"concept primitive"},"tags":["choice-selection"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"attribute","name":"concept","tag":"textual"}]}},{"concept":{"name":"concept primitive"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"User-defined","focusable":false}}]}},{"concept":{"name":"string constraint"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["title--small","constraint-choice--textual__title"]}}},{"type":"field","field":{"type":"choice","input":false,"choice":{"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option","font-ui"]}},"style":{"css":["constraint-choice--textual__choice-list"]}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"string pattern constraint"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"insensitive","tag":"toggle-field"},{"type":"attribute","name":"global","tag":"toggle-field"}]}},{"type":"attribute","name":"value","tag":"textual"}]}},{"concept":{"name":"string pattern constraint"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Regex"}}]}},{"concept":{"name":"string match constraint"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Start:"}},{"type":"attribute","name":"start","tag":"textual"}],"style":{"css":["constraint-range"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"End:"}},{"type":"attribute","name":"end","tag":"textual"}],"style":{"css":["constraint-range"]}}}]}},{"concept":{"name":"string match constraint"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Match","focusable":false}}]}},{"concept":{"name":"string constraint value"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"textual"}]}},{"concept":{"name":"number constraint"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["title--small","constraint-choice--textual__title"]}}},{"type":"field","field":{"type":"choice","input":false,"choice":{"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option","font-ui"]}},"style":{"css":["constraint-choice--textual__choice-list"]}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"number constraint value"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"textual"}]}},{"concept":{"name":"number constraint value"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Fixed","focusable":false}}]}},{"concept":{"name":"number constraint range"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Minimum:"}},{"type":"attribute","name":"min"}],"style":{"css":["constraint-range"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Maximum:"}},{"type":"attribute","name":"max"}],"style":{"css":["constraint-range"]}}}]}},{"concept":{"name":"number constraint range"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Range"}}]}},{"concept":{"name":"value"},"tags":["textual"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["target-choice--textual__list-option"]}},"style":{"css":["target-choice--textual__list"]}},"input":false,"style":{"css":["target-choice--textual"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["primitive-constraint"]}}],"style":{"css":["inline"]}}},{"concept":{"name":"number value"},"tags":["choice-selection"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"attribute","name":"value","tag":"simple-textbox"}]}},{"concept":{"name":"number value"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Number"}}]}},{"concept":{"name":"string value"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"simple-textbox"}]}},{"concept":{"name":"string value"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"String","focusable":false}}]}},{"concept":{"name":"boolean value"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"toggle-field"}]}},{"concept":{"name":"boolean value"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Boolean"}}]}},{"concept":{"name":"boolean"},"tags":["field-binary-state"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":"required","style":{"css":["yesno-field__value"]}}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":"optional","style":{"css":["yesno-field__value"]}}}]}},"label":{"style":{"css":["yesno-field__value"]}},"style":{"css":["yesno-field"]}}},{"concept":{"name":"boolean"},"tags":["field-binary-state--ordered"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":"Ordered"}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":"Non-ordered"}}]}},"input":{"style":{"css":["yesno-field__input"]}},"label":{"style":{"css":["yesno-field__value"]}},"style":{"css":["yesno-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"}}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"}}}]}},"label":{"style":{"css":["toggle-field__label"]}},"style":{"css":["toggle-field","font-ui"]}}},{"concept":{"name":"boolean"},"tags":["default-boolean"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"true","style":{"css":["yesno-field__value"]}}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"false","style":{"css":["yesno-field__value"]}}}]}},"style":{"css":["yesno-field","yesno-field--default"]}}},{"concept":{"name":"number"},"tags":["default-number"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Default value","style":{"css":["textfield--labeled__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}}],"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"number"},"tags":["textual"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"number","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"number"},"tags":["label-number"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"number"},"tags":["simple-textbox"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"field","field":{"type":"text","resizable":true,"input":{"type":"number","placeholder":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"reference"},"tags":["textual"],"type":"field","content":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a reference","expanded":false,"input":{"placeholder":"filter","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"concept":{"name":"reference"},"tags":["label-reference"],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["keyword","label"]}}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a reference","expanded":false,"input":{"placeholder":"filter","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}}],"style":{"css":["label-reference-container"]}}},{"concept":{"name":"set"},"tags":["attribute-set","expanded"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Attributes"}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New"}}],"help":"Add an attribute","style":{"css":["textual-list__btn-add","textual-list__btn-add--before"]}},"remove":false},"style":{"css":["textual-list","textual-list--attribute"]}}}]}},{"type":"static","static":{"type":"plink","tag":"collapsed","help":"Collapse the attributes","content":[{"type":"static","static":{"type":"text","content":{"type":"html","html":"&ndash;"}}}],"style":{"css":["attribute-list__plink","attribute-list__plink--expanded"]}}}],"style":{"css":["concept-section-title"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"attribute-list-item--textual"},"style":{"css":["textual-list__list-item--block"]}},"style":{"css":["textual-list__list"],"ref":["pad-all"]}},"action":{"add":false,"remove":{"help":"Remove attribute","content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--attribute"]}}}]}},{"concept":{"name":"set"},"tags":["attribute-set","collapsed"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"plink","tag":"expanded","content":[{"type":"static","static":{"type":"text","content":[{"type":"raw","raw":"View attributes : "},{"type":"property","name":"length","style":{"css":["attribute-list__plink-content-length"]}},{"type":"raw","raw":"defined"}],"style":{"css":["attribute-list__plink-content"]}}}],"style":{"css":["attribute-list__plink","attribute-list__plink--collapsed"]}}}]}},{"concept":{"name":"set"},"tags":["property-set","expanded"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Properties"}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"help":"Add a property","position":"before","content":[{"type":"static","static":{"type":"text","content":"New","focusable":false}}],"style":{"css":["textual-list__btn-add"]}},"remove":false},"style":{"css":["textual-list","textual-list--property"]}}}]}},{"type":"static","static":{"type":"plink","tag":"collapsed","help":"Collapse the properties","content":[{"type":"static","static":{"type":"text","content":{"type":"html","html":"&ndash;"}}}],"style":{"css":["attribute-list__plink","attribute-list__plink--expanded"]}}}],"style":{"css":["concept-section-title"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"property-list-item--textual"},"style":{"css":["textual-list__list-item--block"]}},"style":{"css":["textual-list__list"],"ref":["pad-all"]}},"action":{"add":false,"remove":{"help":"Remove property","content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--property"]}}}]}},{"concept":{"name":"set"},"tags":["property-set","collapsed"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"plink","tag":"expanded","content":[{"type":"static","static":{"type":"text","content":[{"type":"raw","raw":"View properties : "},{"type":"property","name":"length","style":{"css":["attribute-list__plink-content-length"]}},{"type":"raw","raw":"defined"}],"style":{"css":["attribute-list__plink-content"]}}}],"style":{"css":["attribute-list__plink","attribute-list__plink--collapsed"]}}}]}},{"concept":{"name":"set"},"tags":["value-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Values accepted","style":{"css":["title--small","value-list__title--small"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"textual"},"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":{"help":"Add a value","content":[{"type":"static","static":{"type":"text","content":"New"}}],"style":{"css":["textual-list__btn-add"]}},"remove":{"help":"Remove value","content":[{"type":"static","static":{"type":"text","content":""}}],"style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--value"]}}}]}},{"concept":{"name":"string"},"tags":["readonly-string"],"type":"field","content":{"type":"text","readonly":true}},{"concept":{"name":"name"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"name","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["default-string"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Default value","style":{"css":["textfield--labeled__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}}],"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["label-string"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["simple-textbox"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"prototype":"primitive"},"type":"layout","tags":["choice-selection","collapse"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"..."}},{"type":"static","static":{"type":"plink","tag":"config","content":[{"type":"static","static":{"type":"text","content":""}}],"style":{"css":["nav-projection","render__nav-projection","render__nav-projection--collapse"]}}}],"style":{"css":["primitive-config","primitive-config--collapse"]}}}]}')},425:t=>{"use strict";t.exports=JSON.parse('{"concept":[{"name":"general","nature":"concrete","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"name","target":{"name":"name"},"required":false},{"name":"algorithm","target":{"name":"algorithm","accept":[{"name":"force-layout"},{"name":"pattern-layout"},{"name":"decoration-layout"},{"name":"grid-layout"},{"name":"tree-layout"}]},"required":true},{"name":"rtags","target":{"name":"set","accept":{"name":"tag"}},"required":true},{"name":"dimensions","target":{"name":"coordinates"}}],"properties":[{"name":"handler","type":"string","value":"general"}]},{"name":"graphic","nature":"concrete","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"name","target":{"name":"name"},"required":false},{"name":"content","target":{"name":"render","accept":[{"name":"svg-container"},{"name":"interactive-svg"}]},"required":true},{"name":"tags","target":{"name":"set","accept":{"name":"tag"}},"required":true}]},{"name":"g-fragment","nature":"concrete","attributes":[{"name":"name","target":{"name":"name"},"required":true},{"name":"content","target":{"name":"render","accept":[{"name":"static-svg"},{"name":"dynamic-svg"}]}}],"properties":[{"name":"handler","type":"string","value":"template"}]},{"name":"algorithm","nature":"prototype","attributes":[{"name":"dimensions","target":{"name":"coordinates"}}]},{"name":"force-layout","nature":"concrete","prototype":"algorithm","attributes":[{"name":"direction","target":{"name":"string","constraint":{"values":["-","+"]},"default":"-"}},{"name":"intensity","target":{"name":"force-intensity","accept":[{"name":"small-force"},{"name":"medium-force"},{"name":"strong-force"},{"name":"custom-force"}],"default":"small-force"}},{"name":"center","target":{"name":"string","constraint":{"values":["top","top-right","right","bottom-right","bottom","bottom-left","left","center"]},"default":"center"}},{"name":"edge","target":{"name":"string","constraint":{"values":["free","minimize"]},"default":"free"}},{"name":"attributes","target":{"name":"set","accept":{"name":"attribute element"}}},{"name":"fixed-elements","target":{"name":"set","accept":{"name":"fixed-element"}}},{"name":"arrow-management","target":{"name":"arrow-management","accept":[{"name":"interaction-management"},{"name":"svg-management"}],"default":{"name":"interaction-management"}}}],"properties":[{"name":"contentType","type":"string","value":"force"}]},{"name":"force-intensity","nature":"prototype"},{"name":"custom-force","nature":"concrete","prototype":"force-intensity","attributes":[{"name":"intensity","target":{"name":"number"},"default":0}]},{"name":"small-force","nature":"concrete","prototype":"force-intensity","attributes":[{"name":"intensity","target":{"name":"number"},"value":50}]},{"name":"medium-force","nature":"concrete","prototype":"force-intensity","attributes":[{"name":"intensity","target":{"name":"number"},"value":100}]},{"name":"strong-force","nature":"concrete","prototype":"force-intensity","attributes":[{"name":"intensity","target":{"name":"number"},"value":150}]},{"name":"grid-layout","nature":"concrete","prototype":"algorithm","attributes":[]},{"name":"pattern-layout","nature":"concrete","prototype":"algorithm","attributes":[{"name":"attributes","target":{"name":"set","accept":{"name":"attribute element"}}},{"name":"pattern","target":{"name":"pattern"}},{"name":"anchor-attributes","target":{"name":"set","accept":{"name":"anchor-attribute"}}},{"name":"size","target":{"name":"coordinates"}},{"name":"arrow-management","target":{"name":"pattern-arrow"}}],"properties":[{"name":"contentType","type":"string","value":"pattern"}]},{"name":"pattern","nature":"concrete","attributes":[{"name":"attribute","target":{"name":"attribute element"}},{"name":"placement","target":{"name":"evolutive-anchors"}},{"name":"anchors","target":{"name":"anchors","accept":[{"name":"evolutive-anchors"},{"name":"inherited-anchors"}],"default":{"name":"evolutive-anchors"}}},{"name":"size","target":{"name":"size-definition","accept":[{"name":"ratio-sized"},{"name":"inherited-size"},{"name":"absolute-sized"}],"default":{"name":"ratio-sized"}}}]},{"name":"anchor-attribute","nature":"concrete","attributes":[{"name":"attribute","target":{"name":"attribute element"}},{"name":"placement","target":{"name":"pattern-placement","accept":[{"name":"unique-placement"},{"name":"anchor-based"}],"default":{"name":"unique-placement"}}}]},{"name":"pattern-placement","nature":"prototype","attributes":[]},{"name":"unique-placement","nature":"concrete","prototype":"pattern-placement","attributes":[{"name":"base","target":{"name":"string"},"constraint":{"values":["center","right","left"]}}]},{"name":"anchor-based","nature":"concrete","prototype":"pattern-placement","attributes":[{"name":"base","target":{"name":"string"}}]},{"name":"anchors","nature":"prototype","attributes":[]},{"name":"evolutive-anchors","nature":"concrete","prototype":"anchors","attributes":[{"name":"first","target":{"name":"coordinates"}},{"name":"next","target":{"name":"coordinates"}}]},{"name":"inherited-anchors","nature":"concrete","prototype":"anchors","attributes":[]},{"name":"size-definition","nature":"prototype","attributes":[]},{"name":"inherited-size","nature":"concrete","prototype":"size-definition","attributes":[{"name":"marker","target":{"name":"string"}},{"name":"property","target":{"name":"string"}},{"name":"containment-points","target":{"name":"set","accept":[{"name":"string"}]}}]},{"name":"ratio-sized","nature":"concrete","prototype":"size-definition","attributes":[{"name":"ratio","target":{"name":"number"}}]},{"name":"absolute-sized","nature":"concrete","prototype":"size-definition","attributes":[{"name":"ratio","target":{"name":"number"}}]},{"name":"decoration-layout","nature":"concrete","prototype":"algorithm","attributes":[]},{"name":"tree-layout","nature":"concrete","prototype":"algorithm","attributes":[]},{"name":"coordinates","nature":"concrete","attributes":[{"name":"x","target":{"name":"number"}},{"name":"y","target":{"name":"number"}}]},{"name":"concept","nature":"concrete","attributes":[{"name":"name","target":{"name":"name","src":["string","number","boolean","set","reference",{"type":"reference","target":{"value":"name"},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"prototype","target":{"name":"name"}}]},{"name":"fixed-element","nature":"concrete","attributes":[{"name":"attribute","target":"attribute element"},{"name":"coordinates","target":"coordinates"},{"name":"ratio","target":"ratio"}]},{"name":"ratio","nature":"concrete","attributes":[{"name":"value","target":{"name":"number","constraint":{"cardinality":{"type":"range","range":{"min":{"value":0},"max":{"value":1}}}}}}]},{"name":"arrow-management","nature":"prototype","attributes":[{"name":"content","target":{"name":"string"}},{"name":"attribute","target":{"name":"set","accept":{"name":"attribute element"}}},{"name":"self-behavior","target":{"name":"set","accept":{"name":"coordinates"}}}]},{"name":"pattern-arrow","nature":"concrete","prototype":"arrow-management","attributes":[{"name":"ranking","target":{"name":"ranking"},"required":false}]},{"name":"ranking","nature":"concrete","attributes":[{"name":"target","target":{"name":"string"}},{"name":"order","target":{"name":"string","constraint":{"values":["Ascending","Descending","MinMax","MaxMin"]}}}]},{"name":"interaction-management","nature":"concrete","prototype":"arrow-management","attributes":[]},{"name":"svg-management","nature":"concrete","prototype":"arrow-management","attributes":[{"name":"position","target":{"name":"v"}},{"name":"ratio","target":{"name":"number"}}]}]}')},78:t=>{"use strict";t.exports=JSON.parse('{"name":"Gentleman graphical","concepts":[{"name":"general"},{"name":"projection"},{"name":"g-fragment"}]}')},445:t=>{"use strict";t.exports=JSON.parse('{"projection":[{"concept":{"name":"general"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","help":"Target concept","content":"Concept:","style":{"ref":["label"]}}},{"type":"attribute","name":"concept","style":{"ref":["box-left"]}}],"style":{"gss":{"text":{"size":{"value":1.2,"unit":"em"}}}}}},{"type":"attribute","name":"rtags","tag":"rtag-set"}],"style":{"css":["model-projection-header"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"algorithm"}],"style":{"css":["model-projection-body"]}}}],"style":{"css":["model-projection"]}}},{"concept":{"name":"g-fragment"},"type":"layout","tags":[],"content":{"type":"flex","orientation":"column","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","help":"Fragment name","content":"Fragment:","style":{"ref":["label"]}}},{"type":"attribute","name":"name","tag":"simple-string","style":{"ref":["box-left"]}}],"style":{"gss":{"text":{"size":{"value":1.2,"unit":"em"}}}}}}],"style":{"css":["model-projection-header"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content"}],"style":{"css":["model-projection-body"]}}}]}},{"concept":{"name":"algorithm"},"tags":[],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice","style":{"css":["list-choice__selection"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["list-choice__option"]}},"style":{"css":["list-choice__options"]}},"expanded":"true","input":{"placeholder":"Filter","style":{"css":["list-choice__input"]}},"style":{"css":["list-choice","list-choice--render"]}}},{"type":"static","static":{"type":"button","trigger":"open-simulation","bind":"value","content":[{"type":"static","static":{"type":"text","content":"Simulate"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","bind":"value","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}],"style":{"css":["mp-element__header"],"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"type":"projection","bind":"value","placeholder":false,"required":"true","tag":"choice-selection"}]}},{"concept":{"name":"force-layout"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Force Layout","disposition":[{"type":"static","static":{"type":"text","content":"Fo","style":{"css":["general-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Force-Layout","style":{"css":["general-choice-value"]}}}]}},{"concept":{"name":"force-layout"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Force definition","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"F:"}},{"type":"attribute","name":"direction"},{"type":"attribute","name":"intensity"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Edge-Crossing"}},{"type":"attribute","name":"edge"}]}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"attributes","tag":"action"},{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"attributes","tag":"attribute-set"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"fixed-elements","tag":"action"},{"type":"static","static":{"type":"text","content":"Fixed-elements","style":{"css":["title"]}}}]}},{"type":"attribute","name":"fixed-elements","tag":"attribute-set"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Arrow","style":{"css":["title"]}}},{"type":"attribute","name":"arrow-management","tag":"choice"}]}},{"type":"attribute","name":"arrow-management","tag":"choice-selection"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"force-layout"},"tags":["state"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Dimensions","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"dimensions","tag":"dimensions-vertical"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"fixed-element"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"attribute","tag":"list-item"},{"type":"attribute","name":"coordinates","tag":"vertical"}]}},{"type":"attribute","name":"ratio"}]}},{"concept":{"name":"force-intensity"},"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}}},"placeholder":"Select an intensity","expanded":false,"input":false,"style":{"css":["select-choice","select-choice--component"]}}}]}},{"concept":{"name":"small-force"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"small"}}]}},{"concept":{"name":"small-force"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"50"}}]}},{"concept":{"name":"medium-force"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"medium"}}]}},{"concept":{"name":"medium-force"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"100"}}]}},{"concept":{"name":"strong-force"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"strong"}}]}},{"concept":{"name":"strong-force"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"150"}}]}},{"concept":{"name":"custom-force"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"custom"}}]}},{"concept":{"name":"custom-force"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"attribute","name":"intensity"}]}},{"concept":{"name":"grid-layout"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Force Layout","disposition":[{"type":"static","static":{"type":"text","content":"Gr","style":{"css":["general-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Grid-Layout","style":{"css":["general-choice-value"]}}}]}},{"concept":{"name":"pattern-layout"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Force Layout","disposition":[{"type":"static","static":{"type":"text","content":"Pa","style":{"css":["general-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Pattern-Layout","style":{"css":["general-choice-value"]}}}]}},{"concept":{"name":"pattern-layout"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"attributes","tag":"action"},{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"attributes","tag":"attribute-set"}]}},{"type":"layout","layout":{"type":"flex","disposition":[{"type":"static","static":{"type":"text","content":"Pattern definition","style":{"css":["title"]}}}]}},{"type":"attribute","name":"pattern"},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"anchor-attributes","tag":"action"},{"type":"static","static":{"type":"text","content":"Anchor-attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"anchor-attributes","tag":"attribute-set"}]}},{"type":"layout","layout":{"type":"flex","disposition":[{"type":"static","static":{"type":"text","content":"Arrow Management","style":{"css":["title"]}}}]}},{"type":"attribute","name":"arrow-management"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"pattern-layout"},"tags":["state"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Dimensions","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"dimensions","tag":"dimensions-vertical"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"pattern"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"attribute","tag":"list-item"},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Placement","style":{"css":["title"]}}},{"type":"attribute","name":"placement","tag":"choice-selection"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Anchors","style":{"css":["title"]}}},{"type":"attribute","name":"anchors"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Size","style":{"css":["title"]}}},{"type":"attribute","name":"size"}]}}]}},{"concept":{"name":"anchor-attribute"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"attribute"},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Placement","style":{"css":["label"]}}},{"type":"attribute","name":"placement","tag":"choice"}]}},{"type":"attribute","name":"placement","tag":"choice-selection"}]}}]}},{"concept":{"name":"pattern-placement"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":"choice","style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a placement","expanded":false,"input":{"placeholder":"Select a placement","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}}]}},{"concept":{"name":"pattern-placement"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"unique-placement"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Unique"}}]}},{"concept":{"name":"unique-placement"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"attribute","name":"base","tag":"label-string"}]}},{"concept":{"name":"anchor-based"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Anchor-based"}}]}},{"concept":{"name":"anchor-based"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"static","static":{"type":"text","content":"Reference","style":{"css":["label"]}}},{"type":"attribute","name":"base"}]}},{"concept":{"name":"anchors"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":"choice","style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select an anchor type","expanded":false,"input":{"placeholder":"Select a placement","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"evolutive-anchors"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Evolutive"}}]}},{"concept":{"name":"evolutive-anchors"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"First","style":{"css":["title"]}}},{"type":"attribute","name":"first","tag":"vertical"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Next","style":{"css":["title"]}}},{"type":"attribute","name":"next","tag":"vertical"}]}}]}},{"concept":{"name":"inherited-anchors"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Inherited"}}]}},{"concept":{"name":"inherited-anchors"},"tags":["choice-selection"],"type":"layout","projection":{"type":"wrap","disposition":[]}},{"concept":{"name":"size-definition"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":"choice","style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select an anchor type","expanded":false,"input":{"placeholder":"Select a placement","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"ratio-sized"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Ratio"}}]}},{"concept":{"name":"ratio-sized"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"attribute","name":"ratio","tag":"textual--labelled"}]}},{"concept":{"name":"inherited-size"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Inherited"}}]}},{"concept":{"name":"inherited-size"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"marker","tag":"label-string"},{"type":"attribute","name":"property","tag":"label-string"}]}},{"type":"attribute","name":"containment-points","tag":"element-set"}]}},{"concept":{"name":"absolute-sized"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Inherited"}}]}},{"concept":{"name":"absolute-sized"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"attribute","name":"ratio","tag":"textual--labelled"}]}},{"concept":{"name":"decoration-layout"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Force Layout","disposition":[{"type":"static","static":{"type":"text","content":"De","style":{"css":["general-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Decoration-Layout","style":{"css":["general-choice-value"]}}}]}},{"concept":{"name":"inherited-anchor"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"inherited"}}]}},{"concept":{"name":"inherited-anchor"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","disposition":[{"type":"attribute","name":"scope","tag":"label-string"}]}},{"concept":{"name":"tree-layout"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Force Layout","disposition":[{"type":"static","static":{"type":"text","content":"Tr","style":{"css":["general-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Tree-Layout","style":{"css":["general-choice-value"]}}}]}},{"concept":{"name":"set"},"tags":["rtag-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"R-Tags","style":{"css":["title","mp-tags-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a r-tag","style":{"css":["mp-tags-header__action-add"]}}},"style":{"css":["mp-tags-header__action"]}}}],"style":{"css":["mp-tags-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"simple-string--tag"},"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":false},"style":{"css":["mp-tags__list"]}}}],"style":{"css":["mp-tags"]}}},{"concept":{"name":"coordinates"},"tags":["dimensions-vertical"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Width:"},"style":{"css":["label","name-field--textual__label"],"ref":["box-right"]}},{"type":"attribute","name":"x","tag":"box"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Height:"},"style":{"css":["label","name-field--textual__label"]}},{"type":"attribute","name":"y","tag":"box"}]}}]}},{"concept":{"name":"coordinates"},"tags":["vertical","list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"x","tag":"textual--labelled"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"y","tag":"textual--labelled"}]}}]}},{"concept":{"name":"ratio"},"tags":[],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Ratio","style":{"css":["label"]}}},{"type":"attribute","name":"value","tag":"box"}]}},{"concept":{"name":"arrow-management"},"tags":["choice"],"type":"layout","projection":{"type":"flex","orientation":"row","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":"choice","style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a placement","expanded":false,"input":{"placeholder":"Select a placement","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}}]}},{"concept":{"name":"arrow-management"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","tag":"choice-selection","placeholder":false}]}},{"concept":{"name":"interaction-management"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Interaction"}}]}},{"concept":{"name":"pattern-arrow"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"label-string"},{"type":"attribute","name":"ranking","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add ranking","help":"The input is used to filter the options","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}}},"style":{"ref":["box-top"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"attribute","tag":"action"},{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"attribute","tag":"attribute-set"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"self-behavior","tag":"action"},{"type":"static","static":{"type":"text","content":"Self-Reference","style":{"css":["title"]}}}]}},{"type":"attribute","name":"self-behavior","tag":"attribute-set"}]}},{"concept":{"name":"ranking"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"target","tag":"label-string"},{"type":"attribute","name":"order","tag":"label-string"}]}},{"concept":{"name":"interaction-management"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"label-string"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"attribute","tag":"action"},{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"attribute","tag":"attribute-set"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"self-behavior","tag":"action"},{"type":"static","static":{"type":"text","content":"Self-Reference","style":{"css":["title"]}}}]}},{"type":"attribute","name":"self-behavior","tag":"attribute-set"}]}},{"concept":{"name":"svg-management"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"SVG"}}]}},{"concept":{"name":"svg-management"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"label-string"},{"type":"attribute","name":"position","tag":"vertical"},{"type":"attribute","name":"ratio","tag":"textual--labelled"},{"type":"attribute","name":"attribute"}]}}]}')},521:t=>{"use strict";t.exports=JSON.parse('{"concept":[{"name":"projection-set","nature":"concrete","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"projections","target":{"name":"set","accept":{"name":"projection"}},"required":true}],"properties":[{"name":"handler","type":"string","value":"collection"}]},{"name":"projection","nature":"concrete","attributes":[{"name":"concept","target":{"name":"concept"},"required":true},{"name":"name","target":{"name":"name"},"required":false},{"name":"content","target":{"name":"render","accept":[{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"interactive-svg"},{"name":"add-field"},{"name":"arrow"},{"name":"container"},{"name":"svg-container"},{"name":"svg-text"}]},"required":true},{"name":"tags","target":{"name":"set","accept":{"name":"tag"}},"required":true}],"properties":[{"name":"handler","type":"string","value":"projection"}]},{"name":"template","nature":"concrete","attributes":[{"name":"name","target":{"name":"name"},"required":true},{"name":"param","target":{"name":"set","accept":{"name":"parameter"}},"required":false},{"name":"content","target":{"name":"set","accept":{"name":"render","accept":[{"name":"container"},{"name":"svg-container"},{"name":"interactive-svg"},{"name":"static-svg"},{"name":"dynamic-svg"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"attribute element"}]}}}],"properties":[{"name":"handler","type":"string","value":"template"}]},{"name":"parameter","nature":"concrete","attributes":[{"name":"name","target":{"name":"string"},"required":true},{"name":"type","target":{"name":"value"},"required":true}]},{"name":"value","nature":"prototype","attributes":[]},{"name":"string-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"string"}}]},{"name":"number-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"number"}}]},{"name":"boolean-value","nature":"concrete","prototype":"value","attributes":[{"name":"value","target":{"name":"boolean"}}]},{"name":"argument","nature":"concrete","attributes":[{"name":"name","target":{"name":"reference","accept":{"name":"parameter"}},"required":true},{"name":"value","target":{"name":"value"},"required":true}]},{"name":"concept","nature":"concrete","attributes":[{"name":"name","target":{"name":"name","src":["string","number","boolean","set","reference",{"type":"reference","target":{"value":"name"},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"prototype","target":{"name":"name"}}]},{"name":"render","nature":"prototype","attributes":[{"name":"style","target":{"name":"style"},"required":false},{"name":"help","target":{"name":"string"},"required":false},{"name":"focusable","target":{"name":"boolean","default":true}},{"name":"hidden","target":{"name":"boolean","default":false}},{"name":"sibling","target":{"name":"sibling"}}]},{"name":"field","nature":"prototype","prototype":"render","attributes":[{"name":"readonly","target":{"name":"boolean","default":false}},{"name":"disabled","target":{"name":"boolean","default":false}}]},{"name":"text-field","nature":"concrete","prototype":"field","attributes":[{"name":"input","target":{"name":"input"}},{"name":"multiline","target":{"name":"boolean","default":false}},{"name":"resizable","target":{"name":"boolean","default":false}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"text"}]},{"name":"input","nature":"concrete","prototype":"render","attributes":[{"name":"type","target":{"name":"string","default":"text","constraint":{"values":["text","number","email","tel","url","color","date","range"]}}},{"name":"placeholder","target":{"name":"string"}}]},{"name":"binary-field","nature":"concrete","prototype":"field","attributes":[{"name":"checkbox","target":{"name":"checkbox"},"required":false},{"name":"true","target":{"name":"static-content"}},{"name":"false","target":{"name":"static-content"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"binary"}]},{"name":"checkbox","nature":"concrete","prototype":"render","attributes":[{"name":"position","target":{"name":"string","constraint":{"values":["before","after"]},"default":"before"}},{"name":"label","target":{"name":"label"}}]},{"name":"label","nature":"concrete","prototype":"render","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"static-content","nature":"concrete","attributes":[{"name":"content","target":{"name":"set","accept":{"name":"element","accept":[{"name":"text-static"},{"name":"image-static"}]}}}]},{"name":"choice-field","nature":"concrete","prototype":"field","attributes":[{"name":"choice template","target":{"name":"template reference"},"required":true},{"name":"expanded","target":{"name":"boolean"},"required":true},{"name":"placeholder","target":{"name":"string"},"required":false},{"name":"input","target":{"name":"input"},"required":false}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"choice"}]},{"name":"list-field","nature":"concrete","prototype":"field","attributes":[{"name":"orientation","target":{"name":"string","constraint":{"values":["horizontal","vertical"]}}},{"name":"action","target":{"name":"list-field-action"}},{"name":"item template","target":{"name":"template reference"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"list"}]},{"name":"interactive-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"field","target":{"name":"source-svg"}},{"name":"static-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"dynamic-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"marker","target":"string"},{"name":"markers","target":{"name":"set","accept":{"name":"marker"}}},{"name":"self","target":{"name":"set","accept":{"name":"pure-marker"}}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"interactive"}]},{"name":"source-svg","nature":"concrete","attributes":[{"name":"tag","target":{"name":"tag"}},{"name":"marker","target":{"name":"string"}}]},{"name":"visualizer","prototype":"layout","nature":"concrete","attributes":[{"name":"current","target":{"name":"input"}},{"name":"root","target":{"name":"boolean"},"default":true}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"visualizer"}]},{"name":"static-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"model-value","target":"string"}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"static"}]},{"name":"dynamic-svg","nature":"concrete","prototype":"field","attributes":[{"name":"content","target":{"name":"string"}},{"name":"marker","target":"string"},{"name":"markers","target":{"name":"set","accept":{"name":"marker"}}},{"name":"self","target":{"name":"set","accept":{"name":"pure-marker"}}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"dynamic"}]},{"name":"marker","nature":"concrete","attributes":[{"name":"model-value","target":"string"},{"name":"aliases","target":{"name":"set","accept":{"name":"alias"}}}]},{"name":"pure-marker","nature":"concrete","attributes":[{"name":"property","target":"string"}]},{"name":"alias","nature":"concrete","attributes":[{"name":"marker-value","target":"string"},{"name":"properties","target":"svg-properties"}]},{"name":"svg-properties","nature":"concrete","attributes":[{"name":"bold","target":"boolean","default":false},{"name":"italic","target":"boolean","default":false},{"name":"underline","target":"boolean","default":false},{"name":"text-content","target":"string"},{"name":"color","target":"hex-color"},{"name":"size","target":"size"},{"name":"others","target":{"name":"set","accept":{"name":"other"}}}]},{"name":"other","nature":"concrete","attributes":[{"name":"property","target":"string"},{"name":"value","target":"string"}]},{"name":"list-field-action","nature":"concrete","attributes":[{"name":"add","target":{"name":"action"}},{"name":"remove","target":{"name":"action"}}]},{"name":"action","nature":"concrete","prototype":"render","attributes":[{"name":"position","target":{"name":"string","constraint":{"values":["before","after"]},"default":"before"}},{"name":"content","target":{"name":"string"}}]},{"name":"table-field","nature":"concrete","prototype":"field","attributes":[{"name":"orientation","target":{"name":"string","constraint":{"values":["column","row"]}}},{"name":"row template","target":{"name":"template reference"}},{"name":"header","target":{"name":"style"},"required":false},{"name":"body","target":{"name":"style"},"required":true},{"name":"footer","target":{"name":"style"},"required":false}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"table"}]},{"name":"add-field","prototype":"field","nature":"concrete","attributes":[{"name":"content","target":{"name":"string","default":"Add"}},{"name":"items","target":{"name":"template reference"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"add"}]},{"name":"arrow","prototype":"field","nature":"concrete","attributes":[{"name":"source","target":{"name":"attribute element"}},{"name":"target","target":{"name":"attribute element"}},{"name":"decorator","target":{"name":"decorator element"}},{"name":"arrow-style","target":{"name":"arrow-style"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"arrow"}]},{"name":"decorator element","nature":"concrete","attributes":[{"name":"attribute","target":{"name":"attribute element"}},{"name":"base","target":{"name":"string","constraint":{"values":["source","target","center"]},"default":"center"}}]},{"name":"arrow-target","nature":"prototype","attributes":[]},{"name":"self-target","nature":"concrete","prototype":"arrow-target","attributes":[]},{"name":"attribute-target","nature":"concrete","prototype":"arrow-target","attributes":[{"name":"attribute","target":{"name":"string"}}]},{"name":"svg-text","nature":"concrete","prototype":"field","attributes":[{"name":"x","target":{"name":"number"}},{"name":"y","target":{"name":"number"}},{"name":"content","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"field"},{"name":"elementType","type":"string","value":"svg"}]},{"name":"svg-container","nature":"concrete","prototype":"layout","attributes":[{"name":"content","target":{"name":"string"}},{"name":"p-link","target":{"name":"svg-link"},"required":false},{"name":"attributes","target":{"name":"set","accept":{"name":"svg-attribute"}}}],"properties":[{"name":"contentType","type":"string","value":"svg-container"}]},{"name":"svg-link","nature":"concrete","attributes":[{"name":"tag","target":{"name":"tag"}},{"name":"marker","target":{"name":"string"}},{"name":"external","target":{"name":"boolean","default":false}}]},{"name":"svg-attribute","nature":"concrete","attributes":[{"name":"value","target":{"name":"attribute","src":[{"type":"reference","target":{"name":"attributes","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"placement","target":{"name":"placement","accept":[{"name":"in-place"},{"name":"link-place"}],"default":"in-place"}},{"name":"property","target":{"name":"string"},"required":false}]},{"name":"placement","nature":"prototype"},{"name":"in-place","prototype":"placement","nature":"concrete","attributes":[{"name":"marker","target":{"name":"string"}},{"name":"tag","target":{"name":"tag"}},{"name":"visible","target":{"name":"boolean"},"default":true}]},{"name":"link-place","prototype":"placement","nature":"concrete","attributes":[{"name":"static-dependents","target":{"name":"set","accept":{"name":"external-svg"}}},{"name":"dynamic-dependents","target":{"name":"set","accept":{"name":"external-svg"}}}]},{"name":"external-svg","nature":"concrete","attributes":[{"name":"template","target":{"name":"string"}},{"name":"marker","target":{"name":"string"}}]},{"name":"template reference","nature":"concrete","prototype":"render","attributes":[{"name":"tag","target":{"name":"reference","accept":{"name":"tag"}}},{"name":"name","target":{"name":"string"}}]},{"name":"element","nature":"prototype","prototype":"render","attributes":[{"name":"name","target":{"name":"string"}}]},{"name":"container","nature":"concrete","prototype":"element","attributes":[{"name":"elements","target":{"name":"set","accept":{"name":"render","accept":[{"name":"container"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"attribute element"}]}}},{"name":"resizable","target":{"name":"boolean","default":false}},{"name":"wrappable","target":{"name":"boolean","default":true}},{"name":"layout","target":{"name":"simple-layout"}}],"properties":[{"name":"contentType","type":"string","value":"container"}]},{"name":"layout","nature":"prototype","prototype":"element","attributes":[]},{"name":"simple-layout","nature":"concrete","prototype":"layout","attributes":[{"name":"orientation","target":{"name":"string","default":"row","constraint":{"values":["row","column"]}}},{"name":"wrappable","target":{"name":"boolean","default":true}},{"name":"align-items","target":{"name":"string","default":"start","constraint":{"values":["start","end","center","stretch","baseline"]}}},{"name":"justify-content","target":{"name":"string","default":"start","constraint":{"values":["start","end","center","space-between","space-around","space-evenly"]}}}],"properties":[{"name":"contentType","type":"string","value":"layout"},{"name":"elementType","type":"string","value":"flex"}]},{"name":"table-layout","nature":"concrete","prototype":"layout","attributes":[{"name":"orientation","target":{"name":"string","default":"row","constraint":{"values":["row","column"]}}},{"name":"rows","target":{"name":"set","accept":{"name":"row"},"constraint":{"cardinality":{"type":"range","range":{"min":{"value":1}}}}}}],"properties":[{"name":"contentType","type":"string","value":"layout"},{"name":"elementType","type":"string","value":"table"}]},{"name":"row","nature":"concrete","prototype":"render","attributes":[{"name":"cells","target":{"name":"set","accept":{"name":"cell"}}}]},{"name":"cell","nature":"concrete","prototype":"render","attributes":[{"name":"span","target":{"name":"number"}},{"name":"content","target":{"name":"render","accept":[{"name":"container"},{"name":"text-field"},{"name":"binary-field"},{"name":"choice-field"},{"name":"list-field"},{"name":"text-static"},{"name":"image-static"},{"name":"link-static"},{"name":"plink-static"},{"name":"button-static"},{"name":"attribute element"}]}}]},{"name":"static element","nature":"prototype","prototype":"element","attributes":[{"name":"editable","target":{"name":"boolean","default":false}}]},{"name":"atomic element","nature":"prototype","prototype":"static element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"text-static","nature":"concrete","prototype":"atomic element","attributes":[{"name":"content","target":{"name":"string"}},{"name":"asHTML","target":{"name":"boolean"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"text"}]},{"name":"image-static","nature":"concrete","prototype":"atomic element","attributes":[{"name":"url","alias":"src","target":{"name":"string"}},{"name":"alt","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"image"}]},{"name":"link-static","nature":"concrete","prototype":"static element","attributes":[{"name":"url","alias":"href","target":{"name":"string"}},{"name":"url type","alias":"urlType","target":{"name":"string","constraint":{"values":["link","email","phone"]}}},{"name":"content","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"link"}]},{"name":"plink-static","nature":"concrete","prototype":"element","attributes":[{"name":"tag","alias":"href","target":{"name":"string"}},{"name":"content","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"plink"}]},{"name":"button-static","nature":"concrete","prototype":"element","attributes":[{"name":"trigger","target":{"name":"name","default":false}},{"name":"disabled","target":{"name":"boolean","default":false}},{"name":"content","target":{"name":"set","accept":{"name":"atomic element"}}}],"properties":[{"name":"contentType","type":"string","value":"static"},{"name":"elementType","type":"string","value":"button"}]},{"name":"attribute element","nature":"concrete","prototype":"element","attributes":[{"name":"value","target":{"name":"attribute","src":[{"type":"reference","target":{"name":"attributes","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}},{"name":"tag","target":{"name":"reference","accept":{"name":"tag"}},"required":true},{"name":"placeholder","target":{"name":"static-content"}},{"name":"required","target":{"name":"boolean"}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"attribute"}]},{"name":"template element","nature":"concrete","prototype":"element","attributes":[{"name":"value","target":{"name":"reference","accept":{"name":"template"}}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"template"}]},{"name":"projection element","nature":"concrete","prototype":"element","attributes":[{"name":"src","target":{"name":"name","default":"value"}},{"name":"tag","target":{"name":"reference","accept":{"name":"tag"}}},{"name":"placeholder","target":{"name":"static-content"}}],"properties":[{"name":"contentType","type":"string","value":"dynamic"},{"name":"elementType","type":"string","value":"projection"}]},{"name":"external element","nature":"prototype","prototype":"element","attributes":[{"name":"content","target":{"name":"string"}}]},{"name":"html-external","nature":"concrete","prototype":"external element","attributes":[{"name":"selector","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"external"},{"name":"elementType","type":"string","value":"html"}]},{"name":"property-content","nature":"concrete","attributes":[{"name":"content","target":{"name":"string","src":["refname","value",{"type":"reference","target":{"name":"properties","rel":"children","value":"name","source":{"type":"reference","rel":"parent","name":"projection","value":{"type":"reference","rel":"children","name":"concept","value":{"type":"attribute","name":"name"}}}},"source":{"type":"resource","name":"metamodel"}}]}}],"properties":[{"name":"contentType","type":"string","value":"property"},{"name":"elementType","type":"string","value":"content"}]},{"name":"name","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":{"value":1},"max":{"value":50}}}}},{"name":"tag","nature":"derivative","base":"string","constraint":{"value":{"type":"pattern","pattern":{"insensitive":true,"global":true,"value":"^\\\\w+(-\\\\w+)*$"}}}},{"name":"attribute","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":1}}}},{"name":"property","nature":"derivative","base":"string","constraint":{"length":{"type":"range","range":{"min":1}}}},{"name":"sibling","nature":"concrete","attributes":[{"name":"tag","target":{"name":"string"}},{"name":"receiver","target":{"name":"string"}}]}]}')},547:t=>{"use strict";t.exports=JSON.parse('{"name":"Gentleman projection","concepts":[{"name":"projection-set"},{"name":"projection"},{"name":"template"}]}')},276:t=>{"use strict";t.exports=JSON.parse('{"projection":[{"type":"template","name":"nav-bar","param":[{"name":"tabs","type":"string"},{"name":"tab","type":"string","default":"content"}],"content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"template","name":{"type":"param","name":"tabs"},"param":[{"name":"tab","value":{"type":"param","name":"tab"}}]}],"style":{"css":["nav","component-nav"]}}}]},{"type":"template","name":"mp-element-header","content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"button","trigger":"open-state","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}}]},{"type":"style","name":"pad-all","style":{"box":{"inner":{"all":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-top","style":{"box":{"inner":{"top":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-right","style":{"box":{"inner":{"right":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-bottom","style":{"box":{"inner":{"bottom":{"value":6,"unit":"px"}}}}},{"type":"style","name":"pad-left","style":{"box":{"inner":{"left":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-top","style":{"box":{"outer":{"top":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-right","style":{"box":{"outer":{"right":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-bottom","style":{"box":{"outer":{"bottom":{"value":6,"unit":"px"}}}}},{"type":"style","name":"box-left","style":{"box":{"outer":{"left":{"value":6,"unit":"px"}}}}},{"type":"style","name":"label","style":{"text":{"bold":500,"color":{"type":"hex","value":"#555"}}}},{"concept":{"name":"template"},"type":"layout","tags":[],"content":{"type":"flex","orientation":"column","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","style":{"css":["line","model-projection__line"],"ref":["pad-left"]},"disposition":[{"type":"static","static":{"type":"text","content":"Template","style":{"css":["keyword"],"text":{"bold":true}}}},{"type":"attribute","name":"name","tag":"textual"}]}},{"type":"static","static":{"type":"text","content":"Content","style":{"css":["section-title","font-ui"]}}},{"type":"attribute","name":"content","tag":"action"},{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"template"},"type":"layout","tags":["choice","choice-selection"],"content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"name","tag":"readonly"}]}},{"concept":{"name":"projection-set"},"type":"layout","tags":[],"content":{"type":"flex","orientation":"column","style":{"css":["model-projection"]},"disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","help":"Target concept","content":"Concept:","style":{"ref":["label"]}}},{"type":"attribute","name":"concept","style":{"ref":["box-left"]}}],"style":{"css":["model-projection-header"],"gss":{"text":{"size":{"value":1.2,"unit":"em"}}}}}},{"type":"attribute","name":"projections","tag":"projection-set"}]}},{"concept":{"name":"projection"},"type":"layout","tags":[],"content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","help":"Target concept","content":"Concept:","style":{"ref":["label"]}}},{"type":"attribute","name":"concept","style":{"ref":["box-left"]}}],"style":{"gss":{"text":{"size":{"value":1.2,"unit":"em"}}}}}},{"type":"attribute","name":"tags","tag":"tag-set"}],"style":{"css":["model-projection-header"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content"}],"style":{"css":["model-projection-body"]}}}],"style":{"css":["model-projection"]}}},{"concept":{"name":"projection"},"type":"layout","tags":["collection-projection"],"content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"tags","tag":"tag-set"}]}},{"type":"attribute","name":"content"}],"style":{"css":["model-projection-body"]}}},{"concept":{"name":"render"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice","style":{"css":["list-choice__selection"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["list-choice__option"]}},"style":{"css":["list-choice__options"]}},"expanded":true,"input":{"placeholder":"Filter","style":{"css":["list-choice__input"]}},"style":{"css":["list-choice","list-choice--render"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","bind":"value","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","bind":"value","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}},{"type":"static","static":{"type":"button","trigger":"open-sibling","bind":"value","content":[{"type":"static","static":{"type":"text","content":"Sibling"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["mp-element__header"],"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"type":"projection","bind":"value","placeholder":false,"required":true,"tag":"choice-selection"}],"style":{"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"concept":{"name":"concept"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"name","tag":"simple-string--concept"}]}},{"concept":{"name":"container"},"type":"layout","tags":["choice-selection","config"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"elements","tag":"action"},{"type":"attribute","name":"layout"}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"elements","tag":"element-set","style":{"css":["container-config-content"]}}]}}],"style":{"css":["container-config"]}}},{"concept":{"name":"container"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Co","style":{"css":["container-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Container","style":{"css":["container-choice-value"]}}}],"style":{"css":["container-choice"]}}},{"concept":{"name":"container"},"type":"layout","tags":["state","dynamic-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"wrappable","tag":"switch-field"},{"type":"attribute","name":"focusable","tag":"switch-field"}],"style":{"css":["container-config","container-config--attribute"]}}},{"concept":{"name":"container"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["container-config","container--binary"]}}},{"concept":{"name":"container"},"type":"layout","tags":["sibling","field-sibling"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"sibling","required":true}],"style":{"css":["container-config","container--binary"]}}},{"concept":{"name":"simple-layout"},"type":"layout","tags":["choice-selection","config"],"projection":{"type":"flex","orientation":"row","alignItems":"center","disposition":[{"type":"attribute","name":"orientation","tag":"label-string"},{"type":"attribute","name":"align-items","tag":"label-string","style":{"ref":["box-left"]}},{"type":"attribute","name":"justify-content","tag":"label-string","style":{"ref":["box-left"]}}],"style":{"css":["layout-config"]}}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"nav-bar","param":[{"name":"tabs","value":"layout-tabs"},{"name":"tab","value":"content"}]},{"type":"attribute","name":"rows","tag":"row-set"}],"style":{"css":["layout-config","layout-config--main"]}}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice-selection","field-state","state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"template","name":"nav-bar","param":[{"name":"tabs","value":"layout-tabs"},{"name":"tab","value":"state"}]},{"type":"attribute","name":"orientation","tag":"label-string","style":{"ref":["pad-top"]}},{"type":"attribute","name":"focusable","tag":"field-binary-state"}],"style":{"css":["field-config","field-config--state"],"ref":["pad-left"]}}},{"concept":{"name":"table-layout"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"disposition":[{"type":"static","static":{"type":"text","help":"Table Layout","content":"Table-Layout"}}]}},{"concept":{"name":"row"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"cells","tag":"cell-set"}]}},{"concept":{"name":"cell"},"type":"layout","tags":["list-item"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"content"}]}},{"concept":{"name":"text-field"},"type":"layout","tags":["choice-selection","config","field-config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"input","style":{"css":["field-config-main"]}}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"resizable","tag":"switch-field"},{"type":"attribute","name":"multiline","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--text"]}}},{"concept":{"name":"text-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Text Field","disposition":[{"type":"static","static":{"type":"text","content":"Tx","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Text-Field","style":{"css":["field-choice-value"]}}}],"style":{"css":["field-choice"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"checkbox","required":true,"style":{"css":["field-config-main"]}}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--binary"]}}},{"concept":{"name":"binary-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Binary Field","disposition":[{"type":"static","static":{"type":"text","content":"Bi","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Binary-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"choice-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"choice template","tag":"choice-field-option"},{"type":"attribute","name":"input","tag":"text","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add search input","help":"The input is used to filter the options","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}}},"style":{"ref":["box-top"]}}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"expanded","tag":"switch-field"},{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--choice"]}}},{"concept":{"name":"choice-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Choice Field","disposition":[{"type":"static","static":{"type":"text","content":"Ch","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Choice-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"list-field"},"type":"layout","tags":["choice-selection","field-config","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Item template","style":{"css":["title"]}}},{"type":"attribute","name":"item template"},{"type":"attribute","name":"action","style":{"ref":["box-top"]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["state","field-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"readonly","tag":"switch-field"},{"type":"attribute","name":"orientation","tag":"label-string"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["style","field-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"list-field"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"List Field","disposition":[{"type":"static","static":{"type":"text","content":"Ls","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"List-Field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"list-field-action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"add","style":{"css":["action-container"]}}]}}]}},{"concept":{"name":"add-field"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Add field","disposition":[{"type":"static","static":{"type":"text","content":"Ad","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Add-field","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"add-field"},"tags":["choice-selection"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Item template","style":{"css":["title"]}}},{"type":"attribute","name":"items"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Content ","style":{"css":["title"]}}}]}},{"type":"attribute","name":"content"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"add-field"},"tags":["state","field-style"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"arrow"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","focusable":false,"help":"Add field","disposition":[{"type":"static","static":{"type":"text","content":"Ar","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Arrow","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"arrow"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Source","style":{"css":["title"]}}},{"type":"attribute","name":"source","tag":"attribute-name"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Target","style":{"css":["title"]}}},{"type":"attribute","name":"target","tag":"attribute-name"}]}}]}},{"type":"static","static":{"type":"text","content":"Decoration","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"decorator"}]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"arrow"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"arrow-style"}]}},{"concept":{"name":"decorator element"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"attribute"},{"type":"attribute","name":"base","tag":"label-string"}]}},{"concept":{"name":"svg-text"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"help":"SVG Field","disposition":[{"type":"static","static":{"type":"text","content":"St","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Svg-Text","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"svg-text"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"label-string"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"x","tag":"textual--labelled"},{"type":"attribute","name":"y","tag":"textual--labelled"}]}}]}},{"concept":{"name":"svg-container"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"help":"SVG Field","disposition":[{"type":"static","static":{"type":"text","content":"Sc","style":{"css":["container-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Svg-Container","style":{"css":["container-choice-value"]}}}]}},{"concept":{"name":"svg-container"},"type":"layout","tags":["choice-selection","config","field-config"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Projection","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Content ","style":{"css":["label"]}}},{"type":"attribute","name":"content","tag":"svg-string"},{"type":"static","static":{"type":"button","trigger":"open-edit","content":[{"type":"static","static":{"type":"text","content":"Edit"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}]},"style":{"css":["name-field","name-field--textual"]}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"attributes","tag":"action"},{"type":"static","static":{"type":"text","content":"Attributes","style":{"css":["title"]}}}]}},{"type":"attribute","name":"attributes","tag":"attribute-set"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"svg-container"},"tags":["state","field-state"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"P-link","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"p-link","placeholder":{"content":{"type":"static","static":{"type":"text","content":"Add p-link","help":"The input is used to filter the options","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}}},"style":{"ref":["box-top"]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"svg-container"},"type":"layout","tags":["visualizer","field-visualizer"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"content","tag":"visual"}]}},{"concept":{"name":"svg-attribute"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Attribute","style":{"css":["label","name-field--textual__label"]}}},{"type":"attribute","name":"value","tag":"svg-list"}]}},{"type":"attribute","name":"placement"}]}},{"concept":{"name":"placement"},"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"field","field":{"type":"choice","choice":{"option":{"template":"choice","style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a placement","expanded":false,"input":{"placeholder":"Select a placement","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"in-place"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"In-place"}}]}},{"concept":{"name":"in-place"},"tags":["choice-selection"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"marker","tag":"label-string"},{"type":"attribute","name":"tag","tag":"textual--labelled"},{"type":"attribute","name":"visible","tag":"switch-field"}]}},{"concept":{"name":"link-place"},"tags":["choice"],"type":"layout","projection":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"link-place"}}]}},{"concept":{"name":"link-place"},"tags":["choice-selection"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"static-dependents","tag":"action"},{"type":"static","static":{"type":"text","content":"Static-dependents","style":{"css":["title"]}}}]}},{"type":"attribute","name":"static-dependents","tag":"attribute-set"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"dynamic-dependents","tag":"action"},{"type":"static","static":{"type":"text","content":"Dynamic-dependents","style":{"css":["title"]}}}]}},{"type":"attribute","name":"dynamic-dependents","tag":"attribute-set"}]}},{"concept":{"name":"external-svg"},"tags":["list-item"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"template","tag":"label-string"},{"type":"attribute","name":"marker","tag":"label-string"}]}},{"concept":{"name":"interactive-svg"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"help":"Interactive svg","disposition":[{"type":"static","static":{"type":"text","content":"Is","style":{"css":["field-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Interactive-SVG","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"interactive-svg"},"tags":["choice-selection","config","field-config"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Projection","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Content ","style":{"css":["label"]}}},{"type":"attribute","name":"content","tag":"svg-string"},{"type":"static","static":{"type":"button","trigger":"open-edit","content":[{"type":"static","static":{"type":"text","content":"Edit"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}]},"style":{"css":["name-field","name-field--textual"]}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"static-dependents","tag":"action"},{"type":"static","static":{"type":"text","content":"Static-dependents","style":{"css":["title"]}}}]}},{"type":"attribute","name":"static-dependents","tag":"attribute-set"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"dynamic-dependents","tag":"action"},{"type":"static","static":{"type":"text","content":"Dynamic-dependents","style":{"css":["title"]}}}]}},{"type":"attribute","name":"dynamic-dependents","tag":"attribute-set"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"interactive-svg"},"tags":["state","field-state"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Source Field","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"field"}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"interactive-svg"},"tags":["style","field-style"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"marker","tag":"label-string"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"markers","tag":"action"},{"type":"static","static":{"type":"text","content":"alias definition","style":{"css":["mp-style__title"]}}}]}},{"type":"attribute","name":"markers","tag":"attribute-set"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"self","tag":"action"},{"type":"static","static":{"type":"text","content":"element definition","style":{"css":["mp-style__title"]}}}]}},{"type":"attribute","name":"self","tag":"attribute-set"}],"style":{"css":["mp-style"]}}},{"concept":{"name":"interactive-svg"},"type":"layout","tags":["visualizer","field-visualizer"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"content","tag":"visual-alt"}]}},{"concept":{"name":"source-svg"},"tags":["list-item"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"tag","tag":"label-string"},{"type":"attribute","name":"marker","tag":"label-string"}]}},{"concept":{"name":"svg-link"},"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"tag","tag":"label-string"},{"type":"attribute","name":"marker","tag":"label-string"},{"type":"attribute","name":"external","tag":"field-binary-state"}]}},{"concept":{"name":"attribute"},"tags":["svg-list"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"attribute","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"static-svg"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"help":"Dynamic svg","disposition":[{"type":"static","static":{"type":"text","content":"St","style":{"css":["template-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Static-SVG","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"static-svg"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Projection","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Content ","style":{"css":["label"]}}},{"type":"attribute","name":"content","tag":"svg-string"},{"type":"static","static":{"type":"button","trigger":"open-edit","content":[{"type":"static","static":{"type":"text","content":"Edit"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}]},"style":{"css":["name-field","name-field--textual"]}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Model-value ","style":{"css":["label"]}}},{"type":"attribute","name":"model-value"}]},"style":{"css":["name-field","name-field--textual"]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"static-svg"},"type":"layout","tags":["visualizer","field-visualizer"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"content","tag":"visual-alt"}]}},{"concept":{"name":"dynamic-svg"},"type":"layout","tags":["choice"],"projection":{"type":"wrap","focusable":false,"help":"Dynamic svg","disposition":[{"type":"static","static":{"type":"text","content":"Dt","style":{"css":["template-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Dynamic-SVG","style":{"css":["field-choice-value"]}}}]}},{"concept":{"name":"dynamic-svg"},"type":"layout","tags":["choice-selection"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Projection","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Content ","style":{"css":["label"]}}},{"type":"attribute","name":"content","tag":"svg-string"},{"type":"static","static":{"type":"button","trigger":"open-edit","content":[{"type":"static","static":{"type":"text","content":"Edit"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}}]},"style":{"css":["name-field","name-field--textual"]}}],"style":{"css":["field-config","field-config--list"]}}},{"concept":{"name":"dynamic-svg"},"type":"layout","tags":["style","field-style"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"marker","tag":"label-string"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"markers","tag":"action"},{"type":"static","static":{"type":"text","content":"Alias definition","style":{"css":["mp-style__title"]}}}]}},{"type":"attribute","name":"markers","tag":"attribute-set"},{"type":"layout","layout":{"type":"wrap","disposition":[{"type":"attribute","name":"self","tag":"action"},{"type":"static","static":{"type":"text","content":"element definition","style":{"css":["mp-style__title"]}}}]}},{"type":"attribute","name":"self","tag":"attribute-set"}],"style":{"css":["mp-style"]}}},{"concept":{"name":"dynamic-svg"},"type":"layout","tags":["visualizer","field-visualizer"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"content","tag":"visual-alt"}]}},{"concept":{"name":"marker"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"model-value","tag":"label-string"},{"type":"attribute","name":"aliases","tag":"attribute-set"},{"type":"attribute","name":"aliases","tag":"action-textual"}]}},{"concept":{"name":"pure-marker"},"tags":["list-item"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"property","tag":"label-string"}]}},{"concept":{"name":"alias"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"marker-value","tag":"label-string"},{"type":"attribute","name":"properties"}]}},{"concept":{"name":"svg-properties"},"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Text-style","style":{"css":["mp-style__title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"bold","tag":"toggle-field--bold","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"italic","tag":"toggle-field--italic","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"underline","tag":"toggle-field--underline","style":{"css":["text-style-rule"]}}]}},{"type":"attribute","name":"color","style":{"css":["text-style-rule"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Size","style":{"css":["label"]}}},{"type":"attribute","name":"size"}],"style":{"css":["text-style-rule"]}}},{"type":"attribute","name":"text-content","tag":"label-string"},{"type":"static","static":{"type":"text","content":"Other","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"others","tag":"attribute-set"},{"type":"attribute","name":"others","tag":"action"}],"style":{"css":["text-style"]}}},{"concept":{"name":"other"},"type":"layout","tags":["list-item"],"projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"property","tag":"label-string"},{"type":"attribute","name":"value","tag":"label-string"}],"style":{"css":["model-projection-body"]}}},{"concept":{"name":"action"},"type":"layout","tags":["choice-selection"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Add action (button)","style":{"css":["title"],"text":{"bold":true}}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["container-config-header"]}}},{"type":"attribute","name":"position","tag":"label-string"},{"type":"static","static":{"type":"text","content":"Content","style":{"css":["title"]}}},{"type":"attribute","name":"content","tag":"text-string"}]}},{"concept":{"name":"action"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"input"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Input","help":"Widget used to capture input","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"type","tag":"label-string"},{"type":"attribute","name":"placeholder","tag":"label-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["text"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Search input","help":"Widget used to capture input","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"placeholder","tag":"label-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["input-config"]}}},{"concept":{"name":"input"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"checkbox"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Checkbox","help":"Widget used to change state","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"label","style":{"ref":["box-top"]}}],"style":{"css":["input-config"]}}},{"concept":{"name":"checkbox"},"type":"layout","tags":["state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["input-config"]}}},{"concept":{"name":"checkbox"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"label"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","alignItems":"baseline","disposition":[{"type":"static","static":{"type":"text","content":"Label","help":"Widget used to change state","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"attribute","name":"content","tag":"text-string"}],"style":{"css":["input-config"]}}},{"concept":{"name":"label"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"static-content"},"type":"layout","tags":[],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"element-set"}]}},{"concept":{"name":"template"},"type":"field","tags":[],"projection":{"type":"choice","choice":{"style":{"css":["template-choice"]},"option":{"template":{"tag":"choice"},"style":{"css":["template-choice-option"]}}}}},{"concept":{"name":"template reference"},"type":"layout","tags":["config"],"projection":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}],"style":{"css":["tag-reference-wrapper"]}}},{"concept":{"name":"template reference"},"type":"layout","tags":["choice-field-option"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Option template","style":{"css":["title"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}]}}],"style":{"css":["tag-reference-wrapper"]}}},{"concept":{"name":"template reference"},"type":"layout","tags":["style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}]}},{"concept":{"name":"element"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice"},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select an element","expanded":false,"input":{"placeholder":"Select an element","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice","select-choice--component"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection"}]}},{"concept":{"name":"static element"},"type":"field","tags":["list-item"],"projection":{"type":"choice","choice":{"style":{"css":["static-choice"]},"option":{"template":{"tag":"choice"},"style":{"css":["static-choice-option"]}}},"style":{"css":["static-choice-field"]}}},{"concept":{"name":"atomic element"},"tags":["list-item"],"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"projection","bind":"value","placeholder":false,"tag":"choice","style":{"css":["list-choice__selection"]}},{"type":"field","field":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["list-choice__option"]}},"style":{"css":["list-choice__options"]}},"expanded":true,"input":{"placeholder":"Filter","style":{"css":["list-choice__input"]}},"style":{"css":["list-choice","list-choice--render"]}}},{"type":"static","static":{"type":"button","trigger":"open-state","bind":"value","content":[{"type":"static","static":{"type":"text","content":"State"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--state"]}}},{"type":"static","static":{"type":"button","trigger":"open-style","bind":"value","content":[{"type":"static","static":{"type":"text","content":"Style"}}],"style":{"css":["mp-element__btn-trigger","mp-element__btn-trigger--style"]}}}],"style":{"css":["mp-element__header"],"html":[{"name":"etype","value":{"type":"property","name":"value"}}]}}},{"type":"projection","bind":"value","placeholder":false,"required":true,"tag":"choice-selection"}]}},{"concept":{"name":"text-static"},"type":"layout","tags":["choice-selection","config"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"content","tag":"text-string"}],"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"text-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"asHTML","tag":"switch-field"}],"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"text-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--text"]}}},{"concept":{"name":"text-static"},"type":"layout","tags":["choice"],"projection":{"type":"flex","orientation":"row","focusable":false,"help":"Text Static","disposition":[{"type":"static","static":{"type":"text","content":"Txt","style":{"css":["static-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Text","style":{"css":["static-choice-value"]}}}],"style":{"css":["static-choice"]}}},{"concept":{"name":"image-static"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"URL","style":{"css":["label"]}}},{"type":"attribute","name":"url","tag":"simple-string--url"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Alt","style":{"css":["label"]}}},{"type":"attribute","name":"alt","tag":"simple-string--alt"}],"style":{"ref":["box-top"]}}}],"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"image-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"image-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--image"]}}},{"concept":{"name":"image-static"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Image Static","disposition":[{"type":"static","static":{"type":"text","content":"Img","style":{"css":["static-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Image","style":{"css":["static-choice-value"]}}}],"style":{"css":["static-choice"]}}},{"concept":{"name":"link-static"},"tags":["choice-selection","field-config","config"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"URL","style":{"css":["label"]}}},{"type":"attribute","name":"url","tag":"simple-string--url"}]}},{"type":"static","static":{"type":"text","content":"Content","style":{"css":["title"]}}},{"type":"attribute","name":"content","tag":"text-string"}]}}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"link-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"link-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"link-static"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Link Static","disposition":[{"type":"static","static":{"type":"text","content":"Lnk","style":{"css":["static-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Link","style":{"css":["static-choice-value"]}}}],"style":{"css":["static-choice"]}}},{"concept":{"name":"plink-static"},"tags":["choice-selection","field-config","config"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"tag","tag":"textual--labelled"},{"type":"attribute","name":"content","tag":"label-string"}],"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"plink-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"editable","tag":"switch-field"}],"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"plink-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--plink"]}}},{"concept":{"name":"plink-static"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Projection link","disposition":[{"type":"static","static":{"type":"text","content":"Plk","style":{"css":["static-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"P-link","style":{"css":["static-choice-value"]}}}],"style":{"css":["static-choice"]}}},{"concept":{"name":"button-static"},"tags":["choice-selection","static-config","config"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Trigger","style":{"css":["label"]}}},{"type":"attribute","name":"trigger"}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Content","style":{"css":["title"]}}},{"type":"attribute","name":"content","tag":"action"}]}},{"type":"attribute","name":"content","tag":"element-set","style":{"css":["mp-button-content"]}}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"type":"layout","tags":["state","static-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"},{"type":"attribute","name":"disabled","tag":"switch-field"},{"type":"attribute","name":"hidden","tag":"switch-field"}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"type":"layout","tags":["style","static-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["static-config","static-config--link"]}}},{"concept":{"name":"button-static"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Button Static","disposition":[{"type":"static","static":{"type":"text","content":"Btn","style":{"css":["static-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Button","style":{"css":["static-choice-value"]}}}],"style":{"css":["static-choice"]}}},{"concept":{"name":"attribute element"},"tags":["choice-selection","config"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Name","style":{"css":["label"]}}},{"type":"attribute","name":"value","tag":"simple-string"}],"style":{"css":["tag-reference-wrapper"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}],"style":{"css":["tag-reference-wrapper"]}}}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"attribute element"},"type":"layout","tags":["state","dynamic-state"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"focusable","tag":"switch-field"}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"attribute element"},"type":"layout","tags":["style","dynamic-style"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"style","required":true}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"attribute element"},"type":"layout","tags":["choice"],"content":{"type":"flex","orientation":"row","focusable":false,"help":"Attribute (dynamic)","disposition":[{"type":"static","static":{"type":"text","content":"Att","style":{"css":["dynamic-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Attribute","style":{"css":["dynamic-choice-value"]}}}],"style":{"css":["dynamic-choice"]}}},{"concept":{"name":"attribute element"},"tags":["list-item"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Name","style":{"css":["label"]}}},{"type":"attribute","name":"value","tag":"simple-string"}],"style":{"css":["tag-reference-wrapper"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tag","style":{"css":["label"]}}},{"type":"attribute","name":"tag","tag":"tag-reference"}],"style":{"css":["tag-reference-wrapper"]}}}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"attribute element"},"tags":["attribute-name"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Name","style":{"css":["label"]}}},{"type":"attribute","name":"value","tag":"simple-string"}],"style":{"css":["tag-reference-wrapper"]}}}],"style":{"css":["dynamic-config","dynamic-config--attribute"]}}},{"concept":{"name":"template element"},"tags":["choice-selection"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"value","tag":"template-reference","style":{"css":["dynamic-config-main"]}}],"style":{"css":["dynamic-config","dynamic-config--template"]}}},{"concept":{"name":"template element"},"tags":["choice"],"type":"layout","content":{"type":"flex","orientation":"row","focusable":false,"help":"Template (dynamic)","disposition":[{"type":"static","static":{"type":"text","content":"Tpl","style":{"css":["dynamic-choice-icon"]}}},{"type":"static","static":{"type":"text","content":"Template","style":{"css":["dynamic-choice-value"]}}}],"style":{"css":["dynamic-choice"]}}},{"concept":{"name":"boolean"},"tags":["field-binary-state"],"type":"field","content":{"type":"binary","state":{"true":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"yes","style":{"css":["yesno-field__value"]}}}]},"false":{"content":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","yesno-field__label"]}}},{"type":"static","static":{"type":"text","content":"no","style":{"css":["yesno-field__value"]}}}]}},"style":{"css":["yesno-field","yesno-field--check"]}}},{"concept":{"name":"boolean"},"tags":["switch-field"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"property","name":"refname"}],"style":{"css":["switch-field__label"]}},"style":{"css":["switch-field__checkbox"]}},"style":{"css":["switch-field"]}}},{"concept":{"name":"set"},"tags":["tag-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Tags","style":{"css":["title","mp-tags-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a tag","style":{"css":["mp-tags-header__action-add"]}}},"style":{"css":["mp-tags-header__action"]}}}],"style":{"css":["mp-tags-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"simple-string--tag"},"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":false},"style":{"css":["mp-tags__list"]}}}],"style":{"css":["mp-tags"]}}},{"concept":{"name":"set"},"tags":["attribute-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item--box"]}},"style":{"css":["textual-list__list"]}},"action":{"add":false,"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove element","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--element"],"ref":["pad-all"]}}}]}},{"concept":{"name":"set"},"tags":["action-textual"],"type":"field","content":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New Alias","focusable":false}}],"help":"Add an element","style":{"css":["field-config-option","font-ui"],"ref":["box-top"]}}},"style":{"css":["list-action"]}}},{"concept":{"name":"set"},"tags":["projection-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Projections","style":{"css":["title","mp-projections-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a projection","style":{"css":["mp-projections-header__action-add"]}}},"style":{"css":["mp-projections-header__action"]}}}],"style":{"css":["mp-projections-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"collection-projection"},"style":{"css":["mp-projections-field__list-item"]}},"style":{"css":["mp-projections-field__list"]}},"action":{"add":false,"remove":false},"style":{"css":["mp-projections-field"]}}}],"style":{"css":["mp-projections"]}}},{"concept":{"name":"set"},"tags":["style-set"],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Style rule","help":"Reuse the defined style rules","style":{"css":["config-title","font-ui"]}}},{"type":"field","field":{"type":"list","list":{"item":{"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"Add rule","focusable":false}}],"help":"Add a rule","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove rule","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--style"],"ref":["pad-left"]}}}]}},{"concept":{"name":"set"},"tags":["element-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item--box"]}},"style":{"css":["textual-list__list"]}},"action":{"add":false,"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove element","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--element"]}}},{"concept":{"name":"set"},"tags":["action"],"type":"field","content":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add an element","style":{"css":["list-action__btn-add"]}}},"style":{"css":["list-action"]}}},{"concept":{"name":"set"},"tags":["row-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--stripe"]}},"style":{"css":["textual-list__list"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New row","focusable":false}}],"help":"Add a row","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove row","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--row"]}}},{"concept":{"name":"set"},"tags":["cell-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--box"]}},"style":{"css":["textual-list__list","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New cell","focusable":false}}],"help":"Add a cell","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove cell","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--cell"]}}},{"concept":{"name":"number"},"tags":["textual"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"number"},"tags":["box"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"],"ref":["box-left"]}}},{"concept":{"name":"tag"},"tags":["reference"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}}]}},{"concept":{"name":"number"},"tags":["textual--labelled"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"name"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"name","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"attribute"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"attribute","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["readonly"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}}]}},{"concept":{"name":"string"},"tags":["simple-string--concept"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"concept","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string--url"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"url","type":"url","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string--alt"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"alternative text","type":"url","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string--css"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"class","style":{"css":["mp-tag__input"]}},"style":{"css":["mp-tag"]}}},{"concept":{"name":"string"},"tags":["simple-string--tag"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"tag","style":{"css":["mp-tag__input"]}},"style":{"css":["mp-tag"]}}},{"concept":{"name":"string"},"tags":["label-string","textual--labelled"],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["text-string"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"text...","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual","text-field--textual"]}}},{"concept":{"name":"string"},"tags":["html-string"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"enter <code>","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual","text-field--textual"]}}},{"concept":{"name":"string"},"tags":["svg-string"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"svg","style":{"css":["name-field--textual__input"]}}}},{"concept":{"name":"string"},"tags":["visual"],"type":"layout","projection":{"type":"visualizer","current":{"placeholder":"Current selection","resizable":false,"css":["name-field--textual__input"]},"root":true}},{"concept":{"name":"string"},"tags":["visual-alt"],"type":"layout","projection":{"type":"visualizer","current":{"placeholder":"Current selection","resizable":false,"css":["name-field--textual__input"]},"root":false}},{"concept":{"name":"reference"},"type":"field","tags":["template-reference"],"content":{"type":"choice","choice":{"option":{"template":{"tag":"choice"},"style":{"css":["select-choice__list-option"]}},"style":{"css":["select-choice__list"]}},"placeholder":"Select a template","expanded":false,"input":{"placeholder":"filter","style":{"css":["select-choice__input"]}},"style":{"css":["select-choice"]}}},{"concept":{"name":"reference"},"type":"field","tags":["tag-reference"],"content":{"type":"choice","choice":{"option":{"template":{"tag":"reference"},"style":{"css":["tag-reference__choice-option"]}},"style":{"css":["tag-reference__choice"]}},"placeholder":"select a tag","expanded":false,"input":{"placeholder":"Search...","style":{"css":["tag-reference__input"]}},"style":{"css":["tag-reference"]}}},{"concept":{"prototype":"render"},"type":"layout","tags":["choice-selection","collapse"],"projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"..."}},{"type":"static","static":{"type":"plink","tag":"config","content":[{"type":"static","static":{"type":"text","content":""}}],"style":{"css":["nav-projection","render__nav-projection","render__nav-projection--collapse"]}}}],"style":{"css":["render-config","render-config--collapse"]}}},{"concept":{"name":"sibling"},"type":"layout","projection":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Sibling","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"tag","tag":"label-string"},{"type":"attribute","name":"receiver","tag":"label-string"}]}}]}')},221:t=>{"use strict";t.exports=JSON.parse('{"concept":[{"name":"style","nature":"concrete","attributes":[{"name":"css","target":{"name":"set","accept":{"name":"string"}}},{"name":"text","target":{"name":"text-style"}},{"name":"box","target":{"name":"box-style"}}]},{"name":"text-style","nature":"concrete","attributes":[{"name":"bold","target":{"name":"boolean","default":false}},{"name":"italic","target":{"name":"boolean","default":false}},{"name":"underline","target":{"name":"boolean","default":false}},{"name":"strikethrough","target":{"name":"boolean","default":false}},{"name":"nonbreakable","target":{"name":"boolean","default":false}},{"name":"color","target":{"name":"hex-color"}},{"name":"transform","target":{"name":"text-transform"}},{"name":"size","target":{"name":"size"}},{"name":"font","target":{"name":"font"}},{"name":"line-height","target":{"name":"number"}},{"name":"letter-spacing","target":{"name":"size"},"required":false},{"name":"word-spacing","target":{"name":"size"},"required":false}]},{"name":"arrow-style","nature":"concrete","attributes":[{"name":"stroke","target":{"name":"hex-color"}},{"name":"stroke-width","target":{"name":"number"}},{"name":"stroke-linecap","target":{"name":"string","constraint":{"values":["round","butt","square"]},"default":"butt"}},{"name":"stroke-dasharray","target":{"name":"string"}},{"name":"marker-end","target":{"name":"boolean","default":false}},{"name":"marker-start","target":{"name":"boolean","default":false}}]},{"name":"box-style","nature":"concrete","attributes":[{"name":"inner","target":{"name":"spacing"}},{"name":"outer","target":{"name":"spacing"}},{"name":"background","target":{"name":"background"},"required":false},{"name":"width","target":{"name":"size"}},{"name":"height","target":{"name":"size"}},{"name":"border","target":{"name":"border"},"required":false},{"name":"corner","target":{"name":"border-radius"},"required":false},{"name":"opacity","target":{"name":"percentage","default":100}},{"name":"shadow","target":{"name":"box-shadow"}}]},{"name":"bold","nature":"concrete","attributes":[{"name":"value","target":{"name":"number","constraint":{"values":[100,200,300,400,500,600,700,800,900]}}}]},{"name":"font","nature":"concrete","attributes":[{"name":"name","target":{"name":"string","constraint":{"values":["Arial, sans-serif","Baskerville, \'Baskerville Old Face\', serif","\'Bradley Hand\', cursive","\'Brush Script MT\', \'Brush Script Std\', cursive","Calibri, sans-serif","Cambria, serif","\'Century Gothic\', CenturyGothic, AppleGothic, sans-serif","\'Comic Sans MS\', \'Comic Sans\', cursive","Consolas, monospace","\'Courier New\', Courier, monospace","Monaco, monospace","Didot, \'Didot LT STD\', serif","Garamond, serif","\'Hoefler Text\', serif","\'Gill Sans\', \'Gill Sans MT\', sans-serif","Georgia, serif","\'Helvetica Neue\', Helvetica, sans-serif","Impact, Haettenschweiler, fantasy","\'Lucida Grande\', sans-serif","\'Lucida Sans\', \'Lucida Sans Regular\', sans-serif","Luminari, fantasy","Rockwell, serif","\'Segoe UI\', \'Droid Sans\', Ubuntu, sans-serif","Tahoma, sans-serif","\'Times New Roman\', Times, serif","\'Trebuchet MS\', sans-serif","Geneva, sans-serif","Verdana, sans-serif","sans-serif","serif","monospace","cursive","fantasy"]}}}]},{"name":"size","nature":"concrete","attributes":[{"name":"value","target":{"name":"number"}},{"name":"unit","target":{"name":"size-unit","default":"px"}}]},{"name":"background","nature":"concrete","attributes":[{"name":"color","target":{"name":"background-color"},"required":true},{"name":"image","target":{"name":"background-image"},"required":false}]},{"name":"background-color","nature":"concrete","attributes":[{"name":"value","target":{"name":"hex-color"}}]},{"name":"background-image","nature":"concrete","attributes":[{"name":"url","target":{"name":"string"}},{"name":"position","target":{"name":"background-position"}},{"name":"size","target":{"name":"background-size"}},{"name":"repeat","target":{"name":"string","constraint":{"values":["horizontal","vertical","both"]}},"required":false},{"name":"attachment","target":{"name":"string","constraint":{"values":["scroll","fixed","local"]},"default":"scroll"},"required":false}]},{"name":"background-position","nature":"concrete","attributes":[{"name":"x","target":{"name":"string","constraint":{"values":["left","center","right"]}}},{"name":"y","target":{"name":"string","constraint":{"values":["top","center","bottom"]}}}]},{"name":"background-size","nature":"concrete","attributes":[{"name":"value","target":{"name":"string","constraint":{"values":["auto","cover","contain"]},"default":"auto"}}]},{"name":"box-shadow","nature":"concrete","attributes":[{"name":"offsetX","target":{"name":"size"}},{"name":"offsetY","target":{"name":"size"}},{"name":"blur","target":{"name":"size"}},{"name":"spread","target":{"name":"size"}},{"name":"inset","target":{"name":"boolean","default":false}},{"name":"color","target":{"name":"hex-color"}}]},{"name":"color","nature":"prototype","attributes":[{"name":"opacity","target":{"name":"percentage"}}]},{"name":"hex-color","nature":"concrete","prototype":"color","attributes":[{"name":"value","target":{"name":"string"}}],"properties":[{"name":"contentType","type":"string","value":"hex"}]},{"name":"rgb-color","nature":"concrete","prototype":"color","attributes":[{"name":"red","target":{"name":"rgb"}},{"name":"green","target":{"name":"rgb"}},{"name":"blue","target":{"name":"rgb"}}],"properties":[{"name":"contentType","type":"string","value":"rgb"}]},{"name":"spacing","nature":"concrete","attributes":[{"name":"all","target":{"name":"size"}},{"name":"top","target":{"name":"size"}},{"name":"right","target":{"name":"size"}},{"name":"bottom","target":{"name":"size"}},{"name":"left","target":{"name":"size"}}]},{"name":"border","nature":"concrete","attributes":[{"name":"all","target":{"name":"border-value"}},{"name":"top","target":{"name":"border-value"}},{"name":"right","target":{"name":"border-value"}},{"name":"bottom","target":{"name":"border-value"}},{"name":"left","target":{"name":"border-value"}}]},{"name":"border-value","nature":"concrete","attributes":[{"name":"width","target":{"name":"size"}},{"name":"color","target":{"name":"hex-color"}},{"name":"type","target":{"name":"border-type","default":"solid"}}]},{"name":"border-radius","nature":"concrete","attributes":[{"name":"all","target":{"name":"size"}},{"name":"top-left","target":{"name":"size"}},{"name":"top-right","target":{"name":"size"}},{"name":"bottom-right","target":{"name":"size"}},{"name":"bottom-left","target":{"name":"size"}}]},{"name":"rgb","nature":"derivative","base":"number","constraint":{"value":{"type":"range","range":{"min":{"value":0},"max":{"value":255}}}}},{"name":"percentage","nature":"derivative","base":"number","constraint":{"value":{"type":"range","range":{"min":{"value":0},"max":{"value":100}}}}},{"name":"size-unit","nature":"derivative","base":"string","constraint":{"values":["px","em","rem","%","vw","vh"]}},{"name":"border-type","nature":"derivative","base":"string","constraint":{"values":["solid","dotted","dashed","double","inset","outset"]}},{"name":"direction","nature":"derivative","base":"string","constraint":{"values":["top","right","bottom","left"]}},{"name":"alignment","nature":"derivative","base":"string","constraint":{"values":["left","right","center","justify"]}},{"name":"text-transform","nature":"derivative","base":"string","constraint":{"values":["capitalize","lowercase","uppercase"]}}]}')},843:t=>{"use strict";t.exports=JSON.parse('{"projection":[{"concept":{"name":"style"},"type":"layout","tags":[],"content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Text style","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"text"},{"type":"static","static":{"type":"text","content":"Box style","style":{"css":["mp-style__title"]}}},{"type":"attribute","name":"box"},{"type":"attribute","name":"css","tag":"css-set","style":{"ref":["pad-all"]}}],"style":{"css":["mp-style"]}}},{"concept":{"name":"text-style"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"bold","tag":"toggle-field--bold","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"italic","tag":"toggle-field--italic","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"underline","tag":"toggle-field--underline","style":{"css":["text-style-rule"]}},{"type":"attribute","name":"strikethrough","tag":"toggle-field--strikethrough","style":{"css":["text-style-rule"]}}]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"color","style":{"css":["text-style-rule"]}}],"style":{"css":["text-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Font","style":{"css":["label"]}}},{"type":"attribute","name":"font"},{"type":"attribute","name":"size"}],"style":{"css":["text-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Line spacing","style":{"css":["label"]}}},{"type":"attribute","name":"line-height"}],"style":{"css":["text-style-rule"]}}}],"style":{"css":["text-style"]}}},{"concept":{"name":"arrow-style"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Stroke","style":{"css":["mp-style__title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"stroke"},{"type":"attribute","name":"stroke-width","tag":"textual--labelled"},{"type":"attribute","name":"stroke-dasharray","tag":"label-string"},{"type":"attribute","name":"stroke-linecap","tag":"label-string"}]}},{"type":"static","static":{"type":"text","content":"Marker","style":{"css":["mp-style__title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"marker-start","tag":"switch-field"},{"type":"attribute","name":"marker-end","tag":"switch-field"}]}}],"style":{"css":["box-style"]}}},{"concept":{"name":"box-style"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"column","disposition":[{"type":"attribute","name":"outer","tag":"margin","style":{"css":["box-style-rule"]}},{"type":"attribute","name":"inner","tag":"padding","style":{"css":["box-style-rule"]}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Width","style":{"css":["label"]}}},{"type":"attribute","name":"width"}],"style":{"css":["box-style-rule"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"Height","style":{"css":["label"]}}},{"type":"attribute","name":"height"}],"style":{"css":["box-style-rule"]}}},{"type":"attribute","name":"background","required":true,"style":{"css":["box-style-rule"]}},{"type":"attribute","name":"border","required":true,"style":{"css":["box-style-rule"]}},{"type":"attribute","name":"corner","required":true,"style":{"css":["box-style-rule"]}},{"type":"attribute","name":"shadow","required":true,"style":{"css":["box-style-rule"]}}],"style":{"css":["box-style"]}}},{"type":"template","name":"spacing-content","content":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Bottom","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"left"}]}}]}}]},{"concept":{"name":"spacing"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","help":"Outer spacing","content":"Margin","style":{"css":["title"]}}},{"type":"template","name":"spacing-content"}]}},{"concept":{"name":"spacing"},"tags":["padding"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","help":"Inner spacing","content":"Padding","style":{"css":["title"]}}},{"type":"template","name":"spacing-content"}]}},{"concept":{"name":"border"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Border","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"All","style":{"css":["title"]}}},{"type":"attribute","name":"all"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top","style":{"css":["title"]}}},{"type":"attribute","name":"top"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Right","style":{"css":["title"]}}},{"type":"attribute","name":"right"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Bottom","style":{"css":["title"]}}},{"type":"attribute","name":"bottom"}]}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Left","style":{"css":["title"]}}},{"type":"attribute","name":"left"}]}}]}},{"concept":{"name":"border-value"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"type","tag":"label-string"},{"type":"attribute","name":"width"},{"type":"attribute","name":"color"}],"style":{"css":["border-value-config"]}}},{"concept":{"name":"background"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Background","style":{"css":["title--small"]}}},{"type":"attribute","name":"color","style":{"css":["background-config"]}}]}},{"concept":{"name":"background-color"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"value"}]}},{"concept":{"name":"background-image"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"attribute","name":"url","tag":"simple-string--url"}]}},{"concept":{"name":"border-radius"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Corner (border-radius)","style":{"css":["title"]}}},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top-left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top-left"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Top-right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"top-right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Btm-right","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom-right"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Btm-left","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"bottom-left"}]}}]}}]}},{"concept":{"name":"box-shadow"},"tags":["margin"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Box Shadow","style":{"css":["title"]}}},{"type":"attribute","name":"inset","tag":"switch-field"},{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Horizontal offset","content":"offset-X","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"offsetX"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Vertical offset","content":"offset-Y","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"offsetY"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","help":"Blur radius","content":"Blur","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"blur"}],"style":{"ref":["box-right"]}}},{"type":"layout","layout":{"type":"flex","orientation":"column","disposition":[{"type":"static","static":{"type":"text","content":"Spread","style":{"css":["label","label--small"]}}},{"type":"attribute","name":"spread"}]}}]}},{"type":"attribute","name":"color"}]}},{"concept":{"name":"font"},"tags":[],"type":"layout","content":{"type":"flex","orientation":"row","disposition":[{"type":"attribute","name":"name","tag":"choice"}]}},{"concept":{"name":"color"},"tags":[],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Color","style":{"css":["title--small"]}}},{"type":"field","field":{"type":"choice","input":false,"choice":{"style":{"css":["constraint-choice--textual__choice-list"]},"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option"]}}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"color"},"tags":["no-title"],"type":"layout","projection":{"type":"stack","orientation":"vertical","disposition":[{"type":"field","field":{"type":"choice","input":false,"choice":{"style":{"css":["constraint-choice--textual__choice-list"]},"option":{"template":{"tag":"choice"},"style":{"css":["constraint-choice--textual__choice-option"]}}},"style":{"css":["constraint-choice--textual__choice"]}}},{"type":"projection","bind":"value","placeholder":false,"tag":"choice-selection","style":{"css":["number-constraint"]}}]}},{"concept":{"name":"hex-color"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"value","tag":"color-string"}]}},{"concept":{"name":"hex-color"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"Picker"}}]}},{"concept":{"name":"rgb-color"},"tags":["choice-selection"],"type":"layout","content":{"type":"stack","orientation":"vertical","style":{"css":["text-element"]},"disposition":[{"type":"attribute","name":"red","tag":"textual--labelled"},{"type":"attribute","name":"green","tag":"textual--labelled"},{"type":"attribute","name":"blue","tag":"textual--labelled"}]}},{"concept":{"name":"rgb-color"},"tags":["choice"],"type":"layout","content":{"type":"wrap","focusable":false,"disposition":[{"type":"static","static":{"type":"text","content":"RGB"}}]}},{"concept":{"name":"size"},"tags":[],"type":"layout","content":{"type":"stack","orientation":"horizontal","disposition":[{"type":"attribute","name":"value","tag":"textual"},{"type":"attribute","name":"unit","tag":"simple-string"}],"style":{"css":["size-config"]}}},{"concept":{"name":"set"},"tags":["css-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"layout","layout":{"type":"flex","orientation":"row","disposition":[{"type":"static","static":{"type":"text","content":"CSS class","style":{"css":["title","mp-tags-header__title"]}}},{"type":"field","field":{"type":"list","list":false,"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"+","focusable":false}}],"help":"Add a class","style":{"css":["mp-tags-header__action-add"]}}},"style":{"css":["mp-tags-header__action"]}}}],"style":{"css":["mp-tags-header"]}}},{"type":"field","field":{"type":"list","list":{"item":{"template":{"tag":"simple-string--css"},"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":false},"style":{"css":["mp-tags__list"]}}}],"style":{"css":["mp-tags"]}}},{"concept":{"name":"set"},"tags":["style-set"],"type":"layout","content":{"type":"stack","orientation":"vertical","disposition":[{"type":"static","static":{"type":"text","content":"Style rule","help":"Reuse the defined style rules","style":{"css":["config-title","font-ui"]}}},{"type":"field","field":{"type":"list","list":{"item":{"style":{"css":["textual-list__list-item--inline"]}},"style":{"css":["textual-list__list","textual-list__list--inline","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"Add rule","focusable":false}}],"help":"Add a rule","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove rule","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--style"],"ref":["pad-left"]}}}]}},{"concept":{"name":"set"},"tags":["cell-set"],"type":"field","content":{"type":"list","list":{"item":{"template":{"tag":"list-item"},"style":{"css":["textual-list__list-item","textual-list__list-item--box"]}},"style":{"css":["textual-list__list","textual-list__list--horizontal"]}},"action":{"add":{"content":[{"type":"static","static":{"type":"text","content":"New cell","focusable":false}}],"help":"Add a cell","style":{"css":["textual-list__btn-add"]}},"remove":{"content":[{"type":"static","static":{"type":"text","content":"","focusable":false}}],"help":"Remove cell","style":{"css":["textual-list__btn-remove"]}}},"style":{"css":["textual-list","textual-list--cell"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--bold"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"B","style":{"gss":{"text":{"bold":true}}}},{"type":"raw","raw":"Bold","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--italic"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"I","style":{"gss":{"text":{"italic":true}}}},{"type":"raw","raw":"Italic","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--underline"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"U","style":{"gss":{"text":{"underline":true}}}},{"type":"raw","raw":"Underline","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"boolean"},"tags":["toggle-field--strikethrough"],"type":"field","content":{"type":"binary","checkbox":{"label":{"content":[{"type":"raw","raw":"S","style":{"gss":{"text":{"strikethrough":true}}}},{"type":"raw","raw":"Strikethrough","style":{"css":["mp-toggle-field__label-help"]}}],"style":{"css":["mp-toggle-field__label"]}},"style":{"css":["mp-toggle-field__checkbox"]}},"style":{"css":["mp-toggle-field"]}}},{"concept":{"name":"number"},"tags":["textual"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"number"},"tags":["textual--labelled"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["name-field--textual__label","label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"name"},"tags":["textual","list-item"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"name","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["simple-string"],"type":"field","content":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["readonly"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"value"}}}]}},{"concept":{"name":"string"},"tags":["simple-string--url"],"type":"field","content":{"type":"text","resizable":false,"input":{"placeholder":"url","type":"url","style":{"css":["textfield--labeled__input"]}},"style":{"css":["textfield--labeled"]}}},{"concept":{"name":"string"},"tags":["label-string","textual--labelled"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":{"type":"property","name":"refname"},"style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","resizable":true,"input":{"placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["color-string"],"type":"layout","content":{"type":"wrap","disposition":[{"type":"static","static":{"type":"text","content":"Color","style":{"css":["label","name-field--textual__label"]}}},{"type":"field","field":{"type":"text","input":{"type":"color","placeholder":"null","style":{"css":["name-field--textual__input"]}},"style":{"css":["name-field","name-field--textual"]}}}],"style":{"css":["name-field","name-field--textual"]}}},{"concept":{"name":"string"},"tags":["choice"],"type":"field","content":{"type":"choice","choice":{"option":{"template":{"tag":"reference"},"style":{"css":["tag-reference__choice-option"]}},"style":{"css":["tag-reference__choice"]}},"placeholder":"inherit","expanded":false,"input":{"placeholder":"Search...","style":{"css":["tag-reference__input"]}},"style":{"css":["tag-reference"]}}}]}')},835:(t,e,a)=>{"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function c(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a?f(t)?e:t:b(t)?e:t}function l(t){return u(t)&&0===t.length}function r(t){return"string"==typeof t||t instanceof String}function p(t){return"function"==typeof t}function y(t){return!b(t)&&"object"===n(t)}function u(t){return!b(t)&&"function"==typeof t[Symbol.iterator]}function m(t){return u(t)&&!r(t)}function d(t){return null===t}function g(t){return!t||r(t)&&(0===t.length||/^\s*$/.test(t))}function f(t){return void 0===t}function b(t){return d(t)||f(t)}a.d(e,{fm:()=>v,cH:()=>M,ax:()=>U,UF:()=>B,oL:()=>F,HV:()=>N,kQ:()=>V,w_:()=>P,wr:()=>K,sb:()=>X,RI:()=>x,xb:()=>l,mf:()=>p,Re:()=>j,le:()=>b,hr:()=>g,Kn:()=>y,XI:()=>c});var h=Object.prototype.hasOwnProperty,x=(Object.prototype.isPrototypeOf,function(t,e){return h.call(t,e)});function v(t){return g(t)?t:t.charAt(0).toUpperCase()+t.slice(1)}var _=function(t){return!b(t)&&t.nodeType===Node.ELEMENT_NODE},w=function(t){return t instanceof Node},k=function(t){return _(t)&&t instanceof Element},j=function(t,e){return!!(_(t)&&t instanceof HTMLElement)&&(!u(e)||(a=t,n=Array.isArray(e)?e:[e],i=function(t){return a instanceof t},o=function(t){return a.tagName===t.toUpperCase()},c=function(t){return Array.isArray(t)?t.includes(a.type):a.type===t},n.some((function(t){if(!u(t))return!1;var e,a,n=t,r=null;if(Array.isArray(t)){var p=(a=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==c.return||c.return()}finally{if(i)throw s}}return a}}(e,a)||s(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());n=p[0],r=p[1]}n=n.toLowerCase();var y,d="HTML".concat(x(T,n)?T[n]:g(y=n)?y:function(t){return g(t)?t:t.toLowerCase().replace(/\b\w/g,(function(t){return t.toUpperCase()}))}(y.replace(/[_-]+/g," ").replace(/\s+/g," ").trim()).replace(/\s+/g,""),"Element");return!(!i(window[d])&&!o(n))&&(!(m(r)&&!l(r))||c(r))}))));var a,n,i,o,c},T={a:"Anchor",br:"BR",dl:"DList",datalist:"DataList",fieldset:"FieldSet",frameset:"FrameSet",hr:"HR",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",li:"LI",ol:"OList",optgroup:"OptGroup",p:"Paragraph",q:"Quote",blockquote:"Quote",caption:"TableCaption",td:"TableCell",th:"TableCell",col:"TableCol",tr:"TableRow",tbody:"TableSection",thead:"TableSection",tfoot:"TableSection",textarea:"TextArea",ul:"UList"},S=function(t){return function(t){return!b(t)&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(t)&&t instanceof DocumentFragment};function E(t,e){if(!r(e))return null;var a=document.createElement("template");return a.innerHTML=e.trim(),a.content[t]}function z(t,e,a){t[e]=a}function C(t,e,a){t.setAttribute(e,a)}E.bind(null,"firstChild"),E.bind(null,"childNodes");var A="accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,html,style,tabindex,text,title",q={accesskey:[z,"accessKey"],autocapitalize:[z,"autocapitalize"],class:[function(t,e){var a;if(!j(t))throw new Error("Bad argument: The passed `element` argument is not a valid HTML Element");return(a=t.classList).add.apply(a,i(Array.isArray(e)?e:[e])),t}],dataset:[function(t,e,a){Object.assign(t[e],a)},"dataset"],draggable:[z,"draggable"],editable:[z,"contentEditable"],hidden:[z,"hidden"],id:[z,"id"],inputmode:[z,"inputMode"],lang:[z,"lang"],html:[z,"innerHTML"],style:[z,"style"],tabindex:[z,"tabIndex"],text:[z,"textContent"],title:[z,"title"],data:[z,"data"],cite:[z,"cite"],download:[z,"download"],ping:[z,"ping"],target:[z,"target"],coords:[z,"coords"],shape:[z,"shape"],autoplay:[z,"autoplay"],buffered:[z,"buffered"],controls:[z,"controls"],loop:[z,"loop"],muted:[z,"muted"],playsinline:[C,"playsinline"],poster:[z,"poster"],preload:[z,"preload"],crossorigin:[z,"crossOrigin"],decoding:[z,"decoding"],height:[z,"height"],ismap:[z,"isMap"],loading:[z,"loading"],srcset:[z,"srcset"],width:[z,"width"],alt:[z,"alt"],as:[z,"as"],media:[z,"media"],rel:[z,"rel"],src:[z,"src"],sizes:[z,"sizes"],reversed:[z,"reversed"],start:[z,"start"],accept:[z,"accept"],"accept-charset":[z,"acceptCharset"],action:[z,"action"],autocomplete:[z,"autocomplete"],autofocus:[z,"autofocus"],capture:[z,"capture"],checked:[z,"checked"],cols:[z,"cols"],disabled:[z,"disabled"],dirname:[z,"dirName"],enctype:[z,"enctype"],for:[z,"for"],form:[z,"form"],formaction:[z,"formAction"],formenctype:[z,"formEnctype"],formmethod:[z,"formMethod"],formnovalidate:[z,"formNoValidate"],formtarget:[z,"formTarget"],high:[z,"high"],label:[z,"label"],list:[z,"list"],low:[z,"low"],max:[z,"max"],maxlength:[z,"maxLength"],method:[z,"method"],min:[z,"min"],minlength:[z,"minLength"],multiple:[z,"multiple"],name:[z,"name"],novalidate:[z,"noValidate"],optimum:[z,"optimum"],pattern:[z,"pattern"],placeholder:[z,"placeholder"],readonly:[z,"readOnly"],required:[z,"required"],rows:[z,"rows"],selected:[z,"selected"],size:[z,"size"],spellcheck:[C,"spellcheck"],step:[z,"step"],wrap:[z,"wrap"],default:[z,"default"],kind:[z,"kind"],srclang:[z,"srclang"],abbr:[z,"abbr"],colspan:[z,"colSpan"],span:[z,"span"],rowspan:[z,"rowSpan"],scope:[z,"scope"],href:[z,"href"],hreflang:[z,"hreflang"],datetime:[z,"dateTime"],type:[z,"type"],value:[z,"value"],usemap:[z,"useMap"]};function L(t,e,a){var n=document.createElement(t);return j(n)?(y(a)&&function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!j(t))throw new Error("Bad argument: The given element argument is not a valid HTML Element");if(!y(e))return t;for(var n=function(t){return A.includes(t)||a.includes(t)},s=0,o=Object.keys(e);s<o.length;s++){var c=o[s];if(n(c)){var l=e[c],r=q[c].slice(0);r.shift().apply(void 0,[t].concat(i(r),[l]))}}}(n,a,c(e,"")),n):null}function I(t,e,a,n){var i=L(t,e,a);return j(i)?(b(n)||J(i,n),i):null}function R(t,e,a,n,i){var s=L(t,e,n);return j(s)?(b(i)||J(s,i,a),s):null}L.bind(null,"link","as,crossorigin,disabled,href,hreflang,media,rel,sizes,type"),I.bind(null,"template",""),I.bind(null,"header",""),I.bind(null,"footer",""),I.bind(null,"main",""),I.bind(null,"article",""),I.bind(null,"section",""),I.bind(null,"nav",""),I.bind(null,"aside",""),I.bind(null,"h1",""),I.bind(null,"h2",""),I.bind(null,"h3",""),I.bind(null,"h4",""),I.bind(null,"h5",""),I.bind(null,"h6",""),I.bind(null,"div",""),I.bind(null,"object","data,height,name,type,usemap,width"),L.bind(null,"embed","height,src,type,width"),L.bind(null,"br",""),L.bind(null,"hr",""),I.bind(null,"p",""),I.bind(null,"blockquote","cite");var O=function(t){return j(t,"li")?t:N(null,t)},P=R.bind(null,"ul","",O),N=(R.bind(null,"ol","reversed,start,type",O),I.bind(null,"li","value")),M=(I.bind(null,"dl",""),I.bind(null,"dt",""),I.bind(null,"dd",""),I.bind(null,"a","download,href,hreflang,ping,rel,target,type")),V=(L.bind(null,"area","alt,coords,download,href,hreflang,media,ping,rel,shape,target"),L.bind(null,"base","href,target"),L.bind(null,"img","alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width"),I.bind(null,"audio","autoplay,controls,crossorigin,loop,muted,preload,src"),I.bind(null,"video","autoplay,controls,crossorigin,height,loop,muted,playsinline,poster,preload,src,width"),L.bind(null,"source","media,sizes,src,srcset,type"),L.bind(null,"track","default,kind,label,src,srclang"),I.bind(null,"picture",""),I.bind(null,"figure",""),I.bind(null,"figcaption",""),I.bind(null,"span","")),B=(I.bind(null,"strong",""),I.bind(null,"em","")),F=(I.bind(null,"mark",""),I.bind(null,"samp",""),I.bind(null,"sub",""),I.bind(null,"sup",""),I.bind(null,"del","cite,datetime"),I.bind(null,"ins","cite,datetime"),I.bind(null,"q","cite"),I.bind(null,"abbr",""),I.bind(null,"b",""),I.bind(null,"i","")),D=(I.bind(null,"s",""),I.bind(null,"u",""),I.bind(null,"cite",""),I.bind(null,"time","datetime"),I.bind(null,"code",""),I.bind(null,"form","accept-charset,action,autocomplete,enctype,method,name,novalidate,rel,target"),L.bind(null,"input","accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width"),I.bind(null,"textarea","autocomplete,autofocus,cols,disabled,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,value,wrap"),I.bind(null,"label","for"),R.bind(null,"select","autocomplete,autofocus,disabled,multiple,name,required,size",(function(t){return j(t,["option","optgroup"])?t:Array.isArray(t)?G(null,t):D(null,t)})),I.bind(null,"option","disabled,label,selected,value")),H=function(t){return j(t,"option")?t:D(null,t)},G=R.bind(null,"optgroup","disabled,label",H),U=(I.bind(null,"fieldset","disabled,name"),I.bind(null,"legend",""),R.bind(null,"datalist","",H),I.bind(null,"meter","high,low,max,min,optimum,value"),I.bind(null,"progress","max,value"),I.bind(null,"output","name,value"),I.bind(null,"button","autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,name,type,value")),$=(I.bind(null,"table",""),I.bind(null,"caption",""),function(t){return j(t,"tr")?t:W(null,t)}),W=(R.bind(null,"thead","",$),R.bind(null,"tbody","",$),R.bind(null,"tfoot","",$),L.bind(null,"col","span"),R.bind(null,"colgroup","span",(function(t){return j(t,"col")?t:null})),R.bind(null,"tr","",(function(t){return j(t,["th","td"])?t:Q(null,t)}))),Q=(I.bind(null,"th","abbr,colspan,rowspan,scope"),I.bind(null,"td","colspan,rowspan"));function J(t,e,a){var n=Array.isArray(e)?e:[e];return p(a)&&(n=n.map((function(t){return a(t)}))),function(t,e){if(!w(t))throw new TypeError("Bad argument: The given `parent` is not a valid Node");if(!(e instanceof HTMLCollection||m(e)))throw new TypeError("Bad argument: The given `children` is not a valid HTMLCollection/HTMLElement array");var a=S(t)?t:document.createDocumentFragment();Array.from(e).forEach((function(t){var e;b(t)||a.appendChild(w(t)?t:(e=t.toString(),document.createTextNode(e.toString())))})),t!==a&&t.appendChild(a)}(t,n),t}function X(t,e){var a=c(e,document);return g(t)?null:S(a)?a.querySelector(t):function(t){return/^#[a-zA-Z0-9_-]+$/.test(t)}(t)?document.getElementById(t.substring(1)):function(t){return/^\.[a-zA-Z0-9_-]+$/.test(t)}(t)?a.getElementsByClassName(t.substring(1))[0]:a.querySelector(t)}function Y(t,e,a){if(!j(e))return null;var n=e[t];if(p(a))for(;k(n)&&!a(n);)n=n[t];return n}function K(t,e,a){if(!k(t))throw new TypeError("Bad argument: The given target parameter is not a valid HTML Element");if(!p(e))throw new TypeError("Bad argument: The given pred parameter is not a valid Function");var n=t.parentElement;return a>0?tt(n,e,a-1):Z(n,e)}function Z(t,e){return b(t)?null:e(t)?t:Z(t.parentElement,e)}function tt(t,e,a){return b(t)||0===a?null:e(t)?t:tt(t.parentElement,e,a-1)}Y.bind(null,"previousElementSibling"),Y.bind(null,"nextElementSibling");var et=function(t){return t.dataset.state},at=function(t,e){return t.dataset.state=e},nt=function(t,e){return at(t,c(e,"checked"))},it=function(t,e){return at(t,c(e,"unchecked"))},st={name:"form-selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(t){return this.items.includes(t)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=t,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var t=this.container.dataset.value,e=null,a=0;a<this.items.length;a++){var n=this.items[a];n.isChecked()&&this.setSelectedItem(n),n.value===t&&(e=n)}return d(this.selectedItem)&&!d(e)&&this.setSelectedItem(e),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("change",(function(e){var a=e.target,n=!1;if(p(t.beforeChange)&&(n=!1===t.beforeChange(t,e)),n)return a.checked=!1,void t.items[t.selectedIndex].setChecked(!0);var i=t.items.find((function(t){return t.index===+c(a.dataset.selectorIndex,-1)}));b(i)||(t.setSelectedItem(i),p(t.afterChange)&&t.afterChange(t,e))}))}},ot=function(t){return'[data-type="'.concat(t.name,'"]')},ct={BaseSelector:ot({name:"selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(t){return this.items.includes(t)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=t,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var t=this.container.dataset.value,e=null,a=0;a<this.items.length;a++){var n=this.items[a];n.isChecked()&&this.setSelectedItem(n),n.value===t&&(e=n)}return d(this.selectedItem)&&!d(e)&&this.setSelectedItem(e),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("click",(function(e){var a=e.target;if(x(a.dataset,"selector")){var n=!1;if(p(t.beforeChange)&&(n=!1===t.beforeChange(t,e)),!n){var i=t.items.find((function(t){return t.index===+c(a.dataset.selectorIndex,-1)}));b(i)||(t.setSelectedItem(i),p(t.afterChange)&&t.afterChange(t,e))}}}))}}),FormSelector:ot(st)};new Error("Missing container: A selector requires a container"),new Error("Missing input: FormSelector requires an input in the container"),[ct.BaseSelector,ct.FormSelector].join(","),new Error("Missing container: A switch requires a container"),new Error("Missing input: FormSwitch requires an input in the container");var lt="on",rt=function(t){return'[data-type="'.concat(t.name,'"]')},pt={name:"form-switch",container:null,input:null,beforeChange:null,afterChange:null,get value(){return this.input.value},isChecked:function(){return et(this.container)===lt},setChecked:function(t){return!b(t)&&(this.input.checked=t,t?nt(this.container,lt):it(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(t){return Object.assign(this,t),this.input.checked&&this.setChecked(!0),this.bindEvents(),this},bindEvents:function(){var t=this;this.input.addEventListener("change",(function(e){var a=!1;p(t.beforeChange)&&(a=!1===t.beforeChange(t,e)),a?t.input.checked=!t.input.checked:(t.toggle(),p(t.afterChange)&&t.afterChange(t,e))}))}};[rt({name:"switch",container:null,beforeChange:null,afterChange:null,get value(){return this.container.dataset.value},isChecked:function(){return et(this.container)===lt},setChecked:function(t){return!b(t)&&(t?nt(this.container,lt):it(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(t){return Object.assign(this,t),this.isChecked()&&nt(this.container,lt),this.bindEvents(),this},bindEvents:function(){var t=this;this.container.addEventListener("click",(function(e){var a=!1;p(t.beforeChange)&&(a=!1===t.beforeChange(t,e)),a||(t.toggle(),p(t.afterChange)&&t.afterChange(t,e))}))}}),rt(pt)].join(","),new Error("Missing container: A collapsible requires a container"),new Error("Missing container: An accordion requires a container"),encodeURIComponent},783:(t,e,a)=>{"use strict";a.d(e,{O:()=>i});var n=a(835);function i(){window.URL=window.webkitURL||window.URL;var t=(0,n.cH)({href:"",target:"_blank",rel:"noopener noreferrer"},"");(0,n.hr)(t.href)||window.URL.revokeObjectURL(t.href),t.click(),setTimeout((()=>{window.URL.revokeObjectURL(t.href),t.remove()}),1500)}},558:(t,e,a)=>{"use strict";a(835)},766:(t,e,a)=>{"use strict";a.d(e,{Cp:()=>i});var n=a(835);function i(t){return(0,n.Re)(t)?(t.classList.add("hidden"),t):t}},489:(t,e,a)=>{"use strict";a.d(e,{k$:()=>n,hi:()=>i});const n={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"},i={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"}},624:(t,e,a)=>{"use strict";a.d(e,{Cp:()=>n.Cp,hi:()=>i.hi,k$:()=>i.k$,Oj:()=>s.O});var n=a(766),i=a(489),s=(a(558),a(436),a(914),a(783))},436:(t,e,a)=>{"use strict";a(835)},914:(t,e,a)=>{"use strict";!function(){var t=[];for(let e=0;e<256;e++)t[e]=e<16?"0"+e.toString(16):e.toString(16)}()}},e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,a),i.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const{App:t}=a(22),{Preview:e}=a(675),n=localStorage.getItem("gentleman.preview");n?(e.init(n),localStorage.removeItem("gentleman.preview")):t.init()})()})();
=======
(()=>{var e={129:(e,t,i)=>{"use strict";i.r(t),i.d(t,{App:()=>Le});var s=i(835),n=i(943),r=i(513);const a=(e,t)=>e.getAttributeByName(t).target,l=(e,t)=>a(e,t).getReference(),o=(e,t,i=!1)=>a(e,t).getValue(i),c=(e,t)=>a(e,t).hasValue(),h=(e,t)=>e.isAttributeCreated(t),u=e=>(0,s.XI)(o(e,"name"),"").toLowerCase();function d(e,t){const{id:i,name:n}=t;let r=(0,s.UF)({class:["link","error-message__link"],title:n},e);const a=`.projection[data-concept="${i}"]`;return r.addEventListener("mouseenter",(e=>{let t=(0,s.sb)(a,this.body);t&&this.highlight(t)})),r.addEventListener("mouseleave",(e=>{this.unhighlight()})),r.addEventListener("click",(e=>{let t=this.resolveElement((0,s.sb)(a,this.body));t&&t.focus()})),r}const p="attributes",m="base",f="name",g="required",b="properties",v="prototype";function y(e={}){const t=[],{conceptModel:i}=this;this.logs.clear();const r=Object.assign({name:"metamodel",download:!0},e),a=i.getConcepts(["prototype-concept","concrete-concept","derivative-concept"]);return(0,s.xb)(a)?(this.notify("<strong>Empty model</strong>: Please create at least one concept.",n.k$.WARNING),!1):(this.__errors=[],a.forEach((e=>{const{message:i}=w.call(this,e);t.find((e=>e.name===i.name))?this.__errors.push(`The model has two concepts with the same name: ${i.name}`):t.push(i)})),(0,s.xb)(this.__errors)?(this.notify("The concept model was <strong>successfully</strong> built",n.k$.SUCCESS,2e3),r.download&&this.download({concept:t},r.name),delete this.__errors,t):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",n.k$.ERROR),this.logs.add(this.__errors,"Validation error",n.hi.ERROR),delete this.__errors,!1))}function w(e){const t=u(e),i=e.getProperty("nature"),n=o(e,"root"),r=[],h=[];if((0,s.hr)(t)){let t=d.call(this,"name",a(e,f)),n=(0,s.kQ)({class:["error-message"]},[`${(0,s.fm)(i)} concept: `,t," is missing a value"]);this.__errors.push(n)}e.isAttributeCreated(p)&&o(e,p).forEach((e=>{const{message:t}=E.call(this,e);r.find((e=>e.name===t.name))?this.__errors.push(`The concept has two attributes with the same name: ${t.name}`):r.push(t)})),e.isAttributeCreated(b)&&o(e,b).forEach((e=>{const{message:t}=L.call(this,e);h.find((e=>e.name===t.name))?this.__errors.push(`The concept has two properties with the same name: ${t.name}`):h.push(t)}));let g={id:e.id,name:t,nature:i,root:n,attributes:r,properties:h};return e.isAttributeCreated(v)&&c(e,v)&&(g.prototype=u(l(e,v))),e.isAttributeCreated(m)&&c(e,m)&&Object.assign(g,C.call(this,o(e,m,!0),"base")),{message:g}}function E(e){const t=u(e),i=!h(e,g)||!c(e,g)||o(e,g);if((0,s.hr)(t)){let t=d.call(this,"name",a(e,f)),i=(0,s.kQ)({class:["error-message"]},["Attribute: ",t," is missing a value"]);this.__errors.push(i)}if(!c(e,"target")){let t=d.call(this,"target",a(e,"target")),i=(0,s.kQ)({class:["error-message"]},["Attribute: ",t," is missing a value"]);this.__errors.push(i)}return{message:{name:t,target:C.call(this,o(e,"target",!0)),required:i}}}function C(e,t="name"){if((0,s.le)(e))return null;let i=e.getProperty("cname");if("concept"===i)if(c(e,"concept")){let t=l(e,"concept");i=u(t)}else{let t=d.call(this,"concept",a(e,"concept")),i=(0,s.kQ)({class:["error-message"]},[`${(0,s.fm)(e.getName())}: `,t," is missing a value"]);this.__errors.push(i)}const n={[t]:i};if(h(e,"accept")){let t=o(e,"accept",!0);(0,s.Kn)(t)?n.accept=C.call(this,t):n.accept={name:t.toLowerCase()}}if(["default","ordered","rel"].filter((t=>h(e,t)&&c(e,t))).forEach((t=>{n[t]=o(e,t)})),h(e,"constraints")){let t=[];o(e,"constraints").forEach((e=>{const i=j.call(this,e);t.push(i)})),n.constraint=t}return n}function j(e){const t={};if(!c(e,"type"))return t;t.property=o(e,"property");let i=o(e,"type",!0);return"constraint-number-value"===i.name?(t.type="value",t.value=o(i,"value")):"constraint-number-range"===i.name?(t.type="range",t.range={min:o(i,"min"),max:o(i,"max")}):"constraint-string-pattern"===i.name?(t.type="pattern",t.pattern={insensitive:o(i,"insensitive"),global:o(i,"global"),value:o(i,"value")}):"constraint-string-values"===i.name&&(t.type="values",t.values=o(e,"values",!0)),h(e,"scope")&&c(e,"scope")&&(t.scope=u(l(e,"scope"))),h(e,"values")&&c(e,"values")&&(t.values=o(e,"values",!0)),t}function L(e){const t=u(e);if((0,s.hr)(t)){let t=d.call(this,"name",a(e,f)),i=(0,s.kQ)({class:["error-message"]},["Property: ",t," is missing a value"]);this.__errors.push(i)}h(e,"target")&&c(e,"target")||this.__errors.push(`Property ${(0,s.hr)(t)?"N/A":`'${t}'`}: <<target>> is missing a value.`);const i=o(e,"target",!0),n=i.getProperty("type");return(0,s.le)(n)&&this.__errors.push(`The property '${t}' target's type is missing a value.`),{message:{name:u(e),type:n,value:o(i,"value")}}}function x(e){let t={};return h(e,"css")&&c(e,"css")&&(t.css=o(e,"css",!0)),h(e,"ref")&&c(e,"ref")&&(t.ref=o(e,"ref",!0).map((e=>u(this.conceptModel.getConcept(e))))),h(e,"gss")&&(t.gss=R.call(this,a(e,"gss"))),h(e,"text")&&(t.text=I.call(this,a(e,"text"))),h(e,"box")&&(t.box=_.call(this,a(e,"box"))),t}function R(e){let t={};return h(e,"text")&&(t.text=I.call(this,a(e,"text"))),h(e,"box")&&(t.box=_.call(this,a(e,"box"))),t}function I(e){let t={};if(h(e,"bold")&&o(e,"bold")&&(t.bold=!0),h(e,"italic")&&o(e,"italic")&&(t.italic=!0),h(e,"underline")&&o(e,"underline")&&(t.underline=!0),h(e,"strikethrough")&&o(e,"strikethrough")&&(t.strikethrough=!0),h(e,"nonbreakable")&&o(e,"nonbreakable")&&(t.nonbreakable=!0),h(e,"transform")&&c(e,"transform")&&(t.transform=o(e,"transform")),h(e,"color")&&c(e,"color")){let i=T.call(this,a(e,"color"));i&&(t.color=i)}if(h(e,"opacity")&&c(e,"opacity")&&(t.opacity=o(e,"opacity")),h(e,"size")){let i=k.call(this,a(e,"size"));i&&(t.size=i)}return t}function _(e){let t={};if(h(e,"inner")){let i=A.call(this,a(e,"inner"));i&&(t.inner=i)}if(h(e,"outer")){let i=A.call(this,a(e,"outer"));i&&(t.outer=i)}if(h(e,"background")&&(t.background=V.call(this,a(e,"background"))),h(e,"width")){let i=k.call(this,a(e,"width"));i&&(t.width=i)}if(h(e,"height")){let i=k.call(this,a(e,"height"));i&&(t.height=i)}if(h(e,"border")&&(t.border=O.call(this,a(e,"border"))),h(e,"corner")&&(t.corner=S.call(this,a(e,"corner"))),h(e,"shadow")){let i=M.call(this,a(e,"shadow"));i&&(t.shadow=i)}return h(e,"opacity")&&c(e,"opacity")&&(t.opacity=o(e,"opacity")),t}function A(e){let t={},i=!1;return["all","top","right","bottom","left"].forEach((n=>{if(h(e,n)){let r=k.call(this,a(e,n));(0,s.le)(r)||(t[n]=r,i=!0)}})),i?t:null}function O(e){let t={};return["all","top","right","bottom","left"].forEach((i=>{if(h(e,i)){let s=a(e,i),n=k.call(this,a(s,"width"));if(n){let e=a(s,"color");t[i]={width:n,color:T.call(this,e),type:o(s,"type")}}}})),t}function S(e){let t={},i=!1;return["all","top-left","top-right","bottom-right","bottom-left"].forEach((n=>{if(h(e,n)){let r=k.call(this,a(e,n));(0,s.le)(r)||(t[n]=r,i=!0)}})),i?t:null}function V(e){let t={};if(h(e,"color")){let i=a(e,"color"),s=a(i,"value");t.color=T.call(this,s)}if(h(e,"image")){let i=a(e,"image");t.image=o(i,"url")}return t}function T(e){let t={};if((0,s.le)(e))return t;if("hex-color"===e.name){if(!c(e,"value"))return null;t.type="hex";let i=o(e,"value")||"";t.value=i.startsWith("#")?i:`#${i}`}else"rgb-color"===e.name&&(t.type="rgb",t.value={red:o(e,"red"),green:o(e,"green"),blue:o(e,"blue")});return t}function k(e){return(0,s.le)(e)||!c(e,"value")?null:{value:o(e,"value"),unit:o(e,"unit")}}function M(e){if((0,s.le)(e))return null;const t="offsetX",i="offsetY",n="blur",r="spread",l="inset";let c=3,u={};if(h(e,t)){let i=k.call(this,a(e,t));(0,s.le)(i)||(u.offsetX=i,c--)}if(h(e,i)){let t=k.call(this,a(e,i));(0,s.le)(t)||(u.offsetY=t,c--)}if(h(e,n)){let t=k.call(this,a(e,n));(0,s.le)(t)||(u.blur=t,c--)}if(h(e,r)){let t=k.call(this,a(e,r));(0,s.le)(t)||(u.spread=t,c--)}if(c>0)return null;if(h(e,l)&&o(e,l)&&(u.inset=!0),h(e,"color")){let t=a(e,"color");u.color=T.call(this,t)}return u}const $="content",H="concept",P="name",N="style",D="required",B="prototype",X="tag",Z="tags",W="value",z="focusable",F="hidden",q={projection:function(e){const t=h(e,Z)?o(e,Z,!0):[];let i=a(e,H);if(e.hasParent()){let t=e.getParent("collection");i=a(t,H)}const n=Q.call(this,i);if((0,s.xb)(Object.keys(n))){let t=d.call(this,"concept",a(e,H)),i=(0,s.kQ)({class:["error-message"]},["Projection error: ",t," is missing a value"]);this.__errors.push(i)}const r=a(e,"container");let l={concept:n,tags:t,container:J.call(this,r)};return h(e,P)&&c(e,P)&&(l.name=u(e)),{success:!0,message:l}},template:function(e){const t=u(e);if((0,s.hr)(t)){let t=d.call(this,"name",a(e,P)),i=(0,s.kQ)({class:["error-message"]},["Template error: ",t," is missing a value"]);this.__errors.push(i)}if(!c(e,$)){let t=d.call(this,"content",a(e,$)),i=(0,s.kQ)({class:["error-message"]},["Template error: ",t," is missing a value"]);this.__errors.push(i)}const i=[];return o(e,$).filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue(!0);i.push(K.call(this,t))})),{success:!0,message:{id:e.id,type:"template",name:t,content:i}}},style:function(e){const t=u(e);if((0,s.hr)(t)){let t=d.call(this,"name",a(e,P)),i=(0,s.kQ)({class:["error-message"]},["StyleRule error: ",t," is missing a value"]);this.__errors.push(i)}const i=R.call(this,a(e,N));return{success:!0,message:{id:e.id,type:"style",name:t,style:i}}}};function U(e={}){const t={projection:[],template:[],style:[]},{conceptModel:i}=this;this.logs.clear();const r=Object.assign({name:"projection",download:!0,notify:"always"},e),a=i.getConcepts(["projection","template","style rule"]);return(0,s.xb)(a)?(this.notify("<strong>Empty model</strong>: Please create at least one projection.",n.k$.WARNING,2e3),!1):(this.__errors=[],a.forEach((e=>{let i=(0,s.XI)(e.getProperty("handler"),"");const n=q[i],{message:r}=n.call(this,e);t[i].push(r)})),(0,s.xb)(this.__errors)?("always"===r.notify&&this.notify("The projection model was <strong>successfully</strong> built",n.k$.SUCCESS,2e3),r.download&&this.download(t,r.name),delete this.__errors,t):(this.notify("<strong>Validation failed</strong>: The model could not be built.<br> <em>See Log for more details</em>.",n.k$.ERROR),this.logs.add(this.__errors,"Validation error",n.hi.ERROR),delete this.__errors,!1))}function Q(e){const t={};return h(e,P)&&c(e,P)&&(t.name=o(e,P).toLowerCase()),h(e,B)&&c(e,B)&&(t.prototype=o(e,B).toLowerCase()),t}const G={static:function(e){const t=e.getProperty("elementType");let i={type:t};const n=se[t];return(0,s.mf)(n)?(i.focusable=o(e,z),i.hidden=o(e,F),Object.assign(i,n.call(this,e)),h(e,N)&&(i.style=x.call(this,a(e,N))),i):null},layout:ee,dynamic:function(e){const t=e.getProperty("elementType");var i={type:t};const n=te[t];return(0,s.mf)(n)?(Object.assign(i,n.call(this,e)),i):null},field:function(e){const t=e.getProperty("elementType");var i={type:t};i.focusable=o(e,z),i.readonly=o(e,"readonly"),i.disabled=o(e,"disabled"),i.hidden=o(e,F),i.source=o(e,"source");const n=ne[t];return(0,s.mf)(n)?(Object.assign(i,n.call(this,e)),h(e,N)&&(i.style=x.call(this,a(e,N))),i):null},container:J};function K(e){const t=e.getProperty("contentType"),i=G[t];if(!(0,s.mf)(i))return null;let n=t;return Object.assign({kind:n},i.call(this,e))}function J(e){const t={type:"container"};let i=[];return o(e,"elements").filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue(!0);i.push(K.call(this,t))})),t.content=i,t.layout=ee.call(this,o(e,"layout",!0)),t.focusable=o(e,z),h(e,"style")&&(t.style=x.call(this,a(e,"style"))),t}const Y={flex:function(e){const t={},i="align-items",n="justify-content";return t.orientation=o(e,"orientation"),t.wrappable=o(e,"wrappable"),t[(0,s.eV)(i)]=o(e,i),t[(0,s.eV)(n)]=o(e,n),t},table:function(e){const t={};var i=[];return t.orientation=o(e,"orientation"),o(e,"rows").forEach((e=>{const t=[];o(e,"cells").forEach((e=>{let i=(0,s.XI)(o(e,"span"),1);if(c(e,"content")){let s=o(e,"content",!0);t.push({type:"cell",span:i,content:K.call(this,s)})}})),i.push(t)})),t.disposition=i,t}};function ee(e){const t=e.getProperty("elementType");var i={type:t};const n=Y[t];return(0,s.mf)(n)?(Object.assign(i,n.call(this,e)),h(e,"style")&&(i.style=x.call(this,a(e,"style"))),i):null}const te={attribute:ie,projection:ie,template:function(e){return c(e,W)?{type:"template",name:(t=e,W,u(l(t,"value")))}:null;var t}};function ie(e){const t={type:"attribute",name:o(e,"src")},i="tag",s="placeholder";if(h(e,i)&&c(e,i)&&(t.tag=o(e,i)),h(e,D)&&(t.required=o(e,D)),h(e,s)&&c(e,s)){const i=[];let n=a(e,s);o(n,$).filter((e=>e.hasValue())).forEach((e=>{const t=e.getValue(!0);i.push(K.call(this,t))})),t.placeholder=i}return t}const se={text:function(e){const t={};return t.asHTML=o(e,"asHTML"),t.content=o(e,$,!0),t},image:function(e){const t={};return t.url=o(e,"url"),t.alt=o(e,"alt"),t},link:function(e){const t={};return t.url=o(e,"url"),t.urlType=o(e,"type"),t.content=o(e,$).filter((e=>e.hasValue())).map((e=>{const t=e.getValue(!0);return K.call(this,t)})),t},plink:function(e){const t={};return t.tag=o(e,"tag"),t.content=o(e,$).filter((e=>e.hasValue())).map((e=>{const t=e.getValue(!0);return K.call(this,t)})),t},button:function(e){const t={};return t.trigger=o(e,"trigger"),t.disabled=o(e,"disabled"),t.content=o(e,$).filter((e=>e.hasValue())).map((e=>{const t=e.getValue(!0);return K.call(this,t)})),t}},ne={text:function(e){const t={},i="input";return t.multiline=o(e,"multiline"),t.resizable=o(e,"resizable"),h(e,i)&&(t.input=re.call(this,a(e,i))),t},binary:function(e){const t={},i="checkbox";t.state={};let s=a(e,"true");c(s,$)&&(t.state.true={content:o(s,$).filter((e=>e.hasValue())).map((e=>K.call(this,e.getValue(!0))))});let n=a(e,"false");return c(n,$)&&(t.state.false={content:o(n,$).filter((e=>e.hasValue())).map((e=>K.call(this,e.getValue(!0))))}),h(e,i)&&(t.checkbox=ae.call(this,a(e,i))),t},choice:function(e){const t={},i="placeholder",s="expanded",n="input",r="choice template";return t.choice={},h(e,i)&&(t.placeholder=o(e,i)),h(e,s)&&(t.expanded=o(e,s)),h(e,n)&&(t.input=re.call(this,a(e,n))),h(e,r)&&(t.choice.option={template:oe.call(this,a(e,r))}),t},list:function(e){const t={},i="action",s="item template";if(t.list={},h(e,s)&&(t.list.item={template:oe.call(this,a(e,s))}),h(e,i)){let s=a(e,i);t.action={};const n="add";if(h(s,n)){let e=a(s,n);t.action[n]={position:o(e,"position")};const i=[{type:"static",static:{type:"text",content:o(e,$)}}];t.action.add.content=i}}return t},table:function(e){const t={},i="row template",s="header",n="body",r="footer";return t.table={},h(e,i)&&(t.table.row={template:oe.call(this,a(e,i))}),h(e,s)&&(t.header=x.call(this,a(e,s))),h(e,n)&&(t.body=x.call(this,a(e,n))),h(e,r)&&(t.footer=x.call(this,a(e,r))),t}};function re(e){let t={type:o(e,"type"),placeholder:o(e,"placeholder")};return h(e,N)&&(t.style=x.call(this,a(e,N))),t}function ae(e){let t={position:o(e,"position"),label:le.call(this,a(e,"label"))};return h(e,N)&&(t.style=x.call(this,a(e,N))),t}function le(e){let t={content:o(e,"content")};return h(e,N)&&(t.style=x.call(this,a(e,N))),t}function oe(e){const t={};return h(e,X)&&c(e,X)&&(t.tag=o(e,X)),h(e,P)&&c(e,P)&&(t.name=o(e,P)),h(e,N)&&(t.style=x.call(this,a(e,N))),t}const ce={PRIMITIVE:"E",CONCRETE:"C",PROTOTYPE:"P",DERIVATIVE:"D"},he={container:null,header:null,body:null,schema:null,name:null,nature:null,prototype:null,btnCreate:null,instances:null,attributes:null,selectedAttribute:null,extras:null,tag:"",init(e){return this.schema=e,this.instances=[],this.extras=[],this.attributes=new Map,"primitive"===e.nature&&(this.tag=e.name),this},getName(){return this.schema.name},addInstance(e){this.instances.push(e)},render(){const{name:e,nature:t,attributes:i}=this.schema;(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["app-model-concept"]})),this.header=(0,s.wC)({class:["app-model-concept-header"]});let n=(0,s.oL)({class:["app-model-concept-nature"],dataset:{name:t}},ce[t.toUpperCase()]),r=(0,s.kQ)({class:["app-model-concept-name"]},e);this.header.append(n,r);let a=(0,s.w_)({class:["bare-list","app-model-concept-attributes"]});return Array.isArray(i)&&i.forEach((e=>{let t=(0,s.HV)({class:["app-model-concept-attribute"],dataset:{name:e.name,type:"attribute"}},e.name);this.attributes.set(e.name,t),a.append(t)})),this.body=(0,s.wC)({class:["app-model-concept-body"]}),this.body.append(a),this.container.append(this.header,this.body),this.bindEvents(),this.container},select(){this.container.classList.add("selected"),this.instances.forEach((e=>{e.show()})),this.refresh()},unselect(){this.container.classList.remove("selected"),this.instances.forEach((e=>{e.hide()})),this.refresh()},selectAttribute(e){return!(0,s.le)(e)&&(this.selectedAttribute!==e&&(this.selectedAttribute&&this.attributes.get(this.selectedAttribute).classList.remove("selected"),!!this.attributes.has(e)&&(this.selectedAttribute=e,this.attributes.get(e).classList.add("selected"),this.displayAttribute(e),this.refresh(),!0)))},displayAttribute(e){const{name:t,target:i,required:n=!0}=this.schema.attributes.find((t=>t.name===e));let r=(0,s.kQ)({class:["app-model__attribute-name"]},t),a=(0,s.wC)({class:["app-model__attribute-header"]},[r]);if(n){let e=(0,s.oL)({class:["app-model__attribute-required"]},(0,s.kQ)({class:["help"]},"required"));a.append(e)}let l=(0,s.wC)({class:["app-model__attribute-target"]},ue(i)),o=(0,s.wC)({class:["app-model__attribute-info"]},[a,l]);this.body.append(o),this.extras.forEach((e=>(0,s.ep)(e).remove())),this.extras=[],this.extras.push(o),this.refresh()},clear(){this.selectedAttribute&&(this.attributes.get(this.selectedAttribute).classList.remove("selected"),this.selectedAttribute=null),this.extras.forEach((e=>(0,s.ep)(e).remove())),this.extras=[],this.refresh()},destroy(){(0,s.ep)(this.container),this.container.remove()},refresh(){},bindEvents(){this.container.addEventListener("click",(e=>{this.parent.selectConcept(this);const{target:t}=e,{type:i,name:s}=t.dataset;"attribute"===i?this.selectAttribute(s):"concept"===i?this.parent.selectConcept(s)||(0,n.lL)(t):this.clear()}))}};function ue(e){const t=(0,s.DZ)();if((0,s.le)(e))return t;const{name:i,accept:n}=e;let r=(0,s.kQ)({class:["target-name"],dataset:{type:"concept",name:i}},i);if(t.append(r),n){let e=(0,s.wC)({class:["target-accept"]});Array.isArray(n)?(e.append(...n.map((e=>ue(e)))),e.classList.add("array")):e.append(ue(n)),t.append(e)}return t}var de=0;const pe={container:null,editor:null,init(e){return this.editor=e,this.aside=Object.create(me).init(null,e),this.editor.attach(this),this},show(){(0,n.$Z)(this.container)},hide(){(0,n.Cp)(this.container)},render(){return(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["app-editor"]})),this.container.append(this.aside.render()),this.container.append(this.editor.container),this.container},refresh(){},bindEvents(){}},me={container:null,header:null,body:null,nav:null,model:null,userConceptSection:null,primitiveConceptSection:null,editor:null,uploader:null,btnModel:null,concepts:null,selectedConcept:null,tabs:null,selectedNav:null,init(e,t){return this.model=e,this.editor=t,this.tabs=new Map,this.concepts=[],this},show(){(0,n.$Z)(this.container)},hide(){(0,n.Cp)(this.container)},addModel(e){this.model=e,this.model.concept.forEach((e=>{let t=this.createConcept(e).init(e);this.concepts.push(t),this.userConceptSection.append((0,s.wC)({class:["app-concept"]},t.render()))})),n.WV.list().forEach((e=>{let t=this.createConcept(e).init({nature:"primitive",name:e});this.concepts.push(t),this.primitiveConceptSection.append((0,s.wC)({class:["app-concept"]},t.render()))})),this.refresh()},createConcept(e){return Object.create(he,{parent:{value:this},id:{value:de++},editor:{value:this.editor,writable:!0}})},clear(){this.concepts.forEach((e=>{e.destroy()})),this.concepts=[]},findConcept(e){return(0,s.le)(e)?null:e.parent===this?e:(e=>n.WV.list().includes(e.toLowerCase()))(e)?(this.notify(`'${e}' is a primitive.`,n.k$.NORMAL),null):this.concepts.find((t=>t.getName()===e))},selectConcept(e){if((0,s.le)(e))return!1;let t=this.findConcept(e);return!(0,s.le)(t)&&this.selectedConcept!==t&&(this.selectedConcept&&this.selectedConcept.unselect(),this.selectedConcept=t,this.selectedConcept.select(),this.refresh(),!0)},removeModel(){},selectTab(e){if((0,s.le)(e))return!1;if(this.selectedNav===e)return!1;if(this.selectedNav){const{tab:e,window:t}=this.tabs.get(this.selectedNav);e.classList.remove("selected"),(0,n.Cp)(t)}const{tab:t,window:i}=this.tabs.get(e);t.classList.add("selected"),this.selectedNav=e,(0,n.$Z)(i)},update(){},notify(e,t,i=4500){let n=(0,s.qm)({class:["notify"],html:e});const r="open";t&&n.classList.add(t),this.header.append(n),setTimeout((()=>{n.classList.add(r)}),50),setTimeout((()=>{n.classList.remove(r),setTimeout((()=>{n.remove()}),500)}),i)},refresh(){(0,s.le)(this.selectedConcept)?this.editor.header.hide("body"):this.editor.header.show("body")},render(){(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["app-editor-aside"]}));const e=(0,s.DZ)();return(0,s.Re)(this.header)||(this.header=(0,s.wC)({class:["app-editor-aside-header"]}),e.append(this.header)),(0,s.Re)(this.input)||(this.uploader=(0,s._)({class:["app-uploader"]},[(0,s.Ju)({type:"file",class:["app-uploader-input","hidden"],accept:".json,.jsoncp"}),(0,s.kQ)({class:["app-uploader-label"]},"Upload concepts")]),this.header.append(this.uploader)),(0,s.Re)(this.body)||(this.body=(0,s.wC)({class:["app-editor-aside-body"]}),e.append(this.body)),(0,s.Re)(this.nav)||(this.nav=(0,s.w_)({class:["bare-list","app-editor-aside-nav"]}),["User-defined","Primitive"].forEach((e=>{this.nav.append((0,s.HV)({class:["app-editor-aside-nav-item"],dataset:{type:"nav",name:e.toLowerCase()}},e))})),this.body.append(this.nav)),this.userConceptSection=(0,s.wC)({class:["app-editor-aside-body-userconcept","hidden"]}),this.primitiveConceptSection=(0,s.wC)({class:["app-editor-aside-body-primitiveconcept","hidden"]}),this.tabs.set("user-defined",{tab:this.nav.children[0],window:this.userConceptSection}),this.tabs.set("primitive",{tab:this.nav.children[1],window:this.primitiveConceptSection}),this.body.append(this.userConceptSection,this.primitiveConceptSection),(0,s.le)(this.selectedNav)&&this.selectTab("user-defined"),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},bindEvents(){this.uploader.addEventListener("change",(e=>{let t=e.target.files[0],i=new FileReader;i.onload=e=>{const t=JSON.parse(i.result);this.addModel(t)},i.readAsText(t)})),this.container.addEventListener("click",(e=>{const{target:t}=e,{type:i,name:s}=t.dataset;"nav"===i&&this.selectTab(s)})),this.editor.actions.set("create-instance",(e=>{const{concept:t}=e.dataset;let i=this.editor.createConcept(t);console.log(this.selectedConcept.tag);let s=this.editor.createProjection(i,this.selectedConcept.tag),n=this.editor.createInstance(i,s);"projection"===t&&n.concept.getAttribute("concept").getTarget().getAttribute("name").getTarget().setValue(this.selectedConcept.getName()),this.selectedConcept.addInstance(n)}))}};let fe=null,ge=null,be=null,ve=null,ye=null,we=null;const Ee=i(868),Ce=i(547);var je=0;const Le={menu:null,editorSection:null,btnNew:null,tabList:null,editors:null,tabs:null,activeEditor:null,activeTab:null,init(){return this.editors=[],this.tabs=new Map,this.bindDOM(),this.bindEvents(),this.render(),this},refresh(){return this},render(){this.refresh()},createEditor(e){let t=(0,r.createEditor)().init(e);return t.id="GE"+je++,this.addEditor(t),t},addEditor(e){return this.editors.push(e),this.editorSection.append(e.container),this.refresh(),this},getEditors(e){const t=this.editors;return(0,s.mf)(e)?this.editors.filter((t=>e(t))):t},getEditor(e){return this.editors.find((t=>t.id===e))},deleteEditor(e){let t=this.editors.findIndex((t=>t.id===e));return-1!==t&&(this.getEditor(e).destroy(),this.editors.splice(t,1),this.refresh(),!0)},addTab(e,t){return e.parentElement!==this.tabList&&this.tabList.append(e),this.tabs.set(e,t),t.registerHandler("editor.close@post",(()=>this.closeTab(e))),this},closeTab(e){if((0,s.le)(e)||!this.tabs.has(e))return!1;let t=this.tabs.get(e);return this.deleteEditor(t.id),this.tabs.delete(e),e===this.activeTab&&(this.activeTab=null,this.tabList.hasChildNodes()&&this.changeTab(e.previousElementSibling||e.nextElementSibling)),e.remove(),this.refresh(),!0},changeTab(e){if(!(0,s.le)(e)){if(this.activeTab){if(this.activeTab===e)return this;this.activeTab.classList.remove("selected"),this.tabs.get(this.activeTab).hide()}return this.activeTab=e,this.activeTab.classList.add("selected"),this.tabs.get(this.activeTab).show(),this.refresh(),this}},bindModel(){},bindDOM(){this.menu=(0,s.sb)('[data-component="menu"]'),this.editorSection=(0,s.sb)('[data-component="editor"]'),this.tabSection=(0,s.sb)('[data-component="nav"]'),this.tabList=(0,s.sb)('[data-component="nav-list"]'),(0,s.Re)(this.tabList)||(this.tabList=(0,s.w_)({class:["bare-list","app-tabs"]}),this.tabSection.append(this.tabList));const e={concept:Ae,projection:Oe};for(let t=0;t<this.tabList.childElementCount;t++){const i=this.tabList.children.item(t),{editor:s}=i.dataset;e[s].call(this).then((e=>{e.hide(),this.addTab(i,e),i.classList.contains("selected")&&(this.activeTab=i,this.tabs.get(this.activeTab).show())})).catch((e=>{console.log(e)}))}return this},bindEvents(){this.menu.addEventListener("click",(e=>{let t=(i=e.target,n=this.menu,(0,s.le)(i)||i===n?null:(0,s.RI)(i.dataset,"action")?i:i.parentElement===n?(0,s.sb)("[data-action]",i):(0,s.wr)(i,(e=>(0,s.RI)(e.dataset,"action")),5));var i,n;if(!(0,s.Re)(t))return!1;const{action:r}=t.dataset;if("new"===r){let e=xe.call(this,"EX"),t={toolbar:[{type:"button",name:"button-export",action:"export.model",class:["btn","editor-toolbar__button","editor-toolbar__button--save"]},{type:"button",name:"button-menu",action:"toggle.menu",class:["btn","editor-toolbar__button","editor-toolbar__button--home"]},{type:"button",name:"button-close",action:"close.editor",class:["btn","editor-toolbar__button","editor-toolbar__button--close"]}]};this.addTab(e,this.createEditor({config:t,handlers:{"export.model":function(){this.export()},"open.menu":function(){this.home.open()},"close.editor":function(){this.close()},"build-concept":function(e){y.call(this)},"build-projection":function(e){U.call(this)}}})),this.changeTab(e)}})),this.tabList.addEventListener("click",(e=>{let t=(i=e.target,n=this.tabList,i.parentElement===n?i:(0,s.wr)(i,(e=>e.parentElement===n)));var i,n;if(!(0,s.Re)(t))return!1;this.changeTab(t)}))}};function xe(e){let t=(0,s.kQ)({class:["nav-item-title"]},e);return(0,s.HV)({class:["nav-item","has-helper"]},[t])}const Re=function(e){const t="metamodel";if(!e.hasResource(t))return e.notify("<strong>Metamodel not found</strong>.","error",3e3),e.triggerEvent({name:"load-resource",args:[t]}),!1;let i=U.call(e,{download:!1,notify:"error"});if(!i)return;let s=e.getModel(t);const r=`gentleman.editor@${e.id}`,a=new BroadcastChannel(r);e.__previewStarted||(localStorage.setItem("gentleman.preview",r),e.__previewStarted=!0),(0,n.Oj)(),setTimeout((()=>{a.postMessage({concept:s,projection:i})}),100)},Ie={"open-constraint":function(e){let t=e[0],i=this.createProjection(t,"constraint"),n=this.findWindow("side-instance");(0,s.le)(n)&&(n=this.createWindow("side-instance"),n.container.classList.add("concept-constraint-sideview")),n.instances.size>0&&Array.from(n.instances)[0].delete();let r=this.createInstance(t,i,{type:"projection",close:"DELETE-PROJECTION"});n.addInstance(r)},"build-concept":function(e){y.call(this)}},_e={"build-projection":function(e){U.call(this)},"value.changed":function(){if(!this.__previewStarted)return!1;Re(this)},"value.added":function(){if(!this.__previewStarted)return!1;Re(this)},"value.removed":function(){if(!this.__previewStarted)return!1;Re(this)},"open-style":function(e){let t=e[0],i=this.createProjection(t,"style"),n=this.findWindow("side-instance");(0,s.le)(n)&&(n=this.createWindow("side-instance"),n.container.classList.add("model-projection-sideview")),n.instances.size>0&&Array.from(n.instances)[0].delete();let r=this.createInstance(t,i,{type:"projection",close:"DELETE-PROJECTION"});n.addInstance(r)},"open-state":function(e){let t=e[0],i=this.createProjection(t,"state"),n=this.findWindow("side-instance");(0,s.le)(n)&&(n=this.createWindow("side-instance"),n.container.classList.add("model-projection-sideview")),n.instances.size>0&&Array.from(n.instances)[0].delete();let r=this.createInstance(t,i,{type:"projection",close:"DELETE-PROJECTION"});n.addInstance(r)},"open-layout":function(e){let t=e[0],i=this.createProjection(t,"layout"),n=this.findWindow("side-instance");(0,s.le)(n)&&(n=this.createWindow("side-instance"),n.container.classList.add("model-projection-sideview")),n.instances.size>0&&Array.from(n.instances)[0].delete();let r=this.createInstance(t,i,{type:"projection",close:"DELETE-PROJECTION"});n.addInstance(r)}};function Ae(){return(0,s.le)(fe)?Promise.all([fetch("https://geodes.iro.umontreal.ca/gentleman/models/concept-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/concept-model/projection.json")]).then((async([e,t])=>(fe=await e.json(),ge=await t.json(),this.createEditor({conceptModel:fe,projectionModel:ge,config:Ee,handlers:Ie})))):new Promise((()=>this.createEditor({conceptModel:fe,projectionModel:ge,config:Ee,handlers:Ie})))}function Oe(){return(0,s.le)(fe)?Promise.all([fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/projection-model/projection.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/concept.json"),fetch("https://geodes.iro.umontreal.ca/gentleman/models/style-model/projection.json")]).then((async([e,t,i,s])=>{be=await e.json(),ve=await t.json(),ye=await i.json(),we=await s.json();let n=this.createEditor({conceptModel:be,projectionModel:ve,config:Object.assign({},Ce),handlers:_e});n.addConcept(ye),n.addProjection(we);let r=Object.create(pe).init(n);return this.editorSection.append(r.render()),n})):new Promise((()=>{let e=this.createEditor({conceptModel:be,projectionModel:ve,config:Object.assign({},Ce),handlers:_e});e.addConcept(ye),e.addProjection(we);let t=Object.create(pe).init(e);return this.editorSection.append(t.render()),e}))}},839:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Preview:()=>r});var s=i(835),n=i(943);const r={menu:null,editorSection:null,editor:null,channel:null,init(e){return this.channel=new BroadcastChannel(e),this.editor=Gentleman.createEditor().init({config:{settings:!1}}),this.bindDOM(),this.render(),this.bindEvents(),this},refresh(){return this.editor.isReady?this.editor.open():this.editor.close(),this},render(){this.editorSection.append(this.editor.container),this.refresh()},getEditor(){return this.editor},bindDOM(){this.menu=(0,s.sb)('[data-component="menu"]'),this.editorSection=(0,s.sb)('[data-component="editor"]'),(0,n.Cp)(this.menu)},bindEvents(){this.channel.addEventListener("message",(e=>{const{concept:t,projection:i}=e.data;let s=[];this.editor.conceptModel&&(s=this.editor.conceptModel.export()),this.editor.unload().freeze().loadConceptModel(t,s).loadProjectionModel(i).unfreeze().open()}))}}},868:e=>{"use strict";e.exports=JSON.parse('{"concept":{"concrete-concept":{"name":"concrete concept"},"prototype-concept":{"name":"prototype concept"},"derivative-concept":{"name":"derivative concept"}},"toolbar":[{"type":"button","name":"button-build","action":"build-concept","class":["btn","app-editor-header__button"],"content":"Build"},{"type":"button","name":"button-export","action":"export.model","class":["btn","editor-toolbar__button","editor-toolbar__button--save"]}]}')},547:e=>{"use strict";e.exports=JSON.parse('{"toolbar":[{"type":"button","name":"button-build","action":"build-projection","class":["btn","app-editor-header__button","editor-toolbar__button--build"],"content":"Build"},{"type":"button","name":"button-export","action":"export.model","class":["btn","editor-toolbar__button","editor-toolbar__button--save"]}]}')},835:(e,t,i)=>{"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function l(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i?b(e)?t:e:v(e)?t:e}function o(e){return p(e)&&0===e.length}function c(e){return e instanceof Date||"object"===s(e)&&"[object Date]"===Object.prototype.toString.call(e)}function h(e){return"string"==typeof e||e instanceof String}function u(e){return"function"==typeof e}function d(e){return!v(e)&&"object"===s(e)}function p(e){return!v(e)&&"function"==typeof e[Symbol.iterator]}function m(e){return p(e)&&!h(e)}function f(e){return null===e}function g(e){return!e||h(e)&&(0===e.length||/^\s*$/.test(e))}function b(e){return void 0===e}function v(e){return f(e)||b(e)}function y(e){if(!Array.isArray(e))throw new TypeError("Bad argument");if(!o(e))return e[e.length-1]}function w(e,t){var i=e.getDate(),s=e.getMonth()+1,n=e.getFullYear().toString(),r=e.getHours(),a=e.getMinutes(),l=e.getSeconds(),o=function(e){return e<10?"0".concat(e):e};return t.replace("yyyy",n).replace("yy",n.slice(-2)).replace("mm",o(s)).replace("m",s).replace("dd",o(i)).replace("d",i).replace("hh",o(r)).replace("h",r).replace("MM",o(a)).replace("M",a).replace("ss",o(l)).replace("s",l)}function E(e){return w(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(v(e))return new Date;if(c(e))return e;var i=new Date(e),s=i.getTime();return Number.isNaN(s)?new Date:t?new Date(s+6e4*i.getTimezoneOffset()):i}(e,!1),"yyyy-mm-dd hh:MM")}i.d(t,{eV:()=>R,fm:()=>x,kI:()=>L,jC:()=>Ae,WA:()=>Me,cH:()=>ie,Pi:()=>q,K$:()=>ne,ax:()=>fe,wC:()=>K,DZ:()=>W,UF:()=>le,rX:()=>U,_N:()=>Q,mg:()=>G,dc:()=>z,oL:()=>oe,Bi:()=>se,Ju:()=>ce,_:()=>ue,HV:()=>te,qm:()=>J,vB:()=>F,kQ:()=>re,u4:()=>ae,W_:()=>ge,uI:()=>ye,Ss:()=>je,tH:()=>we,ZL:()=>ve,zI:()=>Ce,ui:()=>Ee,nE:()=>he,w_:()=>ee,wr:()=>Se,p6:()=>w,sb:()=>Re,$3:()=>Ie,t4:()=>_e,RI:()=>j,Bv:()=>$,xb:()=>o,mf:()=>u,Re:()=>V,TW:()=>p,UG:()=>O,le:()=>v,hr:()=>g,Kn:()=>d,HD:()=>h,Z$:()=>y,Ho:()=>I,ep:()=>ke,iG:()=>E,sw:()=>_,XI:()=>l});var C=Object.prototype.hasOwnProperty,j=(Object.prototype.isPrototypeOf,function(e,t){return C.call(e,t)});function L(e){if(v(e)||!d(e))return e;var t=e.constructor();for(var i in e)j(e,i)&&(e.isActiveClone=null,t[i]=L(e[i]),delete e.isActiveClone);return t}function x(e){return g(e)?e:e.charAt(0).toUpperCase()+e.slice(1)}function R(e){if(g(e))return e;var t=I(e);return t.charAt(0).toLowerCase()+t.slice(1)}function I(e){return g(e)?e:function(e){return g(e)?e:e.toLowerCase().replace(/\b\w/g,(function(e){return e.toUpperCase()}))}(e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim()).replace(/\s+/g,"")}function _(e){var t=l(e,!1);return h(t)&&"true"===t.toLowerCase()||Number.isInteger(t)&&1===t||!0===t}var A=function(e){return!v(e)&&e.nodeType===Node.ELEMENT_NODE},O=function(e){return e instanceof Node},S=function(e){return A(e)&&e instanceof Element},V=function(e,t){return!!(A(e)&&e instanceof HTMLElement)&&(!p(t)||(i=e,s=Array.isArray(t)?t:[t],n=function(e){return i instanceof e},a=function(e){return i.tagName===e.toUpperCase()},l=function(e){return Array.isArray(e)?e.includes(i.type):i.type===e},s.some((function(e){if(!p(e))return!1;var t,i,s=e,c=null;if(Array.isArray(e)){var h=(i=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],s=!0,n=!1,r=void 0;try{for(var a,l=e[Symbol.iterator]();!(s=(a=l.next()).done)&&(i.push(a.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{s||null==l.return||l.return()}finally{if(n)throw r}}return i}}(t,i)||r(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());s=h[0],c=h[1]}s=s.toLowerCase();var u="HTML".concat(j(T,s)?T[s]:I(s),"Element");return!(!n(window[u])&&!a(s))&&(!(m(c)&&!o(c))||l(c))}))));var i,s,n,a,l},T={a:"Anchor",br:"BR",dl:"DList",datalist:"DataList",fieldset:"FieldSet",frameset:"FrameSet",hr:"HR",h1:"Heading",h2:"Heading",h3:"Heading",h4:"Heading",h5:"Heading",h6:"Heading",li:"LI",ol:"OList",optgroup:"OptGroup",p:"Paragraph",q:"Quote",blockquote:"Quote",caption:"TableCaption",td:"TableCell",th:"TableCell",col:"TableCol",tr:"TableRow",tbody:"TableSection",thead:"TableSection",tfoot:"TableSection",textarea:"TextArea",ul:"UList"},k=function(e){return function(e){return!v(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}(e)&&e instanceof DocumentFragment};function M(e,t){if(!h(t))return null;var i=document.createElement("template");return i.innerHTML=t.trim(),i.content[e]}var $=M.bind(null,"firstChild");function H(e,t,i){e[t]=i}function P(e,t,i){e.setAttribute(t,i)}M.bind(null,"childNodes");var N="accesskey,autocapitalize,class,dataset,editable,draggable,hidden,id,inputmode,lang,html,style,tabindex,text,title",D={accesskey:[H,"accessKey"],autocapitalize:[H,"autocapitalize"],class:[function(e,t){var i;if(!V(e))throw new Error("Bad argument: The passed `element` argument is not a valid HTML Element");return(i=e.classList).add.apply(i,n(Array.isArray(t)?t:[t])),e}],dataset:[function(e,t,i){Object.assign(e[t],i)},"dataset"],draggable:[H,"draggable"],editable:[H,"contentEditable"],hidden:[H,"hidden"],id:[H,"id"],inputmode:[H,"inputMode"],lang:[H,"lang"],html:[H,"innerHTML"],style:[H,"style"],tabindex:[H,"tabIndex"],text:[H,"textContent"],title:[H,"title"],data:[H,"data"],cite:[H,"cite"],download:[H,"download"],ping:[H,"ping"],target:[H,"target"],coords:[H,"coords"],shape:[H,"shape"],autoplay:[H,"autoplay"],buffered:[H,"buffered"],controls:[H,"controls"],loop:[H,"loop"],muted:[H,"muted"],playsinline:[P,"playsinline"],poster:[H,"poster"],preload:[H,"preload"],crossorigin:[H,"crossOrigin"],decoding:[H,"decoding"],height:[H,"height"],ismap:[H,"isMap"],loading:[H,"loading"],srcset:[H,"srcset"],width:[H,"width"],alt:[H,"alt"],as:[H,"as"],media:[H,"media"],rel:[H,"rel"],src:[H,"src"],sizes:[H,"sizes"],reversed:[H,"reversed"],start:[H,"start"],accept:[H,"accept"],"accept-charset":[H,"acceptCharset"],action:[H,"action"],autocomplete:[H,"autocomplete"],autofocus:[H,"autofocus"],capture:[H,"capture"],checked:[H,"checked"],cols:[H,"cols"],disabled:[H,"disabled"],dirname:[H,"dirName"],enctype:[H,"enctype"],for:[H,"for"],form:[H,"form"],formaction:[H,"formAction"],formenctype:[H,"formEnctype"],formmethod:[H,"formMethod"],formnovalidate:[H,"formNoValidate"],formtarget:[H,"formTarget"],high:[H,"high"],label:[H,"label"],list:[H,"list"],low:[H,"low"],max:[H,"max"],maxlength:[H,"maxLength"],method:[H,"method"],min:[H,"min"],minlength:[H,"minLength"],multiple:[H,"multiple"],name:[H,"name"],novalidate:[H,"noValidate"],optimum:[H,"optimum"],pattern:[H,"pattern"],placeholder:[H,"placeholder"],readonly:[H,"readOnly"],required:[H,"required"],rows:[H,"rows"],selected:[H,"selected"],size:[H,"size"],spellcheck:[P,"spellcheck"],step:[H,"step"],wrap:[H,"wrap"],default:[H,"default"],kind:[H,"kind"],srclang:[H,"srclang"],abbr:[H,"abbr"],colspan:[H,"colSpan"],span:[H,"span"],rowspan:[H,"rowSpan"],scope:[H,"scope"],href:[H,"href"],hreflang:[H,"hreflang"],datetime:[H,"dateTime"],type:[H,"type"],value:[H,"value"],usemap:[H,"useMap"]};function B(e,t,i){var s=document.createElement(e);return V(s)?(d(i)&&function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!V(e))throw new Error("Bad argument: The given element argument is not a valid HTML Element");if(!d(t))return e;for(var s=function(e){return N.includes(e)||i.includes(e)},r=0,a=Object.keys(t);r<a.length;r++){var l=a[r];if(s(l)){var o=t[l],c=D[l].slice(0);c.shift().apply(void 0,[e].concat(n(c),[o]))}}}(s,i,l(t,"")),s):null}function X(e,t,i,s){var n=B(e,t,i);return V(n)?(v(s)||Le(n,s),n):null}function Z(e,t,i,s,n){var r=B(e,t,s);return V(r)?(v(n)||Le(r,n,i),r):null}function W(e){var t=document.createDocumentFragment();return v(e)||Le(t,e),t}B.bind(null,"link","as,crossorigin,disabled,href,hreflang,media,rel,sizes,type"),X.bind(null,"template","");var z=X.bind(null,"header",""),F=(X.bind(null,"footer",""),X.bind(null,"main",""),X.bind(null,"article",""),X.bind(null,"section","")),q=(X.bind(null,"nav",""),X.bind(null,"aside","")),U=(X.bind(null,"h1",""),X.bind(null,"h2","")),Q=X.bind(null,"h3",""),G=X.bind(null,"h4",""),K=(X.bind(null,"h5",""),X.bind(null,"h6",""),X.bind(null,"div","")),J=(X.bind(null,"object","data,height,name,type,usemap,width"),B.bind(null,"embed","height,src,type,width"),B.bind(null,"br",""),B.bind(null,"hr",""),X.bind(null,"p","")),Y=(X.bind(null,"blockquote","cite"),function(e){return V(e,"li")?e:te(null,e)}),ee=Z.bind(null,"ul","",Y),te=(Z.bind(null,"ol","reversed,start,type",Y),X.bind(null,"li","value")),ie=(X.bind(null,"dl",""),X.bind(null,"dt",""),X.bind(null,"dd",""),X.bind(null,"a","download,href,hreflang,ping,rel,target,type")),se=(B.bind(null,"area","alt,coords,download,href,hreflang,media,ping,rel,shape,target"),B.bind(null,"base","href,target"),B.bind(null,"img","alt,crossorigin,decoding,height,ismap,loading,sizes,src,srcset,usemap,width")),ne=X.bind(null,"audio","autoplay,controls,crossorigin,loop,muted,preload,src"),re=(X.bind(null,"video","autoplay,controls,crossorigin,height,loop,muted,playsinline,poster,preload,src,width"),B.bind(null,"source","media,sizes,src,srcset,type"),B.bind(null,"track","default,kind,label,src,srclang"),X.bind(null,"picture",""),X.bind(null,"figure",""),X.bind(null,"figcaption",""),X.bind(null,"span","")),ae=X.bind(null,"strong",""),le=X.bind(null,"em",""),oe=(X.bind(null,"mark",""),X.bind(null,"samp",""),X.bind(null,"sub",""),X.bind(null,"sup",""),X.bind(null,"del","cite,datetime"),X.bind(null,"ins","cite,datetime"),X.bind(null,"q","cite"),X.bind(null,"abbr",""),X.bind(null,"b",""),X.bind(null,"i","")),ce=(X.bind(null,"s",""),X.bind(null,"u",""),X.bind(null,"cite",""),X.bind(null,"time","datetime"),X.bind(null,"code",""),X.bind(null,"form","accept-charset,action,autocomplete,enctype,method,name,novalidate,rel,target"),B.bind(null,"input","accept,alt,autocomplete,autofocus,capture,checked,dirname,disabled,height,max,maxlength,minlength,min,multiple,name,pattern,placeholder,readonly,required,size,src,step,type,value,width")),he=X.bind(null,"textarea","autocomplete,autofocus,cols,disabled,maxlength,minlength,name,placeholder,readonly,required,rows,spellcheck,value,wrap"),ue=X.bind(null,"label","for"),de=(Z.bind(null,"select","autocomplete,autofocus,disabled,multiple,name,required,size",(function(e){return V(e,["option","optgroup"])?e:Array.isArray(e)?me(null,e):de(null,e)})),X.bind(null,"option","disabled,label,selected,value")),pe=function(e){return V(e,"option")?e:de(null,e)},me=Z.bind(null,"optgroup","disabled,label",pe),fe=(X.bind(null,"fieldset","disabled,name"),X.bind(null,"legend",""),Z.bind(null,"datalist","",pe),X.bind(null,"meter","high,low,max,min,optimum,value"),X.bind(null,"progress","max,value"),X.bind(null,"output","name,value"),X.bind(null,"button","autofocus,disabled,formaction,formenctype,formmethod,formnovalidate,formtarget,name,type,value")),ge=X.bind(null,"table",""),be=(X.bind(null,"caption",""),function(e){return V(e,"tr")?e:Ee(null,e)}),ve=Z.bind(null,"thead","",be),ye=Z.bind(null,"tbody","",be),we=Z.bind(null,"tfoot","",be),Ee=(B.bind(null,"col","span"),Z.bind(null,"colgroup","span",(function(e){return V(e,"col")?e:null})),Z.bind(null,"tr","",(function(e){return V(e,["th","td"])?e:je(null,e)}))),Ce=X.bind(null,"th","abbr,colspan,rowspan,scope"),je=X.bind(null,"td","colspan,rowspan");function Le(e,t,i){var s=Array.isArray(t)?t:[t];return u(i)&&(s=s.map((function(e){return i(e)}))),function(e,t){if(!O(e))throw new TypeError("Bad argument: The given `parent` is not a valid Node");if(!(t instanceof HTMLCollection||m(t)))throw new TypeError("Bad argument: The given `children` is not a valid HTMLCollection/HTMLElement array");var i=k(e)?e:document.createDocumentFragment();Array.from(t).forEach((function(e){var t;v(e)||i.appendChild(O(e)?e:(t=e.toString(),document.createTextNode(t.toString())))})),e!==i&&e.appendChild(i)}(e,s),e}var xe=function(e){return/^\.[a-zA-Z0-9_-]+$/.test(e)};function Re(e,t){var i=l(t,document);return g(e)?null:k(i)?i.querySelector(e):function(e){return/^#[a-zA-Z0-9_-]+$/.test(e)}(e)?document.getElementById(e.substring(1)):xe(e)?i.getElementsByClassName(e.substring(1))[0]:i.querySelector(e)}function Ie(e,t){var i=l(t,document);return g(e)?null:k(i)?i.querySelectorAll(e):xe(e)?i.getElementsByClassName(e.substring(1)):i.querySelectorAll(e)}function _e(e,t){return"content"in document.createElement("template")?Re(e,t):null}function Ae(e,t){return e?document.importNode(e.content,l(t,!0)):e}function Oe(e,t,i){if(!V(t))return null;var s=t[e];if(u(i))for(;S(s)&&!i(s);)s=s[e];return s}function Se(e,t,i){if(!S(e))throw new TypeError("Bad argument: The given target parameter is not a valid HTML Element");if(!u(t))throw new TypeError("Bad argument: The given pred parameter is not a valid Function");var s=e.parentElement;return i>0?Te(s,t,i-1):Ve(s,t)}function Ve(e,t){return v(e)?null:t(e)?e:Ve(e.parentElement,t)}function Te(e,t,i){return v(e)||0===i?null:t(e)?e:Te(e.parentElement,t,i-1)}function ke(e,t){if(!O(e))throw new TypeError("Bad argument: The given `node` is not a valid Node");return u(t)?(Array.from(e.childNodes).forEach((function(i){t(i)&&e.removeChild(i)})),e):function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);return e}(e)}function Me(e){if(v(e))return!1;var t=he({value:V(e)?e.textContent:e.toString(),readonly:!0});return!!V(t)&&(document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),!0)}Oe.bind(null,"previousElementSibling"),Oe.bind(null,"nextElementSibling");var $e=function(e){return e.dataset.state},He=function(e,t){return e.dataset.state=t},Pe=function(e,t){return He(e,l(t,"checked"))},Ne=function(e,t){return He(e,l(t,"unchecked"))},De={name:"form-selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,i=0;i<this.items.length;i++){var s=this.items[i];s.isChecked()&&this.setSelectedItem(s),s.value===e&&(t=s)}return f(this.selectedItem)&&!f(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("change",(function(t){var i=t.target,s=!1;if(u(e.beforeChange)&&(s=!1===e.beforeChange(e,t)),s)return i.checked=!1,void e.items[e.selectedIndex].setChecked(!0);var n=e.items.find((function(e){return e.index===+l(i.dataset.selectorIndex,-1)}));v(n)||(e.setSelectedItem(n),u(e.afterChange)&&e.afterChange(e,t))}))}},Be=function(e){return'[data-type="'.concat(e.name,'"]')},Xe={BaseSelector:Be({name:"selector",container:null,items:null,selectedIndex:null,selectedItem:null,beforeChange:null,afterChange:null,get value(){return this.selectedItem.value},setSelectedItem:function(e){return this.items.includes(e)?(this.selectedItem&&this.selectedItem.setChecked(!1),this.selectedItem=e,this.selectedItem.setChecked(!0),!0):null},init:function(){for(var e=this.container.dataset.value,t=null,i=0;i<this.items.length;i++){var s=this.items[i];s.isChecked()&&this.setSelectedItem(s),s.value===e&&(t=s)}return f(this.selectedItem)&&!f(t)&&this.setSelectedItem(t),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",(function(t){var i=t.target;if(j(i.dataset,"selector")){var s=!1;if(u(e.beforeChange)&&(s=!1===e.beforeChange(e,t)),!s){var n=e.items.find((function(e){return e.index===+l(i.dataset.selectorIndex,-1)}));v(n)||(e.setSelectedItem(n),u(e.afterChange)&&e.afterChange(e,t))}}}))}}),FormSelector:Be(De)};new Error("Missing container: A selector requires a container"),new Error("Missing input: FormSelector requires an input in the container"),[Xe.BaseSelector,Xe.FormSelector].join(","),new Error("Missing container: A switch requires a container"),new Error("Missing input: FormSwitch requires an input in the container");var Ze="on",We=function(e){return'[data-type="'.concat(e.name,'"]')},ze={name:"form-switch",container:null,input:null,beforeChange:null,afterChange:null,get value(){return this.input.value},isChecked:function(){return $e(this.container)===Ze},setChecked:function(e){return!v(e)&&(this.input.checked=e,e?Pe(this.container,Ze):Ne(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.input.checked&&this.setChecked(!0),this.bindEvents(),this},bindEvents:function(){var e=this;this.input.addEventListener("change",(function(t){var i=!1;u(e.beforeChange)&&(i=!1===e.beforeChange(e,t)),i?e.input.checked=!e.input.checked:(e.toggle(),u(e.afterChange)&&e.afterChange(e,t))}))}};[We({name:"switch",container:null,beforeChange:null,afterChange:null,get value(){return this.container.dataset.value},isChecked:function(){return $e(this.container)===Ze},setChecked:function(e){return!v(e)&&(e?Pe(this.container,Ze):Ne(this.container,"off"),!0)},toggle:function(){this.isChecked()?this.setChecked(!1):this.setChecked(!0)},init:function(e){return Object.assign(this,e),this.isChecked()&&Pe(this.container,Ze),this.bindEvents(),this},bindEvents:function(){var e=this;this.container.addEventListener("click",(function(t){var i=!1;u(e.beforeChange)&&(i=!1===e.beforeChange(e,t)),i||(e.toggle(),u(e.afterChange)&&e.afterChange(e,t))}))}}),We(ze)].join(","),new Error("Missing container: A collapsible requires a container"),new Error("Missing container: An accordion requires a container"),encodeURIComponent},513:(e,t,i)=>{"use strict";i.d(t,{createEditor:()=>is});var s=i(835),n=i(943);const r={menu:null,schema:null,isOpen:!1,visible:!0,btnStart:null,fileIO:null,config:null,settings:null,init(e){return e&&(this.schema=e),this},get isRendered(){return(0,s.Re)(this.container)},clear(){return(0,s.ep)(this.container),this},update(){},render(){const e=(0,s.DZ)();if(!(0,s.Re)(this.container)){this.container=(0,s.wC)({class:["editor-home"]});let e=(0,s.rX)({class:["editor-title"]},"Settings");this.container.append(e)}return(0,s.Re)(this.menu)||(this.menu=a.call(this),e.append(this.menu)),(0,s.Re)(this.btnStart)||(this.btnStart=(0,s.ax)({class:["btn","editor-home-section--model__button","editor-home-section__button--start"],dataset:{action:"close",context:"home"}},"Done"),e.append(this.btnStart)),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},refresh(){const{hasConceptModel:e,hasProjectionModel:t}=this.editor;return this.btnStart.disabled=!(e&&t),this},actionHandler(e,t){const{concept:i}=t.dataset;"open-concept"===e&&(this.config.selectItem(i),this.config.showInfo(i))},bindEvents(){this.editor.registerHandler("editor.load-concept@post",(e=>{this.editor.hasConceptModel&&this.fileIO.addFile("concept",e[0],e[1])})),this.editor.registerHandler("editor.load-projection@post",(e=>{this.editor.hasConceptModel&&this.fileIO.addFile("projection",e[0],e[1])})),this.editor.registerHandler("editor.unload-concept@post",(e=>{this.fileIO.removeFile("concept"),this.config.clear()})),this.editor.registerHandler("editor.unload-projection@post",(e=>{this.fileIO.removeFile("projection")})),this.editor.registerHandler("concept-model.updated",(()=>{this.config.clear(),this.editor.hasConceptModel&&this.editor.conceptModel.schema.filter((e=>e.root)).forEach((e=>{this.config.addItem(e)}))}))}};function a(){const e=(0,s.vB)({class:["editor-home-menu"]});let t=(0,s.wC)({class:["editor-home-menu-section","editor-home-menu-section--file"]}),i=(0,s.wC)({class:["editor-home-menu-section","editor-home-menu-section--config"]});return this.fileIO=o.call(this),this.config=u.call(this),t.append(this.fileIO.render(),l("Files")),i.append(this.config.render(),l("Configuration")),e.append(t,i),e}function l(e){return(0,s._N)({class:["title","editor-home-menu-title"]},e)}function o(e){const t=Object.create(c,{editor:{value:this.editor}});return t.init(),t}const c={file:null,title:null,status:null,container:null,mainView:null,infoView:null,files:null,btnLoad:null,btnUnload:null,btnDownload:null,btnEdit:null,selection:null,cache:null,init(){return this.cache=new Map,this},get hasFile(){return this.cache.size>0},get hasSelection(){return!(0,s.le)(this.selection)},getFile(){return this.file},setFile(e){this.file=e,this.refresh()},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,n.$Z)(this.files)):(this.container.classList.add("empty"),(0,n.Cp)(this.files)),this.btnUnload.disabled=!this.hasFile,this.editor.isReady?((0,n.Cp)(this.placeholder),this.placeholder.classList.remove("error")):this.hasFile?(this.editor.hasConceptModel||(this.placeholder.innerHTML=`${h("Missing projections")}`),this.editor.hasProjectionModel||(this.placeholder.innerHTML=`${h("Missing projections")}`),this.placeholder.classList.add("error"),(0,n.$Z)(this.placeholder)):(this.placeholder.innerHTML=`Add your ${h("concepts")} and ${h("projections")} or load a previously saved ${h("model")}`,this.placeholder.classList.remove("error")),this.hasSelection||(0,n.Cp)(this.infoView),this},render(){this.container=(0,s.wC)({class:["editor-file"]});let e=(0,s.wC)({class:["drop-area","editor-file-main"]});this.files=(0,s.w_)({class:["bare-list","editor-file__list"]}),this.placeholder=(0,s.qm)({class:["editor-file-placeholder"],html:`Add your ${h("concepts")}, ${h("projections")} and all other ${h("resources")}`});let t=(0,s.wC)({class:["editor-file-actionbar"]});this.btnUnload=(0,s.ax)({class:["btn","editor-file-actionbar__button","editor-file-actionbar__btn-remove"],title:"Remove all files",dataset:{action:"unload"}}),t.append(this.btnUnload);let i=(0,s.wC)({class:["editor-file__browse"]}),n=(0,s.kQ)({class:["editor-file__browse-instruction"]},"Upload your files");return this.btnLoad=(0,s.ax)({class:["btn","editor-file__browse-button"],title:"Load file in editor",dataset:{action:"load"}},"Browse"),i.append(n,this.btnLoad),e.append(this.files,this.placeholder,i),this.container.append(t,e),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.ep)(this.files)},selectItem(e){if(!this.cache.has(e))return null;let t=this.cache.get(e);(0,s.Re)(this.selection)&&this.selection.classList.remove("selected"),this.selection=t,this.selection.classList.add("selected"),this.displayInfo(e),this.refresh()},addFile(e,t,i){let n=(0,s.HV)({class:["editor-file__list-item",`editor-file__list-item--${e}`],dataset:{context:"menu",action:`open-${e}`,status:"active"}}),r=(0,s.oL)({class:["ico","ico-file","editor-file__list-item-icon"]}),a=(0,s.kQ)({class:["editor-file__list-item-type"]},(0,s.XI)(t,e)),l=(0,s.ax)({class:["editor-file__list-item__btn-remove"],dataset:{action:`unload-${e}`}},(0,s.oL)({class:["ico","ico-delete"],dataset:{ignore:"all"}},"✖"));n.append(r,a,l),this.files.append(n),this.cache.set(e,n),this.refresh()},removeFile(e,t){if(!this.cache.has(e))return;let i=this.cache.get(e);(0,s.ep)(i).remove(),this.cache.delete(e),this.refresh()},bindEvents(){this.editor.registerHandler("editor.load@post",(e=>{this.editor.hasConceptModel&&this.editor.hasProjectionModel})),this.container.addEventListener("dragenter",(e=>{this.container.classList.add("highlight"),e.preventDefault(),e.stopPropagation()}),!1),this.container.addEventListener("dragleave",(e=>{this.container.classList.remove("highlight"),e.preventDefault(),e.stopPropagation()}),!1),this.container.addEventListener("dragover",(e=>{this.container.classList.add("highlight"),e.preventDefault(),e.stopPropagation()}),!1),this.container.addEventListener("drop",(e=>{this.container.classList.remove("highlight");let t=e.dataTransfer.files[0];if(!t.name.endsWith(".json"))return void this.notify("This file is not supported. Please use a .json file");let i=new FileReader;i.onload=e=>{this.editor.load(i.result,this.type)},i.readAsText(t),e.preventDefault(),e.stopPropagation()}),!1)}};function h(e){return(0,s.u4)({class:["text-bf"]},e).outerHTML}function u(){const e=Object.create(d,{editor:{value:this.editor}});return e.init(),e}const d={file:null,title:null,status:null,container:null,mainView:null,infoView:null,conceptList:null,selection:null,placeholder:null,cache:null,init(){return this.cache=new Map,this},get hasFile(){return this.cache.size>0},get hasSelection(){return!(0,s.le)(this.selection)},refresh(){return this.hasFile?(this.container.classList.remove("empty"),(0,n.Cp)(this.placeholder),(0,n.$Z)(this.conceptList)):(this.container.classList.add("empty"),(0,n.$Z)(this.placeholder),(0,n.Cp)(this.conceptList)),this.hasSelection||(0,n.Cp)(this.infoView),this},render(){return this.container=(0,s.wC)({class:["editor-config"]}),this.mainView=(0,s.wC)({class:["editor-config-main"]}),this.infoView=(0,s.wC)({class:["editor-config-info"]}),this.conceptList=(0,s.w_)({class:["bare-list","editor-config__list"]}),this.placeholder=(0,s.qm)({class:["editor-config-placeholder"],html:`${h("No concept found")}. Please upload your files.`}),this.mainView.append(this.conceptList,this.placeholder),this.container.append(this.mainView,this.infoView),this.bindEvents(),this.refresh(),this.container},clear(){(0,s.ep)(this.conceptList),(0,s.ep)(this.infoView),this.cache.clear(),this.refresh()},selectItem(e){if(!this.cache.has(e))return null;let t=this.cache.get(e);return(0,s.Re)(this.selection)&&this.selection.classList.remove("selected"),this.selection=t,this.selection.classList.add("selected"),this.refresh(),e},showInfo(e){let t=p(this.editor.conceptModel.getCompleteModelConcept(e),(0,s.t4)("#concept-schema"));(0,s.ep)(this.infoView).append(t),(0,n.$Z)(this.infoView)},addItem(e){let t=(0,s.kQ)({class:["loaded-element-name","fit-content"]},e.name),i=(0,s.HV)({class:["loaded-element",`loaded-element--${this.type}`],dataset:{context:"menu",action:"open-concept",concept:e.name,status:"active"}}),n=(0,s.ax)({class:["btn","file-section__actionbar-button","file-section__actionbar-button--edit"],title:`Reload the ${this.type}`,dataset:{context:"menu",action:"open-concept",concept:e.name}});i.append(t,n),this.conceptList.append(i),this.cache.set(e.name,i),this.refresh()},bindEvents(){}};function p(e,t){if((0,s.le)(e))throw new TypeError("Bad argument: The 'schema' is missing");if(!(0,s.Re)(t))throw new TypeError("Bad argument: The given 'template' is not a valid HTML Element");const i=(0,s.jC)(t);return(0,s.$3)("[data-if]",i).forEach(((t,i)=>{let n=t.dataset.if;(0,s.RI)(e,n)||t.remove()})),(0,s.$3)("[data-name]",i).forEach(((t,i)=>{let s=t.dataset.name;t.textContent=e[s]})),(0,s.$3)("[data-attr]",i).forEach(((t,i)=>{let s=t.dataset.attr,[n,r]=s.split(":"),a=(t=>t.startsWith("$")?e[t.substring(1)]:t)(r);delete t.dataset.attr,t.dataset[n]=a})),(0,s.$3)("[data-bind]",i).forEach(((t,i)=>{let n=t.dataset.bind;if(!(0,s.RI)(e,n))return;let r=(0,s.sb)("[data-item]",t),a=r.dataset.item,l=(0,s.t4)(`#${a}`);e[n].forEach((e=>{r.append(p(e,l))}))})),i}function m(e,t){const{name:i,object:n,id:r}=t,a=(0,s.HV)({class:["selector-concept",`selector-concept--${e}`],title:t.getName(),dataset:{concept:r,object:n}});var l=(0,s.kQ)({class:["selector-concept-content"]},t.getName());a.append(l),"ancestor"===e&&l.classList.add("fit-content");const o=(0,s.oL)({class:["selector-concept-status"]});if(t.hasError){o.classList.add("error");let e=(0,s.w_)({class:["bare-list","selector-concept-status__errors"]});t.errors.forEach((t=>{let i=(0,s.HV)({class:["selector-concept-status__error"]},t);i.style.minWidth=`${Math.min(.5*t.length,30)}em`,e.append(i)})),o.append(e),a.classList.add("error")}else o.classList.add("valid"),a.classList.add("valid");return a.append(o),a.addEventListener("mouseenter",(e=>{let t=(0,s.sb)(`.projection[data-concept="${r}"]`,this.editor.body);t&&this.editor.highlight(t)})),a.addEventListener("mouseleave",(e=>{this.editor.unhighlight()})),a.addEventListener("click",(e=>{let t=(0,s.sb)(`.projection[data-concept="${r}"]`,this.editor.body);t&&t.focus()})),a}const f={container:null,title:null,conceptList:null,header:null,body:null,get isRendered(){return(0,s.Re)(this.container)},init(e={}){return this.schema=e,this},update(){},refresh(){const{activeInstance:e,activeConcept:t,hasActiveInstance:i,hasActiveConcept:n}=this.editor;if(!i||!n)return(0,s.ep)(this.conceptList),this;const r=e.concept,a=(0,s.DZ)();let l=m.call(this,"root",r);if(a.append(l),r===t&&l.classList.add("selector-concept--active"),r===t)return(0,s.ep)(this.conceptList).append(a),this;if(!t.hasParent())return(0,s.ep)(this.conceptList).append(a),this;let o=t.getParent(),c=[];for(;o&&o!==r;)c.unshift(o),o=o.getParent();return c.forEach((e=>{a.append(m.call(this,"ancestor",e))})),l=m.call(this,"active",t),a.append(l),(0,s.ep)(this.conceptList).append(a),this},render(){const e=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-breadcrumb"]})),(0,s.Re)(this.notification)||(this.notification=(0,s.wC)({class:["notification","breadcrumb-notification"]}),e.append(this.notification));const t=(0,s.kQ)({class:["breadcrumb-title","hidden"],dataset:{ignore:"all"}},"Breadcrumb");return e.append(t),(0,s.Re)(this.conceptList)||(this.conceptList=(0,s.w_)({class:["bare-list","selector-concepts"]}),e.append(this.conceptList)),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.update(),this.refresh(),this.container},bindEvents(){}},g={schema:null,isOpen:!1,visible:!0,btnStart:null,logList:null,init(e){return e&&(this.schema=e),this},get isRendered(){return(0,s.Re)(this.container)},add(e,t,i=n.hi.NORMAL){if(!Array.isArray(e))return;let r=(0,s.w_)({class:["bare-list","log-item-messages"]});e.forEach((e=>r.append((0,s.HV)({class:["log-item-message"]},e))));let a=(0,s.HV)({class:["log-item",`log-item--${i}`]}),l=(0,s.ax)({class:["btn","btn-delete"],dataset:{action:"delete",target:"parent"}},"✖"),o=(0,s.kQ)({class:["log-item__name"],dataset:{action:"delete",target:"parent"}},`${(0,s.XI)(t,"Log")} (${(0,s.iG)(Date.now())})`);return a.append(l,o,r),this.logList.append(a),this.refresh(),this},clear(){return(0,s.ep)(this.logList),this},update(){},render(){const e=(0,s.DZ)();return(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-log"]})),(0,s.Re)(this.logList)||(this.logList=(0,s.w_)({class:["bare-list","log-list"]}),e.append(this.logList)),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},refresh(){return this.logList.hasChildNodes()?this.show():this.hide(),this},bindEvents(){}},b={container:null,list:null,editor:null,dataList:null,fetch:null,init(e){return this.fetch=e,this},render(){const e=(0,s.DZ)();return(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["container","container--editor-selectors"]})),(0,s.Re)(this.list)||(this.list=(0,s.w_)({class:["bare-list","editor-selectors","font-ui"]}),e.append(this.list)),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},refresh(){return this},update(){this.dataList=this.fetch(),(0,s.ep)(this.list);let e=(0,s.XI)(this.editor.getConfig("concept"),{});return this.dataList.forEach((t=>{const{concept:i,accept:n}=t;let r=(0,s.mg)({class:["title","editor-selector__title"]},`${a=t.name,(0,s.RI)(e,a)?e[a].name:a}`);var a;i&&r.append((0,s.kQ)({class:["editor-selector__title-concept"]},(i.name||i.prototype).replace(" ","-").toLowerCase())),n&&r.append((0,s.kQ)({class:["editor-selector__title-accept"]},n.name)),(0,s.ax)({class:["btn","editor-selector__header-button","editor-selector__header-button--info"],title:`View ${t.name||t.type} info`,dataset:{action:"collapse",rel:"parent",target:"selector"}},"i");let l=(0,s.dc)({class:["title","editor-selector__header"],title:`Expand/Collapse ${this.type}`},[r]),o=v[this.type],c=(0,s.wC)({class:["editor-selector__action-bar"]},o.call(this,t)),h=(0,s.HV)({class:["editor-selector","collapsed","font-ui"],tabindex:0,dataset:{type:this.type,alias:`${t.name||t.type}`,name:"selector",projection:t.id}},[l,c]);this.list.append(h)})),this.refresh(),this},show(){return(0,n.$Z)(this.container),this},hide(){return(0,n.Cp)(this.container),this},bindEvents(){}},v={projection:function(e){const t=(0,s.DZ)();let i=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"edit:projection",id:e.id}},"Edit");return t.append(i),t},value:function(e){const t=(0,s.DZ)();let i=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"create-instance:value",id:e.id}},(0,s.oL)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+")),n=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],dataset:{action:"copy:value",id:e.id}},(0,s.oL)({class:["ico","ico-copy","btn-content"],dataset:{ignore:"all"}})),r=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--delete"],dataset:{action:"delete:value",id:e.id}},(0,s.oL)({class:["ico","ico-delete","btn-content"],dataset:{ignore:"all"}},"✖"));return t.append(r,n,i),t},concept:function(e){const t=(0,s.DZ)();let i=this.editor.projectionModel.hasProjectionSchema(e),n=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--clone"],disabled:!i,title:`Create an instance of "${e.name}"`,dataset:{action:"create-instance",concept:e.name}},(0,s.oL)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+"));return i||(n.title=`The concept ${e.name} has no projection`),t.append(n),t},resource:function(e){const{name:t,type:i,required:n}=e,r=(0,s.DZ)();let a=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--add"],dataset:{action:"load-resource",id:t}},(0,s.oL)({class:["ico","ico-plus","btn-content"],dataset:{ignore:"all"}},"+")),l=(0,s.ax)({class:["btn","editor-selector__action-bar-button","editor-selector__action-bar-button--delete"],dataset:{action:"delete:resource",id:t}},(0,s.oL)({class:["ico","ico-delete","btn-content"],dataset:{ignore:"all"}},"✖"));return this.editor.getResource(t)?r.append(l):r.append(a),r}},y={editor:null,valueCount:0,fileCount:0,container:null,title:null,visible:!0,tabs:null,tabConcept:null,tabValue:null,tabProjection:null,tabResource:null,tabConceptNotification:null,tabValueNotification:null,tabProjectionNotification:null,tabResourceNotification:null,activeTab:null,activeTabValue:null,menu:null,header:null,body:null,btnHome:null,btnSave:null,btnClose:null,get isRendered(){return(0,s.Re)(this.container)},init(e){return e&&(this.editor=e),this._conceptSelector=function(e,t,i){return Object.create(b,{object:{value:"selector"},model:{value:void 0},type:{value:"concept"},editor:{value:t}})}(0,this.editor).init((()=>this.editor.isReady?this.editor.conceptModel.getSchema("concrete").filter((e=>e.root)):[])),this},render(){const e=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-header"],dataset:{name:"editor-header",alias:"header"}})),(0,s.Re)(this.title)||(this.title=(0,s.kQ)({class:["editor-header-title"]},"Gentleman")),(0,s.Re)(this.menu)||(this.menu=(0,s.wC)({class:["editor-header-left"]},[this.title]));let t=(0,s.wC)({class:["editor-toolbar"]},this.editor.getConfig("toolbar").map((e=>(0,s.ax)({class:(0,s.XI)(e.class,[]),dataset:{name:e.name,action:e.action}},e.content))));return(0,s.Re)(this.header)||(this.header=(0,s.wC)({class:["editor-header-menu"]},[this.menu,t]),e.append(this.header)),(0,s.Re)(this.body)||(this.body=(0,s.wC)({class:["editor-header-main"]}),e.append(this.body)),(0,s.Re)(this._conceptSelector.container)||this.body.append(this._conceptSelector.render()),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},refresh(){let e=(0,s.XI)(this.editor.getConfig("settings"),!0),t=(0,s.XI)(this.editor.getConfig("header"),!0);return this.editor.hasConceptModel?(this._conceptSelector.update(),(0,n.$Z)(this.body)):(0,n.Cp)(this.body),!1===e&&(0,n.Cp)(this.btnHome),!1===t&&(0,n.Cp)(this.body),this},show(e){if(!(0,s.Re)(this[e]))return(0,n.$Z)(this.container),this.visible=!0,this;(0,n.$Z)(this[e])},hide(e){if(!(0,s.Re)(this[e]))return(0,n.Cp)(this.container),this.visible=!1,this;(0,n.Cp)(this[e])},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},bindEvents(){}};var w=0;const E={createInstance(e,t,i){if((0,s.le)(e))return this.notify("The concept is not valid",n.k$.ERROR),!1;let r="concept"===e.type?e:this.createConcept(e),a=t;(0,s.le)(a)&&this.hasProjectionModel&&(a=this.createProjection(r).init());let l=Object.create(C,{id:{value:"instance"+w++},object:{value:"environment"},name:{value:"editor-instance"},type:{value:"instance"},concept:{value:r,writable:!0},projection:{value:a,writable:!0},editor:{value:this}});const o=Object.assign({type:"concept",resize:!0,maximize:!0,close:"DELETE-CONCEPT"},i);return l.init(o),this.addInstance(l),l},getInstance(e){return this.instances.get(e)},addInstance(e){return e.isRendered||this.instanceSection.append(e.render()),this.instances.set(e.id,e),"tab"===this.status.view&&this.status.addView(e),this.updateActiveInstance(e),this.refresh(),this},removeInstance(e){let t=this.getInstance(e);return!(0,s.le)(t)&&(t===this.activeInstance&&(this.activeInstance=null),t.view&&(0,s.ep)(t.view).remove(),this.instances.delete(e),this.refresh(),!0)},moveInstance(e,t){return this.instanceSection.children[t].before(e),this},swapInstance(e,t){let i=Array.from(this.instanceSection.children);const s=i.indexOf(e),n=i.indexOf(t);return this.moveInstance(t,s),this.moveInstance(e,n),this}},C={window:null,container:null,title:null,visible:!0,menu:null,header:null,body:null,btnMaximize:null,btnClose:null,size:1,fullscreen:!1,collapsed:!1,schema:null,ctype:null,get isRendered(){return(0,s.Re)(this.container)},init(e={}){return this.ctype=(0,s.XI)(e.type,"concept"),this.schema=e,this},collapse(){return(0,n.wo)(this.container),this.collapsed=!0,this.fullscreen=!1,this.size="normal",this.refresh(),this},expand(){return(0,n.jn)(this.container),this.collapsed=!1,this.refresh(),this},changeSize(e){this.size=e,"fullscreen"===e?(this.fullscreen=!0,this.container.style.removeProperty("width"),this.container.style.removeProperty("height")):this.fullscreen=!1,this.refresh()},show(){return(0,n.$Z)(this.container),this.visible=!0,this},hide(){return(0,n.Cp)(this.container),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},refresh(){return this.container.dataset.size=`${this.size}`,(0,s.le)(this.projection)&&(this.body.textContent="No projection found"),Array.from(this.editor.instances).some((e=>e.fullscreen))?this.editor.instanceSection.classList.add("fullscreen"):this.editor.instanceSection.classList.remove("fullscreen"),this},render(){const e=(0,s.DZ)(),{name:t}=this.concept,i=t.toLowerCase();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-concept",`editor-concept--${this.ctype}`],tabindex:0,dataset:{nature:"concept-container",type:this.ctype,size:1}})),(0,s.Re)(this.header)||(this.header=(0,s.dc)({title:"concept"===this.schema.type?`Instance of "${i}"`:`Linked instance of "${i}"`,class:["editor-concept-header"]}),e.append(this.header)),(0,s.Re)(this.btnClose)||(this.btnClose=(0,s.ax)({class:["btn","editor-concept-toolbar__btn-delete"],title:`Delete the instance "${i}"`,dataset:{action:"close",context:this.type,id:this.id}}),"projection"===this.schema.type&&(this.btnClose.title=`Close the linked instance "${i}"`)),(0,s.Re)(this.btnMaximize)||(this.btnMaximize=(0,s.ax)({class:["btn","editor-concept-toolbar__btn-maximize"],title:`Maximize ${t.toLowerCase()}`,dataset:{action:"maximize",context:this.type,id:this.id}})),this.title=(0,s._N)({class:["title","editor-concept-title","fit-content"],dataset:{nature:"editable",id:this.id}},(0,s.XI)(this.schema.title,t));let r=(0,s.wC)({class:["editor-concept-toolbar"]},[this.btnMaximize,this.btnClose]);return(0,s.ep)(this.header).append(this.title,r),this.body&&this.body.remove(),this.projection?this.body=this.projection.render():this.body=(0,s.qm)(),e.append(this.body),e.hasChildNodes()&&(this.container.appendChild(e),this.bindEvents()),(0,n.n2)(this.container),this.refresh(),this.container},clear(){},actionHandler(e){switch(e){case"collapse":this.collapsed?this.expand():this.collapse();break;case"maximize":this.fullscreen?this.changeSize("normal"):this.changeSize("fullscreen");break;case"close":this.delete()}},delete(){switch(this.schema.close){case"DELETE-CONCEPT":if(!this.concept.delete(!0))return this.editor.notify("The concept could not be deleted",n.k$.ERROR),this;break;case"DELETE-PROJECTION":if(this.projection&&!this.projection.delete())return this.notify("The projection could not be deleted",n.k$.ERROR),this}(0,s.ep)(this.container).remove(),this.editor.removeInstance(this.id),this.window&&this.window.removeInstance(this)},bindEvents(){this.container.addEventListener("focusin",(e=>{this.editor.updateActiveInstance(this)}))}};var j=0;const L={createWindow(e){let t=Object.create(x,{id:{value:"window"+j++},object:{value:"environment"},name:{value:"editor-window"},type:{value:"window"},editor:{value:this}});return t.refname=e,t.init(),this.addWindow(t),t},getWindow(e){return this.windows.get(e)},findWindow(e){return Array.from(this.windows.values()).find((t=>t.refname===e))},addWindow(e){return e.isRendered||this.body.append(e.render()),this.windows.set(e.id,e),"tab"===this.status.view&&this.status.addView(e),this.refresh(),this},removeWindow(e){let t=this.getWindow(e);return!(0,s.le)(t)&&(t===this.activeWindow&&(this.activeWindow=null),t.view&&(0,s.ep)(t.view).remove(),this.windows.delete(e),this.refresh(),!0)},moveWindow(e,t){return this.body.children[t].before(e),this},swapWindow(e,t){let i=Array.from(this.body.children);const s=i.indexOf(e),n=i.indexOf(t);return this.moveWindow(t,s),this.moveWindow(e,n),this}},x={container:null,title:null,visible:!0,instances:null,menu:null,header:null,body:null,btnClose:null,maxInstance:1,get isRendered(){return(0,s.Re)(this.container)},init(e={}){return this.ctype=(0,s.XI)(e.type,"concept"),this.schema=e,this.instances=new Set,this},isEmpty(){return 0===this.instances.size},show(){return(0,n.$Z)(this.container),this.visible=!0,this},hide(){return(0,n.Cp)(this.container),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},close(){(0,s.ep)(this.container).remove(),this.editor.removeWindow(this.id)},refresh(){return this.isEmpty()?this.hide():this.show(),this},render(){const e=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-window"],tabindex:-1})),(0,s.Re)(this.header)||(this.header=(0,s.dc)({class:["editor-window-header"]}),e.append(this.header)),(0,s.Re)(this.title)||(this.title=(0,s._N)({class:["title","editor-window-title","fit-content"]})),(0,s.Re)(this.btnClose)||(this.btnClose=(0,s.ax)({class:["btn","editor-window-header__btn-delete"],title:"Close the window",dataset:{action:"close",context:this.type,id:this.id}}));let t=(0,s.wC)({class:["editor-window-toolbar"]},[this.btnClose]);return(0,s.ep)(this.header).append(this.title,t),e.hasChildNodes()&&(this.container.appendChild(e),this.bindEvents()),this.refresh(),this.container},getInstance(e){return(0,s.le)(e)?null:Array.from(this.instances).find((t=>t.id===e))},addInstance(e){if(!(0,s.le)(e)&&!this.instances.has(e))return this.instances.add(e),e.window=this,this.container.append(e.container),this.refresh(),!0},removeInstance(e){if(!(0,s.le)(e)&&this.instances.has(e))return this.instances.delete(e),this.refresh(),!0},actionHandler(e){switch(e){case"close":this.close()}},bindEvents(){}},R={modelstatus:null,editorstatus:null,notification:null,views:null,view:"grid",viewContainer:null,viewList:null,viewItem:null,activeViewItem:null,groupList:null,groupItem:null,activeGroupItem:null,visible:!0,container:null,get isRendered(){return(0,s.Re)(this.container)},init(){return this.views=new Map,this},show(){return(0,n.$Z)(this.container),this.visible=!0,this},hide(){return(0,n.Cp)(this.container),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},updateActiveView(){"tab"===this.view&&(this.editor.instances.forEach((e=>{e!==this.editor.activeInstance&&(e.view.classList.remove("active"),e.hide())})),this.editor.activeInstance.view.classList.add("active"),this.editor.activeInstance.show()),this.editor.refresh()},addView(e){if((0,s.le)(e))return!1;let t=e.title.textContent,i=(0,s.oL)({class:["ico","ico-delete"]},"✖"),n=(0,s.ax)({class:["btn","btn-close"]},i),r=(0,s.wC)({class:[`editor-view-${this.view}list-item__content`,"fit-content"]},t),a=(0,s.HV)({class:[`editor-view-${this.view}list-item`],title:e.title.textContent},[r,n]);e.view=a,a.addEventListener("click",(t=>{if(function(e){const t=e=>e===a||e===n;return t(e)?e:(0,s.wr)(e,(e=>t(e)),5)}(t.target)===n){let t=a.previousSibling||a.nextSibling;e.delete(),null===this.editor.activeInstance&&t&&t.click()}else this.editor.updateActiveInstance(e)})),this.tabView.append(a)},changeView(e){if(e===this.view)return this;this.view=e,(0,n.hF)(this.viewItem),this.viewItem=this.views.get(this.view),(0,n.Ys)(this.viewItem),(0,s.ep)(this.editor.viewSection),"tab"===e?(this.tabView=(0,s.w_)({class:["bare-list","editor-view-tablist"]}),(0,s.ep)(this.tabView),this.editor.instances.forEach((e=>{e.expand(),this.addView(e)})),this.editor.viewSection.append(this.tabView)):"grid"===e&&this.editor.instances.forEach((e=>{e.show()})),this.updateActiveView()},addGroup(){(0,s.HV)({class:["editor-footer-group"]})},notify(e,t=4500){let i=e;const n="open";if(this.notification.classList.contains(n))return!1;this.notification.appendChild(i),setTimeout((()=>{this.notification.classList.add(n),this.container.classList.add("menu--notifying")}),50),setTimeout((()=>{this.notification.classList.remove(n),this.container.classList.remove("menu--notifying"),setTimeout((()=>{(0,s.ep)(this.notification)}),500)}),t)},refresh(){const{conceptModel:e}=this.editor;if(this.editor.isReady){if(e.hasError){this.modelstatusBadge.classList.add("error"),this.modelstatusBadge.classList.remove("valid"),this.container.classList.add("error");let t=e.concepts.filter((e=>e.hasError)).length;this.modelstatusInfo.textContent=`${t} ${function(e,t,i){if(1===i)return e;let s="s".split("|");return 1===s.length?e+s[0]:e.substring(0,e.lastIndexOf(s[0]))+s[1]}("error",0,t)}`}else this.modelstatusBadge.classList.add("valid"),this.modelstatusBadge.classList.remove("error"),this.container.classList.remove("error"),(0,s.ep)(this.modelstatusInfo),this.editor.logs.clear();if(this.editor.hasError){this.editorstatusBadge.classList.add("error"),this.editorstatusBadge.classList.remove("valid"),this.container.classList.add("error");let e=this.editor.errors.length;this.editorstatusInfo.textContent=`${e}`}else this.editorstatusBadge.classList.add("valid"),this.editorstatusBadge.classList.remove("error"),this.container.classList.remove("error"),(0,s.ep)(this.editorstatusInfo),this.editor.logs.clear()}},render(){const e=(0,s.DZ)();if((0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["editor-statusbar"]})),(0,s.Re)(this.badgeContainer)||(this.badgeContainer=(0,s.wC)({class:["editor-statusbar-badge-container"]}),e.appendChild(this.badgeContainer)),(0,s.Re)(this.modelstatus)||(this.modelstatus=(0,s.wC)({class:["editor-statusbar-model"]}),this.modelstatusBadge=(0,s.oL)({class:["editor-statusbar-model-badge"]}),this.modelstatusInfo=(0,s.wC)({class:["editor-statusbar-model-info"]}),this.modelstatus.append(this.modelstatusBadge,this.modelstatusInfo),this.badgeContainer.appendChild(this.modelstatus)),(0,s.Re)(this.editorstatus)||(this.editorstatus=(0,s.wC)({class:["editor-statusbar-global"]}),this.editorstatusBadge=(0,s.oL)({class:["editor-statusbar-global-badge"]}),this.editorstatusInfo=(0,s.wC)({class:["editor-statusbar-global-info"]}),this.editorstatus.append(this.editorstatusBadge,this.editorstatusInfo),this.badgeContainer.appendChild(this.editorstatus)),(0,s.Re)(this.viewContainer)||(this.viewContainer=(0,s.wC)({class:["editor-statusbar-viewer-container"]}),e.appendChild(this.viewContainer)),!(0,s.Re)(this.btnGroup)){let e=(0,s.oL)({class:["ico","ico-plus","btn-content"],title:"Add a group",dataset:{ignore:"all"}},"+");this.btnGroup=(0,s.ax)({class:["editor-statusbar-viewer__button-add"],dataset:{action:"add-group"}},e)}return(0,s.Re)(this.groupContainer)||(this.groupContainer=(0,s.wC)({class:["editor-footer-group"]})),(0,s.Re)(this.viewList)||(this.viewList=(0,s.w_)({class:["bare-list","editor-statusbar-viewers"]}),this.viewContainer.appendChild(this.viewList)),["grid","tab"].forEach((e=>{let t=(0,s.HV)({class:["editor-statusbar-viewer"],dataset:{type:"viewer",action:"change-view",value:e}},e);this.views.set(e,t),this.viewList.append(t)})),this.viewItem=this.views.get(this.view),this.viewItem.classList.add("selected"),e.hasChildNodes()&&(this.container.append(e),this.bindEvents()),this.refresh(),this.container},bindEvents(){function e(e,t){let i=(0,s.UF)({class:["link","error-message__link"]},e);const n=`.projection[data-concept="${t}"]`;return i.addEventListener("mouseenter",(e=>{let t=(0,s.sb)(n,this.editor.body);t&&this.editor.highlight(t)})),i.addEventListener("mouseleave",(e=>{this.editor.unhighlight()})),i.addEventListener("click",(e=>{let t=this.editor.resolveElement((0,s.sb)(n,this.editor.body));t&&t.focus()})),i}this.modelstatus.addEventListener("click",(t=>{if(!this.editor.conceptModel.hasError)return;let i=[];this.editor.conceptModel.concepts.forEach((t=>{t.hasError&&i.push(...t.errors.map((i=>{let n=e.call(this,t.getName(),t.id);return(0,s.kQ)({class:["error-message"]},[n,`: ${i}`])})))})),this.editor.logs.clear(),this.editor.logs.add(i,"Validation error",n.hi.ERROR)})),this.editorstatus.addEventListener("click",(e=>{if(!this.editor.hasError)return;let t=[];t.push(...this.editor.errors.map((e=>(0,s.kQ)({class:["error-message"]},[`${e.message}`])))),this.editor.logs.clear(),this.editor.logs.add(t,"Validation error",n.hi.ERROR)})),this.editor.registerHandler("editor.instance@active:updated",(()=>{this.updateActiveView()}))}},I={container:null,isOpen:!1,visible:!0,show(){return(0,n.$Z)(this.container),this.visible=!0,this},hide(){return(0,n.Cp)(this.container),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},open(){return this.container.classList.add("open"),this.show(),this.isOpen=!0,this.editor.refresh(),this},close(){return this.container.classList.remove("open"),this.hide(),this.isOpen=!1,this.editor.refresh(),this}};function _(){return Object.create(y,{object:{value:"environment"},name:{value:"editor-header"},editor:{value:this}})}function A(){return Object.create(f,{object:{value:"environment"},name:{value:"editor-breadcrumb"},type:{value:"breadcrumb"},editor:{value:this}})}function O(){return Object.assign(Object.create(I,{object:{value:"environment"},name:{value:"editor-home"},type:{value:"home"},editor:{value:this}}),r)}function S(){return Object.create(R,{object:{value:"environment"},name:{value:"editor-status"},type:{value:"status"},editor:{value:this}})}function V(){return Object.assign(Object.create(I,{object:{value:"environment"},name:{value:"editor-log"},type:{value:"log"},editor:{value:this}}),g)}const T={getHandlers(e){return(0,s.XI)(this.handlers.get(e),[])},triggerEvent(e,t,i=!0){const{name:n,options:r,args:a}=e,l=this.getHandlers(n),o=(0,s.mf)(t);let c=!1;return l.forEach((e=>{let s=e.call(this,a,r);!1!==s?i&&o&&t.call(this,s):c=!0})),!c&&(!i&&o&&t.call(this),!0)},registerHandler(e,t){return this.hasHanlder(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),!0},unregisterHandler(e,t){if(!this.hasHanlder(e))return!1;let i=this.getHandlers(e);for(let e=0;e<i.length;e++)if(i[e]===t)return i.splice(e,1),!0;return!1},hasHanlder(e){return this.handlers.has(e)}};var k=i(914);const M={create(e,t){const i=Object.create(this);return i.concept=e,i.schema=t,i},model:null,schema:null,source:null,id:null,value:null,object:"structure",init(e){throw new Error("This function has not been implemented")}};Object.defineProperty(M,"model",{get(){return this.concept.model}}),Object.defineProperty(M,"name",{get(){return this.schema.name}}),Object.defineProperty(M,"required",{get(){return(0,s.XI)(this.schema.required,!0)}});const $={object:"attribute",target:null,init(e){return this.target=this.model.createConcept(this.schema.target,{value:(0,s.XI)(e,this.schema.value),parent:this.concept,ref:this}),this},getValue(){return this.target.getValue()},hasValue(){return this.target.hasValue()},setValue(e){this.target.setValue(e)},getTarget(){return this.target},copy(){return this.target.hasValue()?this.target.copy(!1):null},clone(){return this.target.hasValue()?this.target.clone():null},export(){return this.target.hasValue()?{id:this.target.id,name:this.target.name}:null},toString(){return{[`attribute.${this.name}`]:this.target.toString()}},toXML(){return this.target.hasValue()?this.target.toXML():""}},H=Object.assign(Object.create(M),$),P={attributes:null,attributes_created:null,initAttribute(){return this.attributes=[],this.attributes_created=new Set,this.attributes_updated=new Set,this.attributes_deleted=new Set,Array.isArray(this.attributeSchema)&&this.attributeSchema.filter((e=>(0,s.XI)(e.required,!0))).forEach((e=>this.createAttribute(e.name))),this},getAttributes(){return this.attributes},getAttribute(e){if((0,s.le)(e))throw new TypeError("Bad argument");return this.getAttributeByName(e)},getAttributeSchema(e){if((0,s.hr)(e))throw new TypeError("Bad argument");if(!this.hasAttribute(e))throw new Error(`Attribute '${e}' does not exist`);return(0,s.kI)(this.attributeSchema.find((t=>t.name===e)))},getAttributeByName(e){if((0,s.hr)(e))throw new TypeError("Bad argument");var t=this.attributes.find((t=>t.name===e));return(0,s.le)(t)&&(t=this.createAttribute(e)),t},createAttribute(e,t){if(!this.hasAttribute(e))throw new Error(`Attribute not found: The concept '${this.name}' does not contain an attribute named '${e}'`);if(this.isAttributeCreated(e)){let i=this.getAttributeByName(e);if(t){let e=this.model.getValue(t);i.target.initValue(e)}return i}const i=this.getAttributeSchema(e);let s=this.model.getValue(t);var n=H.create(this,i).init(s);return this.addAttribute(n),n},addAttribute(e){if((0,s.le)(e)||"attribute"!==e.object)throw new Error("Bad argument: 'attribute' must be an attribute object");return this.attributes.push(e),this.attributes_created.add(e.name),this.notify("attribute.added",e),this},hasAttributes(){return!(0,s.xb)(this.attributeSchema)||!(0,s.xb)(this.attributes)},hasAttribute(e){return-1!==this.attributeSchema.findIndex((t=>t.name===e))},isAttributeRequired(e){const t=this.getAttributeSchema(e);return(0,s.XI)(t.required,!0)},isAttributeCreated(e){return this.attributes_created.has(e)},listAttributes(){const e=[];return this.attributeSchema.forEach((t=>{e.push({type:"attribute",name:t.name,target:t.target,accept:t.accept,required:this.isAttributeRequired(name),created:this.isAttributeCreated(name)})})),e},removeAttribute(e){if(this.isAttributeRequired(e))return{message:`The attribute '${e}' is required.`,success:!1};var t=this.attributes.findIndex((t=>t.name===e));if(-1===t)return{message:`The attribute '${e}' was not found.`,success:!1};var i=this.attributes.splice(t,1)[0];return this.attributes_created.delete(e),this.notify("attribute.removed",i),{message:`The attribute '${e}' was successfully removed.`,success:!0}}},N={listeners:null,initObserver(){return this.listeners=[],this},register(e){return this.listeners.includes(e)||this.listeners.push(e),!0},unregister(e){var t=this.listeners.indexOf(e);return-1!==t&&(this.listeners.splice(t,1),!0)},unregisterAll(){this.listeners=[]},notify(e,t){this.listeners.forEach((i=>{i.update(e,t,this)}))}},D={model:null,schema:null,source:null,id:null,name:null,ref:null,actions:null,operations:null,accept:null,parent:null,references:null,errors:null,value:null,values:null,action:null,shadows:null,watchers:null,kind:"concept",init(e={}){return this.accept=e.accept,this.parent=e.parent,this.ref=e.ref,this.properties=(0,s.XI)(this.schema.properties,[]),Array.isArray(e.properties)&&this.properties.push(...e.properties),this.default=(0,s.XI)(this.schema.default,null),this.values=(0,s.XI)(e.values,(0,s.XI)(this.schema.values,[])),this.src=(0,s.XI)(this.schema.src,[]),this.constraint=this.schema.constraint,this.watchers=new Map,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(e.value),this},isRoot(){return(0,s.le)(this.parent)},initValue(){throw new Error("This function has not been implemented")},getName(){return this.ref&&"attribute"===this.ref.object?this.ref.name:this.name},getCandidates(){return this.values.forEach((e=>{(0,s.Kn)(e)&&(e.type="value")})),this.values},getStructure(){return[...this.listAttributes()]},getProperty(e,t){if("refname"===e){if((0,s.le)(this.ref))return;return this.ref.name}if("name"===e)return this.name;if("value"===e)return this.value;if(!this.hasProperty(e))return;let i=this.properties.find((t=>t.name===e));const{type:n,value:r}=i;return"string"===n?B.call(this,r):"number"===n?+r:"boolean"===n?(0,s.sw)(r):r},hasProperty(e){return!!["refname","name","value"].includes(e)||-1!==(0,s.XI)(this.schema.properties,[]).findIndex((t=>t.name===e))},getConstraint(e){if(this.hasConstraint(e))return this.constraint[e]},hasConstraint(e){return!(0,s.le)(this.constraint)&&(!!(0,s.le)(e)||(0,s.RI)(this.constraint,e))},hasParent(){return!this.isRoot()},getParent(e){if(this.isRoot())return null;if((0,s.hr)(e))return this.parent;const t=this.parent;return t.name===e?t:t.getParent(e)},getParentWith(e){if(this.isRoot())return null;if((0,s.hr)(e))return this.parent;const t=this.parent;return t.hasPrototype(e)?t:t.getParentWith(e)},getPrototype(){return(0,s.le)(this.prototype)?null:this.prototype},hasPrototype(e){if((0,s.le)(this.schema.prototype))return!1;if((0,s.le)(e))return!0;let t=this.model.getConceptSchema(this.schema.prototype);for(;!(0,s.le)(t);){if(t.name===e)return!0;t=this.model.getConceptSchema(t.prototype)}return!1},getAncestor(e){const t=[];for(var i=this.getParent(e);i;)t.push(i),i=i.getParent(e);return t},getChildren(e){const t=[];return(0,s.le)(e)?this.getAttributes().forEach((e=>{t.push(e.target)})):this.getAttributes().forEach((i=>{i.target.name===e?t.push(i.target):t.push(...i.target.getChildren(e))})),t},getDescendant(e){const t=[];return this.getChildren(e).forEach((i=>{t.push(i),t.push(...i.getDescendant(e))})),t},propagate(e,t,i){this.watchers.has(e)&&this.signal(e,t,i),this.hasParent()&&this.getParent().propagate(e,t,i)},watch(e,t){this.watchers.has(e)||this.watchers.set(e,[]),this.watchers.get(e).push(t)},signal(e,t,i){this.watchers.has(e)&&this.watchers.get(e).forEach((e=>e(t,this)))},unwatch(e,t){if((0,s.le)(e)||!this.watchers.has(e))return!1;if(!(0,s.mf)(t))return this.watchers.delete(e),!0;let i=this.watchers.get(e).findIndex((e=>e===t));return-1!==i&&(this.watchers.splice(i,1),!0)},done(){this.unregisterAll(),this.watchers.clear()},delete(e=!1){if(!e){const{object:e}=this.ref;let t={success:!0};if("concept"===e?t=this.getParent().removeValue(this):"attribute"===e&&(t=this.getParent().removeAttribute(this.ref.name)),!t.success)return t}this.getChildren().forEach((e=>{e&&e.delete(!0)}));try{this.model.removeConcept(this.id)&&this.notify("delete")}catch(e){return console.error(this),{message:"Concept not found",success:!1}}return{message:`The concept '${this.name}' was successfully deleted.`,success:!0}},copy(e=!0){const t={name:this.name,nature:this.nature};var i=[];return this.getAttributes().forEach((e=>{i.push({name:e.name,value:e.copy(!1)})})),t.attributes=i,e&&this.model.addValue(t),t},clone(){const e={id:this.id,name:this.name};var t=[];return this.getAttributes().forEach((e=>{t.push({name:e.name,value:e.clone()})})),e.attributes=t,e},export(){const e={id:this.id,root:this.isRoot(),name:this.name};var t=[];return this.getAttributes().forEach((e=>{t.push({name:e.name,value:e.export()})})),e.attributes=t,e},toString(){var e={};return this.attributes.forEach((t=>{Object.assign(e,t.toString())})),e},toXML(){let e=this.getName().replace(" ","-");return`<${e} id="${this.id}">`+this.attributes.map((e=>e.toXML())).join("")+`</${e}>`}};function B(e){if((0,s.HD)(e))return e;const{type:t}=e;switch(t){case"concat":return Z.call(this,e.concat)}}function X(e,t){const{type:i}=e;return"string"===i?B.call(this,e.value):"property"===i?this.getProperty(e.name):t||e}function Z(e,t=""){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");return e.length<2?X.call(this,e[0]):e.map((e=>X.call(this,e))).join(t)}const W=Object.assign(D,N,P);Object.defineProperty(W,"attributeSchema",{get(){return this.schema.attributes}}),Object.defineProperty(W,"_prototype",{get(){return this.schema.prototype}}),Object.defineProperty(W,"hasError",{get(){return this.errors&&!(0,s.xb)(this.errors)}});const z={nature:"primitive",init(e={}){return this.parent=e.parent,this.ref=e.ref,this.default=(0,s.XI)(this.schema.default,!0),this.constraint=this.schema.constraint,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){if((0,s.le)(e))return this.value=this.default,this;if((0,s.Kn)(e)){const{id:t="",value:i}=e;t.length>10&&(this.id=t),this.setValue(i)}else this.setValue(e);return this},hasValue(){return!(0,s.le)(this.value)},getValue(){return this.value},setValue(e){let t=(0,s.Kn)(e)?e.value:e;return 200!==this.validate(t)?{success:!1,message:"Validation failed: The value could not be updated."}:(this.value=(0,s.sw)(t),this.notify("value.changed",t),{success:!0,message:"The value has been successfully updated."})},restore(e){const{value:t}=e;this.setValue(t)},update:(e,t)=>!0,getCandidates:()=>[!0,!1],getChildren:e=>[],validate(e){return this.errors=[],(0,s.HD)(e)&&["true","false"].includes(e.toLowerCase())||Number.isInteger(e)&&[1,0].includes(e)||[!0,!1].includes(e)?200:400},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.getValue()};return e&&this.model.addValue(t),t},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let e=this.getName();return`<${e} id="${this.id}">`+this.getValue()+`</${e}>`}},F=Object.assign(Object.create(W),z);function q(e,t){switch(e){case 400:return{success:!1,message:"The value is not a number."};case 401:return{success:!1,message:`Valid values: ${t}`};case 403:return{success:!1,message:`Maximum allowed: ${t.value}.`};case 402:return{success:!1,message:`Minimum allowed: ${t.value}.`};case 404:return{success:!1,message:`Value allowed: ${t.value}.`}}}const U={nature:"primitive",initValue(e){if((0,s.le)(e))return this.value=this.default,this;if((0,s.Kn)(e)){const{id:t="",value:i}=e;t.length>10&&(this.id=t),this.setValue(i)}else this.setValue(e);return this},hasValue(){return"number"==typeof this.value&&!isNaN(this.value)},getValue(){return this.hasValue()?+this.value:null},setValue(e){let t=(0,s.Kn)(e)?e.value:e;const{code:i,ctx:n}=this.validate(t);return this.value!==t&&(this.value=(0,s.hr)(t)?null:+t,this.notify("value.changed",t),this.propagate("value.changed",t,this)),200!==i?{success:!1,message:"Validation failed."}:{success:!0,message:"The value has been successfully updated."}},removeValue(){return this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},restore(e){const{value:t}=e;this.setValue(t)},getCandidates(){return this.values.forEach((e=>{(0,s.Kn)(e)&&(e.type="value")})),this.values},getChildren:e=>[],update:(e,t)=>!0,validate(e){if(this.errors=[],isNaN(e)){let e=400;return this.errors.push(q.call(this,e).message),{code:e}}if(!this.hasConstraint())return{code:200};if(this.hasConstraint("value")){let t=this.getConstraint("value");const{type:i}=t;if("range"===i){const{min:s,max:n}=t[i];if(s&&+e<s.value){let e=402;return this.errors.push(q.call(this,e,s).message),{code:e,ctx:s}}if(n&&+e>n.value){let e=403;return this.errors.push(q.call(this,e,n).message),{code:e,ctx:n}}}else if("fixed"===i){const{value:s}=t[i];if(e!==s){let e=404;return this.errors.push(q.call(this,e,t[i]).message),{code:e,ctx:t[i]}}}}if(this.hasConstraint("values")){let t=this.getConstraint("values").map((e=>Q.call(this,e))).flat(),i=!1;for(let n=0;!i&&n<t.length;n++){const r=t[n];i=(0,s.Kn)(r)?r.value===e:r===e}if(!i){let e=401;return this.errors.push(q.call(this,e,t).message),{code:e,ctx:t}}}return{code:200}},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.getValue()};return e&&this.model.addValue(t),t},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let e=this.getName();return`<${e} id="${this.id}">`+this.getValue()+`</${e}>`}};function Q(e){if("reference"===e.type){let e=[];return this.model.isPrototype("model concept")&&(e=this.model.getConceptsByPrototype("model concept")),e.map((e=>e.getChildren(this.name))).flat().map((e=>e.value))}return e}const G=Object.assign(Object.create(W),U),K={nature:"primitive",reference:null,path:null,init(e={}){return this.parent=e.parent,this.ref=e.ref,this.accept=this.schema.accept,this.path=this.schema.path,this.values=(0,s.XI)(this.schema.values,[]),this.constraint=this.schema.constraint,this.errors=[],this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){return(0,s.le)(e)||this.setValue(e.value),this},restore(e){const{value:t}=e;this.setValue(t)},hasValue(){return!(0,s.hr)(this.value)},getValue(e=!1){return(0,s.le)(this.value)?null:e?this.reference:this.value},removeValue(){return this.reference&&this.reference.unregister(this),this.reference=null,this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},getReference(){return(0,s.le)(this.reference)?null:this.reference},setValue(e,t=!0){let i=(0,s.Kn)(e)?e.id:e;return 200!==this.validate(i)?{success:!1,message:"Validation failed: The value could not be updated."}:(0,s.le)(i)||this.value===i?{success:!0,message:"The value has been ignored."}:(this.reference&&this.reference.unregister(this),this.value=i,this.reference=this.model.getConcept(i),(0,s.le)(this.reference)&&t?setTimeout((()=>this.setValue(e,!1)),20):(this.reference.register(this),this.notify("value.changed",this.reference)),{success:!0,message:"The value has been successfully updated."})},getCandidates(){if((0,s.le)(this.accept))throw new Error("Bad reference: 'accept' property is not defined");var e=J.call(this,this.accept);return this.path&&Y(this,this.path).map((e=>({type:this.accept.type,value:e}))),e},getChildren(e){return(0,s.le)(this.reference)||e&&this.reference.name!==e?[]:[this.reference]},delete(e=!1){if(!e){const{object:e}=this.ref;let t={success:!0};if("concept"===e?t=this.getParent().removeValue(this):"attribute"===e&&(t=this.getParent().removeAttribute(this.ref.name)),!t.success)return t}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(e,t){switch(e){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference)}return!0},validate(e){return this.errors=[],(0,s.le)(e)||this.model.hasConcept(e)?200:(this.errors.push("This element is not valid"),401)},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.getValue()};return e&&this.model.addValue(t),t},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){var e=[];return this.value.forEach((t=>{e.push(t.toString())})),e},toXML(){let e=this.getName();return`<${e} id="${this.id}">`+this.getValue()+`</${e}>`}};function J(e){const{name:t,scope:i,rel:s}=e;return"parent"===s?this.getParent(i).getChildren(t):"children"===s?this.getChildren(t):this.model.isPrototype(t)?this.model.getConceptsByPrototype(t):this.model.getConcepts(t)}function Y(e,t){if((0,s.le)(t))return e;const{target:i,value:n,rel:r}=t;var a=[];return"parent"===r?a.push(e.getParentWith(i)):"children"===r?a.push(...e.getChildren(i)):"property"===r&&a.push(e.getProperty(i)),a.map((e=>Y(e,n))).flat()}const ee=Object.assign({},W,K),te={SUCCESS:200,INVALID_VALUE:401,MIN_CARDINALITY_ERROR:402,MAX_CARDINALITY_ERROR:403,FIX_CARDINALITY_ERROR:404};function ie(e,t){switch(e){case te.INVALID_VALUE:return{success:!1,message:`Valid values: ${t}`};case te.MAX_CARDINALITY_ERROR:return{success:!1,message:`Maximum cardinality: ${this.value.length}/${t.value}.`};case te.MIN_CARDINALITY_ERROR:return{success:!1,message:`Minimum cardinality: ${this.value.length}/${t.value}.`};case te.FIX_CARDINALITY_ERROR:return{success:!1,message:`Fixed cardinality: ${t.value}.`};case te.PATTERN_ERROR:return{success:!1,message:"The value is not valid."}}}const se={nature:"primitive",init(e={}){return this.parent=e.parent,this.ref=e.ref,this.accept=this.schema.accept,this.ordered=(0,s.XI)(this.schema.ordered,!0),this.constraint=this.schema.constraint,this.watchers=new Map,this.value=[],this.initObserver(),this.initAttribute(),this.initValue(e.value),this},initValue(e){this.removeAllElement();let t=ne.call(this);if((0,s.le)(e)){let e=t;for(let t=0;t<e;t++)this.createElement();return this}const{id:i="",name:n,value:r}=e;i.length>10&&(this.id=i);for(let e=0;e<r.length;e++)this.createElement(r[e]);let a=t-r.length;for(let e=0;e<a;e++)this.createElement();return this},hasValue(){return!(0,s.xb)(this.value)},getValue(e=!1){const t=this.value.map((e=>this.model.getConcept(e)));return e?t.map((e=>e.getValue())):t},removeValue(e){return this.hasValue()?(this.removeElement(e),{success:!0,message:"The value has been successfully updated."}):{success:!0,message:"The value has been successfully updated."}},isValidElement(e){const{name:t,accept:i}=this.accept;return this.model.isPrototype(t)?(0,s.le)(i)?this.model.hasPrototype(e.name,t):Array.isArray(i)?i.some((t=>t.name===e.name)):i.name===e.name:this.accept.name===e.name},setValue(e){let t=e.value||e;if(Array.isArray(t)){this.removeAllElement();for(let e=0;e<t.length;e++)this.createElement(t[e])}else this.isValidElement(t)&&this.createElement(t)},restore(e){const{value:t}=e;t.forEach(((e,t)=>{this.value.includes(e.id)||this.createElement(e)}))},getElements(){return this.value.map((e=>this.model.getConcept(e)))},getElement(e){var t=this.value.find((t=>t===e));if(!(0,s.le)(t))return this.model.getConcept(t)},getElementAt(e){if(!(e<0||e>=this.value.length))return this.model.getConcept(this.value[e])},getFirstElement(){return this.getElementAt(0)},getLastElement(){return this.getElementAt(this.count-1)},addElement(e){return!(0,s.le)(e)&&(this.value.push(e.id),e.index=this.value.length-1,this.validate(),this.notify("value.added",e),this.propagate("value.changed",e,this),!0)},addElementAt(e,t=0){return(0,s.le)(e)&&(e=this.createElement()),this.value.splice(t,0,e.id),this.validate(),this.notify("value.added",e),this.propagate("value.changed",e,this),this},swapElement(e,t){if(!this.ordered)return this;let i=this.value[e];this.value[e]=this.value[t],this.value[t]=i;let s=this.getElementAt(e);s.index=+e;let n=this.getElementAt(t);return n.index=+t,this.notify("value.swapped",[s,n]),this},removeElement(e){let t=(0,s.XI)(e.index,this.value.indexOf(e.id));return-1!==t&&this.removeElementAt(t)},removeElementAt(e){let t=this.getElementAt(e);if((0,s.le)(t))return{message:`The element at index '${e}' was not found.`,success:!1};t.delete(!0),this.value.splice(e,1);const i=this.getValue();for(let t=e;t<i.length;t++)i[t].index=t;return this.validate(),this.notify("value.removed",t),this.propagate("value.changed",t,this),{message:`The element '${t.name}' was successfully removed.`,success:!0}},removeAllElement(){return this.value.forEach((e=>{this.model.removeConcept(e)})),this.value=[],this.notify("value.changed",this.value),this.propagate("value.changed",this.value,this),this},createElement(e){const t={value:this.model.getValue(e),parent:this,ref:this},i=this.model.createConcept(this.accept,t);return this.addElement(i),i},getProperty(e,t){if("refname"===e)return this.ref.name;if("name"===e)return this.name;if("value"===e)return this.value;if("length"===e||"cardinality"===e)return this.value.length;let i=this.properties.find((t=>t.name===e));if((0,s.le)(i))return;const{type:n,value:r}=i;return"string"===n?r:"number"===n?+r:"boolean"===n?(0,s.sw)(r):r},hasProperty(e){return!!["refname","name","value","length","cardinality"].includes(e)||-1!==this.properties.findIndex((t=>t.name===e))},getCandidates(){return re.call(this,this.accept)},getChildren(e){if(!this.hasValue())return[];const t=this.getElements();return(0,s.le)(e)?t:t.filter((t=>t.name===e))},validate(){if(this.errors=[],!this.hasConstraint())return{code:te.SUCCESS};if(this.hasConstraint("cardinality")){let e=this.getConstraint("cardinality");const{type:t}=e;if("range"===t){const{min:i,max:s}=e[t];if(i&&this.value.length<i.value){let e=te.MIN_CARDINALITY_ERROR;return this.errors.push(ie.call(this,e,i).message),{code:e,ctx:i}}if(s&&this.value.length>s.value){let e=te.MAX_CARDINALITY_ERROR;return this.errors.push(ie.call(this,e,s).message),{code:e,ctx:s}}}else if("fixed"===t){const{value:i}=e[t];if(this.value.length!==i){let i=te.FIX_CARDINALITY_ERROR;return this.errors.push(ie.call(this,i,e[t]).message),{code:i,ctx:e[t]}}}}return{code:te.SUCCESS}},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.getValue().map((e=>e.copy(!1)))};return e&&this.model.addValue(t),t},clone(){return{id:this.id,name:this.name,value:this.getValue().map((e=>e.clone()))}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.value}},toString(){return this.getValue().map((e=>e.toString()))},toXML(){let e=this.getName();return`<${e} id="${this.id}">`+this.getValue().map((e=>e.toXML())).join("")+`</${e}>`}};function ne(){if(!this.hasConstraint("cardinality"))return 0;const e=this.getConstraint("cardinality"),{type:t}=e;if("range"===t){const{min:i}=e[t];return i.value}if("fixed"===t){const{value:i}=e[t];return i}return 0}function re(e){return this.model.getConceptSchema(e)}const ae=Object.assign(Object.create(W),se);Object.defineProperty(ae,"count",{get(){return this.value.length}}),Object.defineProperty(ae,"canAddValue",{get:()=>!0});const le=200,oe=405;function ce(e,t){switch(e){case 401:return{success:!1,message:`Valid values: ${t}`};case 403:return{success:!1,message:`Maximum length: ${t.value}.`};case 402:return{success:!1,message:`Minimum length: ${t.value}.`};case 404:return{success:!1,message:`Fixed length: ${t.value}.`};case oe:return{success:!1,message:"The value is not valid."};case 406:return{success:!1,message:"The value is already used."}}}const he={nature:"primitive",initValue(e){if((0,s.le)(e))return this.value=this.default,this;if((0,s.Kn)(e)){const{id:t="",value:i}=e;t.length>10&&(this.id=t),this.setValue(i)}else this.setValue(e);return this},restore(e){const{value:t}=e;this.setValue(t)},hasValue(){return!(0,s.hr)(this.value)},getValue(){return this.value},removeValue(){return this.value=null,this.notify("value.changed",this.value),{success:!0,message:"The value has been successfully updated."}},setValue(e){let t=(0,s.Kn)(e)?e.value:e;var{code:i,ctx:n}=this.validate(t);return this.value!==t&&(this.value=t,this.notify("value.changed",t),this.propagate("value.changed",t,this)),i!==le?{success:!1,message:"Validation failed."}:{success:!0,message:"The value has been successfully updated."}},getProperty(e,t){if("refname"===e)return this.ref.name;if("name"===e)return this.name;if("value"===e)return this.value;if("length"===e)return this.value.length;let i=this.properties.find((t=>t.name===e));if((0,s.le)(i))return;const{type:n,value:r}=i;return"string"===n?r:"number"===n?+r:"boolean"===n?(0,s.sw)(r):r},hasProperty(e){return!!["refname","name","value","length"].includes(e)||-1!==this.properties.findIndex((t=>t.name===e))},getCandidates(){let e=(0,s.XI)(this.getConstraint("values"),[]);return(0,s.xb)(e)?[...this.src.map((e=>{if("reference"===e.type){const{source:t,target:i}=e;let r=this.model.environment.getModel(t.name||t);if((0,s.le)(r))return null;let a=r.concept||r;if(!Array.isArray(a))return null;if(a.forEach((e=>{const t=function(e,t){var i=t;const r=[],a=t=>{let i=e.find((e=>e.name===t));if(!(0,s.le)(i))return(0,n.p$)(i)};for(;!(0,s.le)(i);){const e=(0,s.XI)(a(i),{});l=e.attributes,Array.isArray(l)&&l.forEach((e=>{const t=r.find((t=>t.name===e.name));(0,s.le)(t)?r.push(e):e.required&&(t.required=e.required)})),i=e.prototype}var l;return{attributes:r}}(a,e.prototype);e.attributes.push(...t.attributes)})),(0,s.le)(i.rel))return a.map((e=>e[i.value]));let l=de.call(this,i,a);return(0,s.le)(l)?[]:l}if("concept"===e.type){const{concept:t,value:i}=e;let s=this.model.getConceptsByPrototype(t.prototype);return console.log(s),"attribute"===i.type?s.map((e=>e.getAttribute(i.name).getValue())):[]}return e}))].flat().filter((e=>!(0,s.le)(e))):e.map((e=>ue.call(this,e))).flat().filter((e=>!(0,s.hr)(e)))},getChildren:e=>[],update:(e,t)=>!0,validate(e){if(this.errors=[],(0,s.hr)(e))return{code:le};if(!this.hasConstraint())return{code:le};if(this.hasConstraint("length")){let t=this.getConstraint("length");const{type:i}=t;if("range"===i){const{min:s,max:n}=t[i];if(s&&e.length<s.value){let e=402;return this.errors.push(ce.call(this,e,s).message),{code:e,ctx:s}}if(n&&e.length>n.value){let e=403;return this.errors.push(ce.call(this,e,n).message),{code:e,ctx:n}}}else if("fixed"===i){const{value:s}=t[i];if(e.length!==s){let e=404;return this.errors.push(ce.call(this,e,t[i]).message),{code:e,ctx:t[i]}}}}if(this.hasConstraint("value")){let t=this.getConstraint("value");const{type:i}=t;if("pattern"===i){const{value:i,insensitive:s=!0,global:n=!0}=t.pattern;let r="";if(s&&(r+="g"),n&&(r+="i"),!new RegExp(i,r).test(e)){let e=oe;return this.errors.push(ce.call(this,e,t.pattern).message),{code:e,ctx:t.pattern}}}else if(i==="match".startsWith){const{start:s,end:n}=t[i];if(s&&!e.startsWith<s.value){let e=oe;return this.errors.push(ce.call(this,e,t.match).message),{code:e,ctx:t.match}}if(n&&e.length>n.value){let e=oe;return this.errors.push(ce.call(this,e,t.match).message),{code:e,ctx:t.match}}}else if("unique"===i){const{rel:i="parent",prototype:s}=t.unique;let n=this.getParent(),r=[];if(s?(n.hasPrototype()||(r=[]),r=this.model.getConceptsByPrototype(n._prototype)):r=this.model.getConcepts(n.name),r.some((t=>t!==n&&me(t,this.ref.name)===e))){let e=406;return this.errors.push(ce.call(this,e,t.unique).message),{code:e,ctx:t.unique}}}}if(this.hasConstraint("values")){let t=this.getConstraint("values").map((e=>ue.call(this,e))).flat(),i=!1;for(let n=0;!i&&n<t.length;n++){const r=t[n];i=(0,s.Kn)(r)?r.value===e:r===e}if(!i){let e=401;return this.errors.push(ce.call(this,e,t).message),{code:e,ctx:t}}}return{code:le}},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.getValue()};return e&&this.model.addValue(t),t},clone(){return{id:this.id,name:this.name,value:this.getValue()}},export(){return{id:this.id,name:this.name,root:this.isRoot(),value:this.getValue()}},toString(){return this.value},toXML(){let e=this.getName();return`<${e} id="${this.id}">`+this.getValue()+`</${e}>`}};function ue(e){if("reference"===e.type){let e=[];return this.model.isPrototype("model concept")&&(e=this.model.getConceptsByPrototype("model concept")),e.map((e=>e.getChildren(this.name))).flat().map((e=>e.value))}if("meta-reference"===e.type){let e=[];return this.model.isPrototype("model concept")&&(e=this.model.getConceptsByPrototype("model concept")),e.map((e=>e.getChildren(this.name))).flat().map((e=>e.value))}return e}function de(e,t){const{name:i,rel:n,scope:r,value:a}=e;let l=null;if("parent"===n){let e=this.getParent(i);if((0,s.le)(a))return e;if("reference"===a.type)return de.call(e,a);if("attribute"===a.type)return e.getAttributeByName(a.name).getValue()}if("children"===n){let e=this.getChildren(i);if((0,s.le)(a))return e;if("reference"===a.type)return e.map((e=>de.call(e,a)));if("attribute"===a.type)return e.filter((e=>ge(e,a.name)&&fe(e,a.name))).map((e=>me(e,a.name)))}if(e.source){const{type:t,value:i}=e.source;l="reference"===t?de.call(this,e.source):i}if((0,s.le)(l))return t.map((e=>e[i].map((e=>e[a]))));if((0,s.TW)(l)&&(0,s.xb)(l))return[];let o=t.find((e=>Array.isArray(l)?l.includes(e.name):e.name===l));return(0,s.le)(o)||!(0,s.RI)(o,i)?[]:o[i].map((e=>e[a]))}const pe=(e,t)=>e.getAttributeByName(t).target,me=(e,t)=>pe(e,t).getValue(),fe=(e,t)=>pe(e,t).hasValue(),ge=(e,t)=>e.isAttributeCreated(t),be=Object.assign(Object.create(W),he),ve={nature:"concrete",initValue(e){if((0,s.le)(e))return!1;const{id:t="",attributes:i=[]}=e;return t.length>10&&(this.id=t),i.forEach((e=>{const{name:t,id:i,value:s}=e;this.createAttribute(t,s)})),!0},restore(e){const{attributes:t}=e;t.forEach((e=>{const{name:t,id:i,value:s}=e;this.isAttributeCreated(t)||this.createAttribute(t,s)}))},hasValue:()=>!0,getValue(){return{name:this.name,attributes:this.getAttributes().map((e=>({name:e.name,value:e.copy(!1)})))}},setValue(e){const{attributes:t=[]}=e;return t.forEach((e=>{const{name:t,id:i,value:s}=e;this.hasAttribute(t)&&this.createAttribute(t,s)})),!0}},ye=Object.assign(Object.create(W),ve),we=200;function Ee(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const Ce={name:"prototype",nature:"prototype",initValue(e){if((0,s.le)(e)){if(this.default){let e=this.createConcept(this.default);this.setValue(e)}return this}const{id:t="",value:i}=e;t.length>10&&(this.id=t);let n=null;return i?(n=this.createConcept(i.name,i),this.setValue(n)):e.name&&e.attributes&&(n=this.createConcept(e.name,e),this.setValue(n)),this},getValue(e=!1){return(0,s.le)(this.value)?null:e?this.target:this.value},getTarget(){return this.target},restore(e){const{value:t}=e;if((0,s.le)(t))return;let i=this.createConcept(t.name,t);this.setValue(i)},setValue(e){let t=e.name||e;if(this.validate(t)!==we)return{success:!1,message:"Validation failed: The value could not be updated."};let i=e;if(e&&"concept"===e.object&&(0,s.RI)(e,"id")||(i=e.attributes?this.createConcept(t,e):this.createConcept(t)),this.target){let e=this.target.copy(!1);this.target.delete(!0),i.setValue(e)}return this.target=i,this.value=t,this.notify("value.changed",this.getCandidates().find((e=>e.name===this.value))),{success:!0,message:"The value has been successfully updated."}},removeValue(){return(0,s.le)(this.value)||(this.value=null,this.notify("value.changed",this.value)),{success:!0,message:"The value has been successfully updated."}},hasValue(){return!(0,s.le)(this.value)},getCandidates(){return this.candidates||(this.candidates=je.call(this,this.schema.accept).map((e=>({type:"meta-concept",name:e.name,concept:Object.create(Le,{object:{value:"meta-concept"},type:{value:"meta-concept"},name:{value:e.name},model:{value:this.model},schema:{value:e}})})))),this.candidates},getChildren(e){if(!this.hasValue())return[];const t=[];return((0,s.le)(e)||this.target.name===e)&&t.push(this.target),t},createConcept(e,t){let i=this.model.getValue(t);const s={parent:this,ref:this};i&&(s.value=i);const n=this.model.createConcept(e,s);return n.prototype=this,n},validate(e){if((0,s.hr)(e))return we;if((0,s.xb)(this.values))return we;var t=!1;for(let i=0;!t&&i<this.values.length;i++){const n=this.values[i];t=(0,s.Kn)(n)?n.value===e:n===e}if(!t){let e=401;return this.errors.push(Ee.call(this,e).message),e}return we},copy(e=!0){if(!this.hasValue())return null;const t={name:this.name,nature:this.nature,value:this.target.copy(!1)};return e&&this.model.addValue(t),t},clone(){let e=null;return this.hasValue()&&(e=this.target.clone()),{id:this.id,name:this.name,value:e}},export(){let e=null;return this.hasValue()&&(e={id:this.target.id,name:this.target.name}),{id:this.id,name:this.name,root:this.isRoot(),value:e}},toXML(){if(!this.hasValue())return"";let e=this.getName();return`<${e} id="${this.id}">`+this.target.attributes.map((e=>e.toXML())).join("")+`</${e}>`}};function je(e){const t=this.model.getConcreteConcepts(this.name);return(0,s.le)(e)?t:Array.isArray(e)?t.filter((t=>e.some((e=>e.name===t.name)))):t.filter((t=>e===t.name))}const Le={getProperty(e,t){if("refname"===e)return this.name;if("name"===e)return this.name;let i=this.properties.find((t=>t.name===e));if((0,s.le)(i))return;const{type:n,value:r}=i;return"string"===n?r:"number"===n?+r:"boolean"===n?(0,s.sw)(r):r},hasPrototype(e){if((0,s.le)(this.schema.prototype))return!1;let t=this.model.getConceptSchema(this.schema.prototype);for(;!(0,s.le)(t);){if(t.name===e)return!0;t=this.model.getConceptSchema(t.prototype)}return!1}},xe=Object.assign({},W,Ce);function Re(e){switch(e){case 401:return{success:!1,message:"The value is not included in the list of valid values."}}}const Ie={name:"meta",reference:null,initValue(e){return(0,s.le)(e)||this.setValue(e.value),this},hasValue(){return!(0,s.hr)(this.value)},getValue(){return(0,s.le)(this.value)?null:this.value},getProperty(e){const t=this.schema[e];if((0,s.Kn)(t)){const e=[];for(const i in t){const s=t[i];e.push(Object.assign({},{name:i},s))}return e}return t},setValue(e){var t=this.validate(e);return 200!==t?{success:!1,message:"Validation failed: The value could not be updated.",errors:[Re(t).message]}:(0,s.le)(e)||this.value===e?void 0:(this.reference&&this.reference.unregister(this),this.reference=this.model.getConcept(e),this.reference.register(this),this.value=e,this.notify("value.changed",this.reference),{success:!0,message:"The value has been successfully updated."})},getChildren:e=>[],delete(e=!1){if(!e){let e=this.getParent().remove(this);if(!e.success)return e}return this.reference&&this.reference.unregister(this),this.model.removeConcept(this.id),this.notify("delete"),{message:`The concept '${name}' was successfully deleted.`,success:!0}},update(e,t){switch(e){case"delete":this.reference.unregister(this),this.value=null,this.reference=null,this.notify("value.changed",this.reference)}return!0},validate(e){return(0,s.hr)(e)||(0,s.xb)(this.values),200},export(){return{id:this.id,name:this.name,value:this.value}},toString(){var e=[];return this.value.forEach((t=>{e.push(t.toString())})),e}},_e=Object.assign({},W,Ie);function Ae(e,t){return{object:{value:"concept"},type:{value:"concept"},model:{value:e},name:{value:t.name},base:{value:t.base},schema:{value:t,writable:!0}}}const Oe={boolean:(e,t)=>Object.create(F,Ae(e,t)),number:(e,t)=>Object.create(G,Ae(e,t)),reference:(e,t)=>Object.create(ee,Ae(e,t)),set:(e,t)=>Object.create(ae,Ae(e,t)),string:(e,t)=>Object.create(be,Ae(e,t)),meta:(e,t)=>Object.create(_e,Ae(e,t))},Se={primitive:(e,t)=>Oe[t.name](e,t),prototype:(e,t)=>Object.create(xe,Ae(e,t)),concrete:(e,t)=>Object.create(ye,Ae(e,t)),derivative:(e,t)=>Oe[t.base](e,t)},Ve={createConcept(e,t,i){const{name:n,nature:r}=t,a=Se[r];if((0,s.le)(a))throw new Error(`Missing handler: The '${n}' concept could not be handled`);const l=a(e,t);if((0,s.le)(l))throw new Error(`Bad request: The '${n}' concept could not be created`);return l.init(i),(0,s.le)(l.id)&&(l.id=k.h.generate()),l}};var Te=0;const ke={concepts:null,values:null,listeners:null,get hasError(){return this.concepts.some((e=>e.hasError))},init(e){return this.concepts=[],this.values=[],this.listeners=[],Array.isArray(e)&&(this.values=e,e.filter((e=>e.root)).forEach((e=>{this.createConcept({name:e.name},{value:e})})),this.values=e.filter((e=>e.id.startsWith("value")))),this},done(){return this.concepts.forEach((e=>{e.done()})),this.concepts=[],!0},createConcept(e,t){const i=this.getCompleteModelConcept(e);var s=Ve.createConcept(this,i,t);return this.addConcept(s),s},getConcepts(e){if((0,s.TW)(e)){const t=Array.isArray(e)?t=>e.includes(t.name):t=>t.name===e;return this.concepts.filter((e=>t(e)))}return this.concepts.slice()},getRootConcepts(){return this.concepts.filter((e=>e.isRoot()))},getConceptsByPrototype(e){return this.concepts.filter((t=>t.hasPrototype(e)))},getConcept(e){if(!(0,s.HD)(e)||(0,s.xb)(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");return this.concepts.find((t=>t.id===e))},addConcept(e){if((0,s.le)(e))throw new TypeError("Bad request: The 'concept' argument must be a Concept");return this.concepts.push(e),e.register(this.environment),this},removeConcept(e){if(!(0,s.Kn)(e)&&!(0,s.HD)(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");var t=this.concepts.findIndex((t=>t.id===e));return-1===t?null:this.concepts.splice(t,1)[0]},hasConcept(e){if(!(0,s.Kn)(e)&&!(0,s.HD)(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");if((0,s.xb)(this.concepts))return!1;let t=e.id||e;return e.name,this.concepts.some((e=>e.id===t))},getValues(e){if((0,s.TW)(e)){const t=Array.isArray(e)?t=>e.includes(t.name):t=>t.name===e;return this.values.filter((e=>t(e)))}return this.values.slice()},getValue(e){return(0,s.le)(e)?null:(0,s.RI)(e,"value")||(0,s.RI)(e,"attributes")?e:(0,s.RI)(e,"id")?this.values.find((t=>t.id===e.id)):this.values.find((t=>t.id===e))},addValue(e){if((0,s.le)(e))throw new TypeError("Bad request: The 'value' argument must be a Value");return this.values.some((t=>{return s=e,(i=t).name===s.name&&(i.value?i.value===s.value:JSON.stringify(i.attributes)===JSON.stringify(s.attributes));var i,s}))||(e.id="value"+Te++,this.values.push(e),this.notify("value.added",e)),this},removeValue(e){if(!(0,s.Kn)(e)&&!(0,s.HD)(e))throw new TypeError("Bad request: The 'id' argument must be a non-empty string");var t=this.values.findIndex((t=>t.id===e));if(-1===t)return null;let i=this.values.splice(t,1)[0];return this.notify("value.removed",i),i},register(e){return this.listeners.includes(e)||this.listeners.push(e),!0},unregister(e){let t=this.listeners.indexOf(e);return-1!==t&&(this.listeners.splice(t,1),!0)},unregisterAll(){this.listeners=[]},notify(e,t){this.listeners.forEach((i=>{i.update(e,t)}))},isConcept(e){return!!(0,s.HD)(e)&&-1!==this.schema.findIndex((t=>t.name===e))},isConcrete(e){if(!(0,s.HD)(e))return!1;const t=this.schema.find((t=>t.name===e));return!(0,s.le)(t)&&"concrete"===t.nature},isPrototype(e){if(!(0,s.HD)(e))return!1;const t=this.schema.find((t=>t.name===e));return!(0,s.le)(t)&&"prototype"===t.nature},hasPrototype(e,t){if(!this.isConcept(e))return!1;let i=this.getConceptSchema(e);for(;!(0,s.le)(i);){if(i.prototype===t)return!0;i=this.model.getConceptSchema(i.prototype)}return!1},addConceptSchema(e){return this.schema.push(...e),this.environment.update("concept-model.updated"),!0},getSchema(e){if((0,s.TW)(e)){const t=Array.isArray(e)?t=>e.includes(t.nature):t=>t.nature===e;return this.schema.filter((e=>t(e)))}return this.schema.slice()},getConceptSchema(e){const t=He(this.schema,e);if(!(0,s.le)(t))return(0,n.p$)(t)},getCompleteModelConcept(e){let t=e;(0,s.HD)(e)&&(t={name:e});const i=this.getConceptSchema(t.name);if((0,s.le)(i))return;Object.assign(i,t),(0,s.RI)(i,"attributes")||(i.attributes=[]);const n=Me.call(this,i.prototype);return i.attributes.push(...n.attributes),i},getConcreteConcepts(e){const t=t=>{for(var i=t.prototype;!(0,s.le)(i);){if(i===e)return!0;i=(0,s.XI)(He(this.schema,i),{}).prototype}return!1},i=this.schema.filter((e=>"concrete"===e.nature));return e?i.filter((e=>t(e))):i},getDerivedConcepts(e){if((0,s.le)(e))throw new TypeError("Bad argument");return this.schema.filter((t=>t.base===e))},export(){const e=[];return this.getConcepts().forEach((t=>{e.push(t.export())})),e.push(...this.getValues()),e},toString(){return JSON.stringify({[this.root.name]:this.root.toString()})},toXML(){return"<model:gentleman>"+this.getRootConcepts().map((e=>e.toXML())).join("")+"</model:gentleman>"}};function Me(e){var t=e;const i=[];for(;!(0,s.le)(t);){const e=(0,s.XI)(this.getConceptSchema(t),{});n=e.attributes,Array.isArray(n)&&n.forEach((e=>{const t=i.find((t=>t.name===e.name));(0,s.le)(t)?i.push(e):e.required&&(t.required=e.required)})),t=e.prototype}var n;return{attributes:i}}const $e=[{name:"string",nature:"primitive"},{name:"number",nature:"primitive"},{name:"boolean",nature:"primitive"},{name:"reference",nature:"primitive"},{name:"set",nature:"primitive"}];function He(e,t){let i=e.find((e=>e.name===t));return(0,s.le)(i)&&(i=$e.find((e=>e.name===t))),i}const Pe=[],Ne={createModel(e,t){var i=Object.create(ke,{schema:{value:(0,s.XI)(e,[])},environment:{value:t}});return Pe.push(i),i}};function De(e){const{type:t}=e;let i=this.concept||this.source;return"property"===t?(0,s.XI)(i.getProperty(e.name),""):"param"===t?this.projection.getParam(e.name):e}const Be={css:function(e,t){return(0,s.TW)(t)?(Fe(e,t),e):e},ref:function(e,t){return(0,s.TW)(t)?(t.forEach((t=>{const{style:i={}}=(0,s.XI)(this.model.getStyleSchema(t),{});i.gss?Ze.call(this,e,i):We.call(this,e,i)})),e):e},gss:We,text:ze,box:Ge,html:function(e,t){return(0,s.TW)(t)?(t.forEach((t=>{let i=`style${(0,s.fm)(t.name)}`;e.dataset[i]=De.call(this,t.value),"property"===t.value.type&&this.registerHandler("value.changed",(s=>{e.dataset[i]=De.call(this,t.value)}))})),e):e}},Xe={text:ze,box:Ge};function Ze(e,t){if(!(0,s.Kn)(t))return e;for(const i in t){const n=t[i];let r=Be[i];(0,s.mf)(r)&&r.call(this,e,n)}return e}function We(e,t){if(!(0,s.Kn)(t))return e;for(const i in t){const n=t[i];let r=Xe[i];(0,s.mf)(r)&&r.call(this,e,n)}return e}function ze(e,t){for(const i in t){const s=t[i];if(!1!==s)switch(i){case"bold":e.style.fontWeight=Ue(s);break;case"italic":e.style.fontStyle="italic";break;case"underline":e.style.textDecoration="underline";break;case"strikethrough":e.style.textDecoration="line-through";break;case"color":e.style.color=qe(s);break;case"font":e.style.fontFamily=s.toString();break;case"size":e.style.fontSize=Qe(s);break;case"transform":e.style.textTransform=s}}return e}function Fe(e,t){if(Array.isArray(t))e.classList.add(...t);else{let i=t.replace(/\s+/g," ").trim();(0,s.hr)(e.className)?e.className=i:Fe(e,i.split(" "))}return e}function qe(e){if((0,s.le)(e))return"";const{type:t,value:i}=e;switch(t){case"rgb":return(0,s.Kn)(i)?`rgb(${i.red}, ${i.green}, ${i.blue})`:i;case"rgba":return(0,s.Kn)(i)?`rgba(${i.red}, ${i.green}, ${i.blue}, ${i.opacity/100})`:i;case"name":case"hexadecimal":return i;default:return i||e}}function Ue(e){if((0,s.le)(e))return"";const{type:t,value:i}=e;return Number.isInteger(e)?`${e}`:"bold"}function Qe(e){if((0,s.le)(e))return"";const{value:t,unit:i}=e;return(0,s.le)(t)?"":`${t}${i}`}function Ge(e,t){for(const i in t){const s=t[i];if(!1!==s)switch(i){case"inner":Ke.call(this,e,s,"padding");break;case"outer":Ke.call(this,e,s,"margin");break;case"border":et.call(this,e,s);break;case"corner":tt.call(this,e,s);break;case"background":Je.call(this,e,s);break;case"width":e.style.width=Qe.call(this,s);break;case"height":e.style.height=Qe.call(this,s);break;case"opacity":e.style.opacity=s/100;break;case"shadow":Ye.call(this,e,s,"shadow")}}return e}function Ke(e,t,i){if(!(0,s.le)(t))for(const s in t){const n=t[s];switch(s){case"all":e.style[`${[i]}`]=Qe.call(this,n);break;case"top":e.style[`${[i]}Top`]=Qe.call(this,n);break;case"right":e.style[`${[i]}Right`]=Qe.call(this,n);break;case"bottom":e.style[`${[i]}Bottom`]=Qe.call(this,n);break;case"left":e.style[`${[i]}Left`]=Qe.call(this,n)}}}function Je(e,t){if((0,s.le)(t))return;const{color:i,image:n}=t;i&&(e.style.backgroundColor=qe.call(this,i)),n&&(e.style.backgroundImage=`url(${n})`)}function Ye(e,t){if((0,s.le)(t))return null;const{offsetX:i,offsetY:n,blur:r,spread:a,inset:l=!1,color:o}=t;if((0,s.le)(i)||(0,s.le)(n))return null;let c=Qe.call(this,i),h=Qe.call(this,n),u=Qe.call(this,r),d=Qe.call(this,a),p=qe.call(this,o);e.style.boxShadow=l?`inset ${c} ${h} ${u} ${d} ${p}`.trim():`${c} ${h} ${u} ${d} ${p}`.trim()}function et(e,t){if(!(0,s.le)(t))for(const i in t){const n=t[i];switch(i){case"all":e.style.borderStyle=(0,s.XI)(n.type,"solid"),e.style.borderWidth=Qe.call(this,n.width),e.style.borderColor=qe.call(this,n.color);break;case"top":e.style.borderTopStyle=(0,s.XI)(n.type,"solid"),e.style.borderTopWidth=Qe.call(this,n.width),e.style.borderTopColor=qe.call(this,n.color);break;case"right":e.style.borderRightStyle=(0,s.XI)(n.type,"solid"),e.style.borderRightWidth=Qe.call(this,n.width),e.style.borderRightColor=qe.call(this,n.color);break;case"bottom":e.style.borderBottomStyle=(0,s.XI)(n.type,"solid"),e.style.borderBottomWidth=Qe.call(this,n.width),e.style.borderBottomColor=qe.call(this,n.color);break;case"left":e.style.borderLeftStyle=(0,s.XI)(n.type,"solid"),e.style.borderLeftWidth=Qe.call(this,n.width),e.style.borderLeftColor=qe.call(this,n.color)}}}function tt(e,t){if((0,s.le)(t))return null;for(const i in t){const s=t[i];switch(i){case"all":e.style.borderRadius=Qe.call(this,s);break;case"top-left":e.style.borderTopLeftRadius=Qe.call(this,s);break;case"top-right":e.style.borderTopRightRadius=Qe.call(this,s);break;case"bottom-right":e.style.borderBottomRightRadius=Qe.call(this,s);break;case"bottom-left":e.style.borderBottomLeftRadius=Qe.call(this,s)}}}function it(e,t){if(!Array.isArray(t))return!1;e.currentState=null;for(let i=0;i<t.length;i++){const n=t[i],{rule:r,result:a}=n;if((0,s.le)(r))return a;let l=!1,o=st[r.type];if((0,s.mf)(o)&&(l=o.call(this,r[r.type])),l)return e.currentState=i,a}return null}const st={ref:function(e){const{rule:t={}}=(0,s.XI)(this.model.getRuleSchema(e),{});let i=st[t.type];return!!(0,s.mf)(i)&&i.call(this,t[t.type])},eq:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])==nt.call(this,e[1])},ne:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])!=nt.call(this,e[1])},lt:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])<nt.call(this,e[1])},le:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])<=nt.call(this,e[1])},gt:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])>nt.call(this,e[1])},ge:function(e){if(!Array.isArray(e))throw new TypeError("Terms need to be an array");if(e.length<2)return null;return nt.call(this,e[0])>=nt.call(this,e[1])},and:function(e){return rt.call(this,e[0])&&rt.call(this,e[1])},or:function(e){return rt.call(this,e[0])||rt.call(this,e[1])},not:function(e){return!rt.call(this,e[0])},no:function(e){let t=nt.call(this,e);return(0,s.TW)(t)?(0,s.xb)(t):(0,s.le)(t)}};function nt(e,t){if(e&&"property"===e.type){const{name:t}=e;let i=`get${(0,s.Ho)(t)}`;return this[i]?this[i]():this[t]}if(e&&"param"===e.type){const{name:t}=e;return this.projection.getParam(t)}if((0,s.Kn)(e)){let t=`get${(0,s.Ho)(e.prop)}`;return this[t]?this[t]():this[e.prop]}return t||e}function rt(e){let t=st[e.type];return(0,s.mf)(t)?t.call(this,e[e.type]):(0,s.sw)(nt.call(this,e))}const at={init(){throw new Error("This function has not been implemented")},element:null,statusElement:null,attached:null,children:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasError(){return this.source.hasError},get hasAttached(){return!(0,s.xb)(this.attached)},attach(e,t){this.attached.push(e)},detach(e){this.attached.slice(this.attached.indexOf(e),1)},getAttached(e){return(0,s.mf)(e)?this.attached.filter((t=>e(t))):this.attached},show(){return(0,n.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,n.Cp)(this.element),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},focus(e){return this.element.contentEditable=!1,this.element.focus(),this.focused=!0,this},getContainer(){return this.element},notify(e,t,i){(0,n.lL)(this.element),this.environment.notify(e,t)},append(e){if(!(0,s.Re)(e))throw new TypeError("Bad argument: The 'element' argument must be an HTML Element");return this.element.append(e),this},_focusIn:e=>!1,enable(){return this.disabled=!1,this},disable(){return this.disabled=!0,this},clear:()=>!0,delete(){var e=this.source.delete();e.success?(this.clear(),(0,s.ep)(this.element),this.element.remove()):(this.environment.notify(e.message),(0,n.lL)(this.element))},spaceHandler(e){return console.warn(`SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},_spaceHandler(e){return console.warn(`CTRL_SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},escapeHandler(e){return console.warn(`ESCAPE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},enterHandler(e){this.focusOut()},deleteHandler(e){if(this.projection.element!==this)return(0,n.lL)(e),!1;if(!this.projection.optional)return(0,n.lL)(this.element),!1;let t=(0,s.wr)(e,(e=>0===e.tabIndex)),i=this.container.cloneNode(!0);this.source.hasParent()&&this.environment.save(this.source.getParent(),i),this.source.delete();let r=this.environment.resolveElement(t);return(0,s.le)(r)||r.focus(),!1},backspaceHandler(e){return console.warn(`BACKSPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},arrowHandler(e,t){return console.warn(`ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},_arrowHandler(e,t){return console.warn(`CTRL_ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},clickHandler(e){return console.warn(`CLICK_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},controlHandler(e){this.toolbar&&this.toolbar.remove()},shiftHandler(e,t){return console.warn(`SHIFT_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1}},lt=Object.assign(at);function ot(e){const{type:t}=e;return"property"===t?(this.hasProperty=!0,(0,s.XI)(this.source.getProperty(e.name),"")):"param"===t?this.projection.getParam(e.name):"html"===t?(0,s.Bv)(e.html):"raw"===t?(0,s.Bv)(e.raw):e}const ct={input:null,label:null,value:"",state:null,init(){const{focusable:e=!0}=this.schema;return this.focusable=e,this.children=[],this},refresh(){if((0,s.XI)(it.call(this,this.schema,this.schema.state),this.schema),this.schema.state){let e=this.schema.state[this.getValue().toString()];if(e&&e.content){const{style:t,content:i,value:n}=e;let r=(0,s.DZ)();i.forEach((e=>{r.append(Li.call(this,e))})),(0,s.ep)(this.label).append(r),Ze.call(this.projection,this.label,t)}}this.input.checked?this.element.dataset.state="on":this.element.dataset.state="off",this.hasError?(this.element.classList.add("error"),this.input.classList.add("error")):(this.element.classList.remove("error"),this.input.classList.remove("error"))},render(){const e=(0,s.DZ)(),{checkbox:t}=this.schema;var i;if((0,s.Re)(this.element)||(this.element=(i=this.id,(0,s.wC)({id:i,class:["field","field--binary"],tabindex:-1,dataset:{nature:"field",view:"binary",id:i}})),this.readonly&&this.element.classList.add("readonly"),Ze.call(this.projection,this.element,this.schema.style)),!(0,s.Re)(this.input)){if(this.input=function(e){return(0,s.Ju)({id:`checkbox${e}`,type:"checkbox",class:["field--binary__input"],tabindex:0,dataset:{nature:"field-component",view:"binary",id:e}})}(this.id),this.input.checked=this.source.getValue(),this.value=this.input.checked,this.readonly&&(this.input.classList.add("readonly"),this.input.disabled=!0),t){const{style:e}=t;Ze.call(this.projection,this.input,e)}else(0,n.Cp)(this.input);e.append(this.input)}if(!(0,s.Re)(this.label)){if(this.label=(0,s._)({class:["field--checkbox__label"],for:this.input.id,tabindex:0,dataset:{nature:"field-component",view:"binary",id:this.id}}),this.label.htmlFor=this.input.id,t&&t.label){const{content:e}=t.label;if(Array.isArray(e))e.forEach((e=>{let t=ot.call(this,e),i=(0,s.kQ)({class:["field--checkbox__label-content"],dataset:{ignore:"all"}},t);Ze.call(this.projection,i,e.style),this.label.append(i)}));else{let t=ot.call(this,e);this.label.append(t)}Ze.call(this.projection,this.label,t.label.style)}e.append(this.label)}return e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.value=this.input.checked,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.hasChanges()&&this.setValue(this.input.checked),this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.choice&&(0,n.Cp)(this.choice),this.input.blur(),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!==this.input.checked},hasValue(){return this.input.checked},getValue(){return this.input.checked},setValue(e,t=!1){var i;(i=t?this.source.setValue(e):{success:!0}).success||this.environment.notify(i.message,"error"),this.input.checked=e,this.value=e,this.refresh()},getCandidates(){return this.source.getCandidates()},enable(){this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1},disable(){this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0},escapeHandler(e){let t=!0;if(this.messageElement&&!(0,n.xj)(this.messageElement)&&((0,n.Cp)(this.messageElement),t=!1),t){let t=(0,s.wr)(e,(e=>0===e.tabIndex));return this.environment.resolveElement(t).focus(t),!0}},backspaceHandler(e){return this.arrowHandler("left",e)},enterHandler(e){this.setValue(!this.input.checked,!0)},arrowHandler(e,t){return!!this.parent&&this.parent.arrowHandler(e,this.element)},bindEvents(){this.element.addEventListener("change",(e=>{this.setValue(this.getValue(),!0)})),this.projection.registerHandler("value.changed",(e=>{this.setValue(e)}))}},ht=Object.assign(Object.create(lt),ct);function ut(e){const t=e=>e.parentElement===this.choices;return t(e)?e:(0,s.wr)(e,t,5)}function dt(e){const{type:t}=e.dataset;return t}function pt(e){const{type:t,value:i}=e.dataset;return"concept"===t?this.values.find((e=>e.id===i)).id:"meta-concept"===t?this.values.find((e=>e.name===i)).name:"value"===t?i:"placeholder"===t?null:i}const mt=(e,t)=>"concept"===e.type?mt(e.id,t):"concept"===t.type?mt(e,t.id):"meta-concept"===e.type?mt(e.name,t):"meta-concept"===t.type?mt(e,t.name):e===t,ft={value:null,placeholder:null,expanded:null,values:null,choices:null,input:null,items:null,selection:null,selectList:null,selectListValue:null,icoToggle:null,init(e={}){Object.assign(this.schema,e);const{focusable:t=!0,placeholder:i=!1,expanded:n=!0}=this.schema;return this.items=new Map,this.focusable=t,this.expanded=n,this.placeholder=i,this.children=[],(0,s.RI)(this.schema,"choice")||(this.schema.choice={}),(0,s.RI)(this.schema.choice,"option")||(this.schema.choice.option={}),this},hasChanges(){return this.value!=this.source.getValue()},reset(){this.source.removeValue()},hasValue(){return!(0,s.le)(this.value)},getValue(){return this.selection},setValue(e,t=!1){var i=null;if(t)return(i=this.source.setValue(e)).success||this.environment.notify(i.message,n.k$.ERROR),!0;(0,s.le)(e)?(this.selection&&this.selection.classList.remove("selected"),this.expanded||(0,s.ep)(this.selectListValue),this.selection=null):this.setChoice(e),(0,s.le)(e)?this.value=null:"concept"===e.type?this.value=e.id:"meta-concept"===e.type?this.value=e.name:this.value=e;const{template:r={}}=this.schema.choice.option;if(this.selection&&!this.expanded&&e)if((0,s.ep)(this.selectListValue),"meta-concept"===e.type){let t=this.model.getProjectionSchema(e.concept,(0,s.XI)(r.tag))[0],i=t.type,n={type:i,[i]:t.content||t.projection},a=Li.call(this,n,e.concept,{focusable:!1,meta:e.name});this.selectListValue.append(a)}else if("concept"===e.type){let t=this.model.createProjection(e,r.tag).init({focusable:!1});t.readonly=!0,t.focusable=!1,t.parent=this.projection,this.selectListValue.append(t.render())}else this.selectListValue.append(e.toString());this.refresh()},refresh(){return this.hasValue()?(this.element.classList.remove("empty"),this.element.dataset.value=this.value.name||this.value):(this.element.classList.add("empty"),this.element.dataset.value="",!this.expanded&&this.placeholder&&(0,s.ep)(this.selectListValue).append(this.placeholder)),this.input&&(this.element.dataset.input=this.input.value),this.element.classList.remove("querying"),this.hasError?(this.element.classList.add("error"),this.input&&this.input.classList.add("error")):(this.element.classList.remove("error"),this.input&&this.input.classList.remove("error")),this},render(){const e=(0,s.DZ)(),{choice:t,input:i,style:n}=this.schema;if((0,s.Re)(this.element)||(this.element=(0,s.wC)({id:this.id,class:["field","field--choice"],tabindex:-1,dataset:{nature:"field",view:"choice",input:"",id:this.id}})),!(0,s.Re)(this.input)&&i){const{placeholder:t="",type:n,style:r}=i;let a=Ci.call(this,t);this.input=(0,s.Ju)({class:["field--choice__input"],type:(0,s.XI)(n,"text"),placeholder:a,title:a,dataset:{nature:"field-component",view:this.type,id:this.id}}),Ze.call(this,this.input,r),e.append(this.input)}if(!(0,s.Re)(this.choices)){const{style:i}=t;this.choices=(0,s.w_)({class:["bare-list","field--choice__choices"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}}),Ze.call(this,this.choices,i),e.append(this.choices)}if(!this.expanded){let t=(0,s.wC)({class:["field--choice__select-wrapper"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}});this.selectListValue=(0,s.wC)({class:["field--choice__select-value"],tabindex:-1,dataset:{nature:"field-component",view:"choice",id:this.id}}),this.icoToggle=(0,s.oL)({class:["field--choice__select-icon"],dataset:{nature:"field-component",view:"choice",id:this.id}}),t.append(this.selectListValue,this.icoToggle),this.selectList=(0,s.wC)({class:["field--choice__select-list","hidden"],dataset:{nature:"field-component",view:"choice",id:this.id}}),this.input&&this.selectList.append(this.input),this.selectList.append(this.choices),e.append(t),e.append(this.selectList)}if(Ze.call(this,this.element,n),e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),(0,s.ep)(this.choices),this.placeholder){const{style:e}=this.schema.choice.option;let t=(0,s.HV)({class:["field--choice__choice","field--choice__choice--placeholder"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:"placeholder"}},this.placeholder);this.choices.append(t),Ze.call(this,t,e)}return this.values=this.source.getCandidates(),this.values.forEach((e=>{this.choices.append(this.createChoiceOption(e))})),this.source.hasValue()&&this.setValue(this.source.getValue()),this.refresh(),this.element},focus(e){if(this.expanded)if(this.choices.hasChildNodes()){let e=(0,n.sB)(this.choices);e&&e.focus()}else this.input&&!(0,n.xj)(this.input)?this.input.focus():this.selection&&this.selection.focus();else this.input&&!(0,n.xj)(this.input)?this.input.focus():this.selectListValue.focus();return this.element.classList.add("active"),this},navigate(e,t,i){let r=null;if("up"===e?r=(0,n.GV)(this.element):"down"===e?r=(0,n.Sd)(this.element):"left"===e?r=(0,n.GF)(this.element):"right"===e&&(r=(0,n.EE)(this.element)),(0,s.le)(r))return!1;r.focus()},focusIn(){this.focused=!0,this.element.classList.add("active");const e=(0,s.DZ)();return this.source.getCandidates().filter((e=>!this.values.some((t=>mt(t,e))))).forEach((t=>{e.append(this.createChoiceOption(t)),this.values.push(t)})),this.choices.append(e),this.expanded||((0,n.$Z)(this.selectList),this.selectList.dataset.state="open"),this},focusOut(){if(this.readonly)return;this.input&&(0,s.hr)(this.input.value)&&(this.input.value=""),this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.input&&this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("querying");const{children:e}=this.choices;for(let t=0;t<e.length;t++){const i=e[t];(0,n.$Z)(i),i.hidden=!1}return this.expanded||((0,n.Cp)(this.selectList),this.selectList.dataset.state="close"),this.focused=!1,this},showChoices(){const{children:e}=this.choices;for(let t=0;t<e.length;t++){const i=e[t];(0,n.$Z)(i),i.hidden=!1}},enable(){return this.input&&(this.input.disabled=!1,this.input.tabIndex=0),this.disabled=!1,this},disable(){return this.input&&(this.input.disabled=!0,this.input.tabIndex=-1),this.disabled=!0,this},filterChoice(e){const{children:t}=this.choices;if(this.element.dataset.input=e.trim(),(0,s.hr)(e)){for(let e=0;e<t.length;e++){const i=t[e];(0,n.$Z)(i),i.hidden=!1}return}this.element.classList.add("querying");let i=e.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let e=0;e<t.length;e++){const s=t[e];let r=s.textContent.toLowerCase(),a=r.replace(/[_-]+/g," ").replace(/\s+/g,"").trim();i.some((e=>r.includes(e)||a.includes(e)))?((0,n.$Z)(s),s.hidden=!1):((0,n.Cp)(s),s.hidden=!0)}return!0},createChoiceOption(e){const{template:t={},style:i}=this.schema.choice.option,n=(0,s.Kn)(e),r=(0,s.HV)({class:["field--choice__choice"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:n?"concept":"value",value:n?e.id:e}});if(Ze.call(this,r,i),this.items.set(e.id,r),"meta-concept"===e.type){let i=this.model.getProjectionSchema(e.concept,(0,s.XI)(t.tag))[0],n=i.type,a={type:n,[n]:i.content||i.projection},l=Li.call(this,a,e.concept,{focusable:!1,meta:e.name});r.dataset.type="meta-concept",r.dataset.value=e.name,r.append(l)}else if(n){if(!this.model.hasProjectionSchema(e,t.tag))return r;let i=this.model.createProjection(e,t.tag).init({focusable:!1});i.readonly=!0,i.focusable=!1,i.parent=this.projection,r.append(i.render())}else r.append(e.toString());return r},setChoice(e){const{children:t}=this.choices;let i=!1;for(let s=0;s<t.length;s++){const r=t[s];let a=pt.call(this,r);a&&mt(a,e)?(r.classList.add("selected"),r.dataset.selected="selected",this.selection=r,(0,n.$Z)(r),i=!0):(r.classList.remove("selected"),delete r.dataset.selected)}return this},delete(){if(this.hasValue())this.reset();else{let e=this.source.delete();e.success?(this.clear(),(0,s.ep)(this.element),this.element.remove()):(this.environment.notify(e.message),(0,n.lL)(this.element))}},_spaceHandler(e){let t=this.source.getCandidates();if((0,s.xb)(t))return void this.notify("No candidates found.",n.k$.INFO);const i=(0,s.DZ)();if(t.forEach((e=>{i.append(this.createChoiceOption(e))})),(0,s.ep)(this.choices),this.placeholder){const{style:e}=this.schema.choice.option;let t=(0,s.HV)({class:["field--choice__choice","field--choice__choice--placeholder"],tabindex:0,dataset:{nature:"field-component",view:"choice",id:this.id,type:"placeholder"}},this.placeholder);this.choices.append(t),Ze.call(this,t,e)}this.choices.append(i),this.filterChoice(this.input.value),(0,n.$Z)(this.choices),this.element.classList.add("querying")},escapeHandler(e){let t=!0;if(this.messageElement&&!(0,n.xj)(this.messageElement)&&((0,n.Cp)(this.messageElement),t=!1),!this.expanded&&"open"===this.selectList.dataset.state)return(0,n.Cp)(this.selectList),this.selectList.dataset.state="close",!0;if(t){let t=(0,s.wr)(e,(e=>0===e.tabIndex));return this.environment.resolveElement(t).focus(t),!0}this.focus()},enterHandler(e){const t=ut.call(this,e);(0,s.Re)(t)&&this.selection!==t&&("placeholder"===dt(t)?this.source.removeValue():this.setValue(pt.call(this,t),!0),this.expanded||((0,n.Cp)(this.selectList),this.selectList.dataset.state="close",this.focus()))},backspaceHandler(e){ut.call(this,e)&&this.input&&this.input.focus()},clickHandler(e){const t=ut.call(this,e);(0,s.Re)(t)&&this.selection!==t?("placeholder"===dt(t)?this.source.removeValue():this.setValue(pt.call(this,t),!0),this.expanded||((0,n.Cp)(this.selectList),this.selectList.dataset.state="close")):e===this.selectListValue&&((0,n.$Z)(this.selectList),this.selectList.dataset.state="open")},arrowHandler(e,t){if(!(0,s.Re)(t))return!1;const{parentElement:i}=t,r=()=>!!this.parent&&this.parent.arrowHandler(e,this.element);if(!this.expanded&&t===this.selectListValue)return this.arrowHandler(e,this.selectListValue.parentElement);let a=ut.call(this,t);if(a){let t=(0,n.As)(a,e,this.choices,!1);return(0,s.Re)(t)?(t.focus(),!0):this.arrowHandler(e,this.choices)}if(this.expanded&&i!==this.element)return r();let l=(0,n.As)(t,e,i,!1);return(0,s.Re)(l)?(l===this.selectList&&(l=this.input||this.choices),l===this.choices&&this.choices.hasChildNodes()&&("up"===e?l=(0,n.GV)(this.choices):"down"===e?l=(0,n.Sd)(this.choices):"left"===e?l=(0,n.GF)(this.choices):"right"===e&&(l=(0,n.EE)(this.choices))),l.focus(),!0):r()},bindEvents(){(0,s.Re)(this.input)&&this.element.addEventListener("input",(e=>{this.filterChoice(this.input.value)})),this.projection.registerHandler("value.changed",((e,t)=>{this.setValue(e)}))}},gt=Object.assign(Object.create(lt),ft),bt={content:[{type:"static",static:{type:"text",content:"+",focusable:!1}}]};function vt(e){if(!(0,s.Re)(e))return!1;const{nature:t,id:i}=e.dataset;return"field-component"===t&&i===this.id}function yt(e){const t=e=>e.parentElement===this.list;return t(e)?e:(0,s.wr)(e,t,3)}const wt={list:null,items:null,elements:null,selection:null,content:null,init(e){const{focusable:t=!0}=this.schema;return this.items=new Map,this.elements=new Map,this.children=[],this.focusable=t,(0,s.RI)(this.schema,"list")||(this.schema.list={item:{}}),this},hasChanges:()=>!1,hasValue(){return this.items.size>0},getValue(){return this.list.children},setValue(e,t=!1){t&&this.source.setValue(e),this.list&&((0,s.ep)(this.list),e.forEach((e=>{var t=this.createItem(e);this.list.append(t)}))),this.refresh()},clear(){this.items.clear(),this.list&&(0,s.ep)(this.list)},focus(e){if(this.hasValue()&&this.list)this.list.firstElementChild.focus();else{let e=(0,n.Sd)(this.element,(e=>e!==this.list));if(!(0,s.Re)(e))return this;e.focus()}return this},navigate(e,t,i){let r=null;if("up"===e?r=(0,n.GV)(this.element,(e=>e!==this.notification&&e.hasChildNodes())):"down"===e?r=(0,n.Sd)(this.element,(e=>e!==this.notification&&e.hasChildNodes())):"left"===e?r=(0,n.GF)(this.element,(e=>e!==this.notification&&e.hasChildNodes())):"right"===e&&(r=(0,n.EE)(this.element,(e=>e!==this.notification&&e.hasChildNodes()))),!(0,s.Re)(r))return!1;let a=this.environment.resolveElement(r);return!(0,s.le)(a)&&(a.focus(),!0)},focusIn(e){this.focused=!0,this.element.classList.add("active");const{component:t}=e.dataset},focusOut(){if(!this.readonly)return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},createElement(){return this.source.createElement()},getItem(e){return(0,s.le)(e)?null:(0,s.RI)(e,"id")?this.items.get(e.id):this.items.get(e)},getItemIndex:e=>(0,s.Re)(e)?e.dataset.index:null,createItem(e){const{template:t={},style:i}=this.schema.list.item;if(!this.model.hasProjectionSchema(e,t.tag))return"";let s=this.model.createProjection(e,t.tag);s.optional=!0,s.collapsible=!0,s.parent=this.projection;let n=s.init(t.options).render();return n.dataset.index=e.index,s.element.parent=this,s.registerHandler("view.changed",(e=>{Ze.call(this.projection,e,i)})),Ze.call(this.projection,n,i),this.items.set(e.id,n),n},addItem(e){if(!(0,s.Re)(this.list))return;const t=this.createItem(e);e.index?this.list.children[e.index-1].after(t):this.list.append(t),this.refresh()},removeItem(e){this.hasList&&!(0,s.le)(e)&&(this.items.delete(e.id),this.items.forEach(((e,t)=>{let i=this.source.getElement(t);i&&(e.dataset.index=i.index)})),this.refresh())},moveItem(e,t,i=!1){return this.list.children[t].before(e),e.dataset.index=t,i&&this.source.swapElement(+this.getItemIndex(e),+t),this},swapItem(e,t,i=!1){const s=this.getItemIndex(e),n=this.getItemIndex(t);return this.moveItem(t,s),this.moveItem(e,n),i&&this.source.swapElement(+s,+n),this},delete(e){if(e===this.element)return this.environment.save(this.source.getParent()),void this.source.remove();const{index:t}=e.dataset;var i=this.source.removeElementAt(+t);if(i.success)if(this.hasValue()){let e=+t<this.list.childElementCount?+t:this.list.childElementCount-1;this.list.children[e].focus()}else this.focus();else this.environment.notify(`This element cannot be deleted: ${i.message}`),(0,n.lL)(e)},refresh(){this.hasValue()?(this.element.classList.remove("empty"),this.list&&this.list.classList.remove("empty")):(this.element.classList.add("empty"),this.list&&this.list.classList.add("empty")),this.elements.forEach(((e,t)=>{if(!Array.isArray(t.state))return;const{currentState:i}=t,n=it.call(this,t,t.state);if(i===t.currentState)return;let r=t.content;n&&(r=n.content);let a=(0,s.DZ)();r.forEach((e=>{let t=Li.call(this,e,null,{focusable:!1});a.append(t)})),(0,s.ep)(e).append(a)})),this.hasError?this.element.classList.add("error"):this.element.classList.remove("error")},render(){const e=(0,s.DZ)(),{list:t,style:i,action:n={}}=this.schema;if((0,s.Re)(this.element)||(this.element=(0,s.wC)({id:this.id,class:["field","field--list"],tabindex:-1,dataset:{nature:"field",view:"list",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),Ze.call(this.projection,this.element,this.schema.style)),t&&!(0,s.Re)(this.list)){const{style:i}=t;this.list=(0,s.wC)({class:["field--list__list"],dataset:{nature:"field-component",view:"list",id:this.id}}),this.source.hasValue()||this.list.classList.add("empty"),t.currentState=null,this.elements.set(t,this.list),Ze.call(this.projection,this.list,i),e.append(this.list)}let r=(0,s.XI)(n.add,bt);if(r){const{position:t="after",content:i,help:n,style:a}=r;let l=(0,s.ax)({class:["field-action","field--list__add"],tabindex:0,title:n,dataset:{nature:"field-component",view:"list",component:"action",id:this.id,action:"add"}});i.forEach((e=>{let t=Li.call(this,e,null,{focusable:!1});l.append(t)})),r.currentState=null,this.elements.set(r,l),Ze.call(this.projection,l,a),"before"===t&&this.list?this.list.before(l):e.append(l)}return this.list&&this.source.getValue().forEach((e=>{var t=this.createItem(e);this.list.append(t)})),Ze.call(this.projection,this.element,i),e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.refresh(),this.element},_spaceHandler(e){this.notify(`Add or remove ${this.source.accept.name}`)},spaceHandler(e){return!!(0,s.Re)(e)&&e.parentElement===this.list&&(this.createElement(),!0)},deleteHandler(e){return!(!vt.call(this,e)||e.parentElement!==this.list||(this.delete(e),0))},escapeHandler(e){let t=!0;if(this.messageElement&&!(0,n.xj)(this.messageElement)&&((0,n.Cp)(this.messageElement),t=!1),t){let t=(0,s.wr)(e,(e=>0===e.tabIndex));return this.environment.resolveElement(t).focus(t),!0}return this.focus(),!1},enterHandler(e){const t=(e=>vt.call(this,e)?e:(0,s.wr)(e,(e=>vt.call(this,e)),5))(e);if((0,s.le)(t))return this.focus(),!1;const{action:i,index:n,component:r}=t.dataset;return"add"===i?(this.createElement(),!0):"remove"===i&&(this.delete(t.parentElement),!0)},backspaceHandler:e=>!1,clickHandler(e){const t=(e=>vt.call(this,e)?e:(0,s.wr)(e,(e=>vt.call(this,e)),5))(e);if((0,s.le)(t))return;const{action:i,index:n,name:r}=t.dataset;"add"===i?this.createElement():"remove"===i&&this.delete(t.parentElement)},_arrowHandler(e,t){if(!(0,s.Re)(t))return!1;let i=yt.call(this,t);if(i){let t=(0,n.As)(i,e,this.list);return!!(0,s.Re)(t)&&(this.swapItem(i,t,!0),i.focus(),!0)}return!1},arrowHandler(e,t){if(!(0,s.Re)(t))return!1;const{parentElement:i}=t,r=()=>!!this.parent&&this.parent.arrowHandler(e,this.element);if(i===this.list){let i=(0,n.As)(t,e,this.list);return(0,s.Re)(i)?(this.environment.resolveElement(i).focus(),!0):this.arrowHandler(e,this.list)}if(i!==this.element)return r();let a=(0,n.As)(t,e,this.element);if(!(0,s.Re)(a))return r();if(a===this.notification)return this.arrowHandler(e,a);if(a===this.list){if(!this.list.hasChildNodes())return r();"up"===e?a=(0,n.GV)(this.list):"down"===e?a=(0,n.Sd)(this.list):"left"===e?a=(0,n.GF)(this.list):"right"===e&&(a=(0,n.EE)(this.list))}return a.focus(),!0},bindEvents(){this.projection.registerHandler("value.added",(e=>{this.addItem(e)})),this.projection.registerHandler("value.removed",(e=>{this.removeItem(e)})),this.projection.registerHandler("value.changed",(e=>{this.clear(),this.list&&this.source.getValue().forEach((e=>{let t=this.createItem(e);this.list.append(t)}))})),this.projection.registerHandler("value.swapped",(e=>{const[t,i]=e;let s=this.getItem(t),n=this.getItem(i),r=+this.getItemIndex(s);this.getItemIndex(n),r!==t.index&&this.swapItem(s,n)}))}},Et=Object.assign(Object.create(lt),wt);Object.defineProperty(Et,"size",{get(){return this.items.size}}),Object.defineProperty(Et,"hasList",{get(){return(0,s.Re)(this.list)}});var Ct=0;const jt={content:{type:"static",static:{type:"text",content:"Add"}}},Lt={content:{type:"static",static:{type:"text",content:"Remove"}}},xt={table:null,header:null,body:null,footer:null,elements:null,contentElements:null,content:null,init(){const{content:e=[],template:t,focusable:i=!0}=this.schema;return this.elements=new Map,this.focusable=i,this.content=e,this.contentElements=new Map,this.template=this.model.getProjectionSchema(this.source.accept,t.tag)[0].projection,this},render(){const{content:e,action:t={}}=this.schema,{disposition:i}=this.template,n=(0,s.DZ)();if(!Array.isArray(e))throw new Error("Empty content for listfield");if((0,s.Re)(this.element)||(this.element=(0,s.wC)({class:["field","field--table"],id:this.id,tabindex:-1,dataset:{nature:"field",view:"table",id:this.id}}),this.readonly&&this.element.classList.add("readonly"),Ze.call(this.projection,this.element,this.schema.style)),e.forEach((e=>{if("table"===e.type){let t=(0,s.XI)(e.table,{});const{style:i,header:r,body:a={},footer:l}=t;if(this.table=(0,s.W_)({class:["field--table__table"],tabindex:0,dataset:{nature:"field-component",view:"table",id:this.id}}),r){const{style:e}=r;this.header=(0,s.ZL)({class:["field--table-header"],dataset:{nature:"field-component",view:"table",id:this.id}}),Ze.call(this.projection,this.header,e),this.table.append(this.header)}if(a){const{style:e}=a;this.body=(0,s.uI)({class:["field--table-body"],dataset:{nature:"field-component",view:"table",id:this.id}}),Ze.call(this.projection,this.body,e),this.table.append(this.body)}if(l){const{style:e}=l;this.footer=(0,s.tH)({class:["field--table-footer"],dataset:{nature:"field-component",view:"table",id:this.id}}),Ze.call(this.projection,this.footer,e),this.table.append(this.footer)}t.currentState=null,this.contentElements.set(t,this.table),Ze.call(this.projection,this.table,i),n.append(this.table)}else if("action"===e.type){let t=(0,s.XI)(e,jt);const{content:i,style:r}=t;let a=Li.call(this,i,null),l=(0,s.ax)({class:["field-action","field--table__add"],tabindex:0,dataset:{nature:"field-component",view:"table",component:"action",id:this.id,action:"add"}},[a]);t.currentState=null,this.contentElements.set(t,l),Ze.call(this.projection,l,r),n.append(l)}else{let t=Li.call(this,e);this.contentElements.set(e,t),n.append(t)}})),this.header){let e=(0,s.ui)({class:["field--table-header-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id}});i.forEach((t=>{const{header:i}=t,{style:n,content:r}=i;var a=Li.call(this,r),l=(0,s.zI)({class:["field--table-header-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},a);Ze.call(this.projection,l,n),e.append(l)}));let t=(0,s.Ss)({class:["field--table-header-cell","field--table-header-cell--action"]},"Action");e.append(t),this.header.append(e)}return this.source.hasValue()&&this.source.getValue().forEach((e=>{this.addRow(e)})),n.hasChildNodes()&&(this.element.append(n),this.bindEvents()),this.refresh(),this.element},hasChanges:()=>!1,hasValue(){return this.body.rows.length>0},getValue(){return this.body.rows},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){if(!this.readonly)return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){this.hasValue()?(this.element.classList.remove("empty"),this.table.classList.remove("empty")):(this.element.classList.add("empty"),this.table.classList.add("empty")),this.contentElements.forEach(((e,t)=>{if(!Array.isArray(t.state))return;const{currentState:i}=t,n=it.call(this,t,t.state);if(i===t.currentState)return;let r=null;r=n?Li.call(this,n.content,null):Li.call(this,t.content,null),(0,s.ep)(e).append(r)})),this.hasError?this.element.classList.add("error"):this.element.classList.remove("error")},createElement(){return this.source.createElement()},addRow(e){const{action:t={},before:i={},after:n={}}=this.schema,{disposition:r}=this.template,a=(0,s.XI)(e.index,this.table.rows.length),l="row"+Ct++,o=(0,s.ui)({class:["field--table-row"],tabindex:-1,dataset:{nature:"field-component",view:"table",id:this.id,index:a,elementId:l}});this.elements.set(l,o),r.forEach((t=>{const{body:i}=t,{style:n,content:r}=i;var a=Li.call(this,r,e),l=(0,s.Ss)({class:["field--table-cell"],dataset:{nature:"field-component",view:"table",id:this.id}},a);Ze.call(this.projection,l,n),o.append(l)}));var c=(0,s.Ss)({class:["field--table__cell-action"]}),{content:h,style:u}=(0,s.XI)(t.remove,Lt),d=Li.call(this,h),p=(0,s.ax)({class:["btn","field--table__button"],dataset:{nature:"field-component",view:"list",component:"action",id:this.id,action:"remove",rowId:l}},d),m=(0,s.ax)({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-up",rowId:l}},"Move up"),f=(0,s.ax)({class:["btn","field--table__button"],dataset:{nature:"field-component",id:this.id,action:"move-down",rowId:l}},"Move down");Ze.call(this.projection,p,u),c.append(p,m,f),o.append(c),this.body.append(o),this.refresh()},removeRow(e){var t=this.body.rows.item(e.index);if(!(0,s.Re)(t))throw new Error("Table error: Row not found");(0,s.ep)(t),t.remove();for(let t=e.index;t<this.body.rows.length;t++){const e=this.body.rows.item(t),{index:i}=e.dataset;e.dataset.index=+i-1}this.refresh()},removeElement(e){return this.source.removeElement(e)},delete(e){if(e===this.element||e===this.table)return void this.source.delete();const{index:t}=e.dataset;this.source.removeElementAt(+t)||(this.environment.notify("This element cannot be deleted"),(0,n.lL)(e))},bindEvents(){this.element.addEventListener("click",(e=>{const{target:t}=e,i=function(e){const t="field-component";return e.dataset.nature===t?e:(0,s.wr)(e,(e=>e.dataset.nature===t))}(t);if(!(0,s.Re)(i))return;const{id:n,action:r}=i.dataset;if(n===this.id)if("add"===r)this.createElement();else if("remove"===r){const{rowId:e}=i.dataset;let t=this.elements.get(e);this.delete(t)}else if("move-up"===r){const{rowId:e}=i.dataset;let t=this.elements.get(e),s=t.previousElementSibling;s&&s.before(t)}else if("move-down"===r){const{rowId:e}=i.dataset;let t=this.elements.get(e),s=t.nextElementSibling;s&&s.after(t)}}),!0),this.projection.registerHandler("value.added",(e=>{this.addRow(e)})),this.projection.registerHandler("value.removed",(e=>{this.removeRow(e)})),this.projection.registerHandler("value.changed",(e=>{(0,s.ep)(this.body),this.source.getValue().forEach((e=>{this.addRow(e)}))}))}},Rt=Object.assign(Object.create(lt),xt),It=e=>(0,s.Re)(e,["input","textarea"]),_t="error";function At(){return(0,s.Re)(this.choice)||(this.choice=(0,s.w_)({class:["bare-list","field--textbox__choices"],dataset:{nature:"field-component",view:"text",component:"choice",id:this.id}}),this.append(this.choice)),this.choice}function Ot(e){return(0,s.HV)({class:["field--textbox__choice"],tabindex:0,dataset:{nature:"field-component",view:"text",component:"choice-item",value:e,id:this.id}},e)}function St(e){return e.parentElement===this.choice?e:(0,s.wr)(e,(e=>e.parentElement===this.choice),3)}function Vt(e){const{placeholder:t="",type:i}=e;let n="";return n=this._placeholder?(0,s.XI)(Ci.call(this,this._placeholder),""):(0,s.XI)(Ci.call(this,t),""),this.readonly||this.resizable?(0,s.kQ)({class:["field--textbox__input","field--textbox__input-pseudo"],editable:!this.readonly,title:n,dataset:{placeholder:n,nature:"field-component",view:this.type,id:this.id}}):this.multiline?(0,s.nE)({class:["field--textbox__input"],placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}}):(0,s.Ju)({class:["field--textbox__input"],type:(0,s.XI)(i,"text"),placeholder:n,title:n,dataset:{nature:"field-component",view:this.type,id:this.id}})}const Tt={input:null,choice:null,value:"",placeholder:null,multiline:!1,resizable:!1,content:null,hasOwnSource:!1,init(e={}){Object.assign(this.schema,e);const{multiline:t=!1,placeholder:i="",resizable:n=!1,focusable:r=!0,source:a}=this.schema;if(this.multiline=t,this.focusable=r,this.resizable=n,this.children=[],this._placeholder=i,a){const e=this.projection.concept.getAttribute(a).getTarget();e.register(this),this.source=e,this.hasOwnSource=!0}return(0,s.RI)(this.schema,"choice")||(this.schema.choice={}),this},focus(e){return this.input.focus(),this},focusIn(){return this.focused=!0,this.value=this.getValue(),this.element.classList.add("active"),this.element.classList.add("focus"),this},focusOut(){return this.hasChanges()&&this.setValue(this.getValue(),!0),(0,s.hr)(this.getValue())&&(this.input.textContent=""),this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.choice&&(0,n.Cp)(this.choice),this.input.blur(),this.element.classList.remove("active"),this.element.classList.remove("focus"),this.refresh(),this.focused=!1,this},hasChanges(){return this.value!=this.getValue()},hasValue(){return!(0,s.xb)(this.getValue())},getValue(){return It(this.input)?this.input.value:this.input.textContent},setValue(e,t=!1){var i;(i=t?this.source.setValue(e):{success:!0}).success||((0,n.lL)(this.element),this.environment.notify(i.message,"error")),this.setInputValue(e),this.value=e,this.refresh()},setInputValue(e){It(this.input)?this.input.value=e:this.input.textContent=e},getCandidates(){let e=this.source.getCandidates();return Array.isArray(e)?e:[]},enable(){return this.input.disabled=!1,this.input.tabIndex=0,this.disabled=!1,this.element.classList.add("disabled"),this},disable(){return this.input.disabled=!0,this.input.tabIndex=-1,this.disabled=!0,this.element.classList.remove("disabled"),this},refresh(){it.call(this,this.schema,this.schema.state),this.hasValue()?this.element.classList.remove("empty"):this.element.classList.add("empty"),this.element.dataset.value=this.value,this.hasError?(this.element.classList.add(_t),this.input.classList.add(_t)):(this.element.classList.remove(_t),this.input.classList.remove(_t)),this.choice&&this.filterChoice(this.getValue())},render(){const e=(0,s.DZ)(),{container:t,input:i={},style:n}=this.schema;if((0,s.Re)(this.element)||(this.element=(0,s.wC)({id:this.id,class:["field","text-field","field--textbox"],dataset:{nature:"field",view:"text",id:this.id,disabled:this.disabled,readonly:this.readonly,value:""}}),this.readonly&&this.element.classList.add("readonly"),this.disabled&&this.element.classList.add("disabled"),Ze.call(this.projection,this.element,this.schema.style)),t){const{content:i=[],style:s}=t;i.forEach((t=>{if("input"===t.type){const{style:i}=t.input;this.input=Vt.call(this,t.input),this.disabled&&(this.input.disabled=!0),this.focusable?this.input.tabIndex=0:this.input.dataset.ignore="all",Ze.call(this.projection,this.input,i),this.multiline&&this.input.classList.add("field--textbox__input--multiline"),e.append(this.input)}else{let i=Li.call(this,t,null,{focusable:!1});e.append(i)}})),Ze.call(this.projection,this.element,s)}else{if(!(0,s.Re)(this.input)){const{style:t}=i;this.input=Vt.call(this,i),this.disabled&&(this.input.disabled=!0),this.focusable?this.input.tabIndex=0:this.input.dataset.ignore="all",Ze.call(this,this.input,t),this.multiline&&this.input.classList.add("field--textbox__input--multiline"),e.append(this.input)}Ze.call(this.projection,this.element,n)}return e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.source.hasValue()&&this.setValue(this.source.getValue()),this.refresh(),this.element},filterChoice(e){const{children:t}=this.choice;if((0,s.hr)(e)){for(let e=0;e<t.length;e++){const i=t[e];(0,n.$Z)(i),i.hidden=!1}return!0}let i=e.trim().toLowerCase().replace(/\s+/g," ").split(" ");for(let e=0;e<t.length;e++){const s=t[e],{value:r}=s.dataset;i.some((e=>r.toLowerCase().includes(e)))?((0,n.$Z)(s),s.hidden=!1):((0,n.Cp)(s),s.hidden=!0)}return!0},selectChoice(e){if(!(0,s.Re)(e))return;const t=function(e){return e.dataset.value}(e);return this.setValue(t,!0),this.input.focus(),(0,n.Cp)(this.choice),this},update(e,t,i){"delete"!==e?"value.changed"===e&&this.setValue(t):this.delete()},_spaceHandler(e){const t=new Set(this.getCandidates());if(0===t.size)this.notify("Enter any text.",n.k$.INFO);else{At.call(this);const e=(0,s.DZ)();t.forEach((t=>e.append(Ot.call(this,t)))),(0,s.ep)(this.choice).append(e),this.filterChoice(this.getValue()),(0,n.$Z)(this.choice)}},escapeHandler(e){let t=!0;if(this.messageElement&&!(0,n.xj)(this.messageElement)&&((0,n.Cp)(this.messageElement),t=!1),this.choice&&!(0,n.xj)(this.choice)&&((0,n.Cp)(this.choice),t=!1),t){let t=(0,s.wr)(e,(e=>0===e.tabIndex)),i=this.environment.resolveElement(t);return i&&i.focus(t),!1}return this.input.focus(),!0},enterHandler(e){const t=St.call(this,e);return t?this.selectChoice(t):this.multiline||(e===this.input?this.setValue(this.getValue(),!0):this.focus()),!0},backspaceHandler(e){St.call(this,e)&&this.input.focus()},clickHandler(e){const t=St.call(this,e);(0,s.Re)(t)&&this.selectChoice(t)},arrowHandler(e,t){if(!(0,s.Re)(t))return!1;const{parentElement:i}=t,r=()=>!!this.parent&&this.parent.arrowHandler(e,this.element);let a=St.call(this,t);if((0,s.Re)(a)){let t=(0,n.As)(a,e,this.choice);return(0,s.Re)(t)?(t.focus(),!0):this.arrowHandler(e,this.choice)}if(i!==this.element)return r();let l=null;if("right"===e){if(t===this.input&&!(this.getValue().length<(0,n.qO)(this.input)+1))return!1;l=(0,n.As)(t,e,this.element,!1)}else if("left"===e){if(t===this.input&&0!==(0,n.qO)(this.input))return!1;l=(0,n.As)(t,e,this.element,!1)}else l=(0,n.As)(t,e,this.element,!1);return(0,s.Re)(l)&&l.dataset.id===this.id?("up"===e?l=(0,n.GV)(this.choice):"down"===e?l=(0,n.Sd)(this.choice):"left"===e?l=(0,n.GF)(this.choice):"right"===e&&(l=(0,n.EE)(this.choice)),l.focus(),!0):r()},bindEvents(){this.element.addEventListener("input",(e=>{this.hasError&&this.source.setValue(this.getValue(),!0),this.refresh()})),this.hasOwnSource||this.projection.registerHandler("value.changed",(e=>{this.setValue(e)}))}},kt=Object.assign(Object.create(lt),Tt),Mt={binary:(e,t,i)=>Object.create(ht,{object:{value:"field"},name:{value:"binary-field"},type:{value:"binary"},id:{value:Ht()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),choice:(e,t,i)=>Object.create(gt,{object:{value:"field"},name:{value:"choice-field"},type:{value:"choice"},id:{value:Ht()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),list:(e,t,i)=>Object.create(Et,{object:{value:"field"},name:{value:"list-field"},type:{value:"list"},id:{value:Ht()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),table:(e,t,i)=>Object.create(Rt,{object:{value:"field"},name:{value:"table-field"},type:{value:"table"},id:{value:Ht()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept}}),text:(e,t,i)=>Object.create(kt,{object:{value:"field"},name:{value:"text-field"},type:{value:"text"},id:{value:Ht()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}})};var $t=0;const Ht=()=>"field"+$t++,Pt={createField(e,t,i){const{type:n}=t,r=Mt[n];if((0,s.le)(r))throw new Error(`Missing handler: The '${n}' field could not be handled`);var a=r(e,t,i);if((0,s.le)(a))throw new Error(`Bad request: The '${n}' field could not be created`);return a.errors=[],a.readonly=(0,s.XI)(t.readonly,!1),(0,s.le)(a.id)&&(a.id=Ht()),a}},Nt={init(){throw new Error("This function has not been implemented")},element:null,children:null,statusElement:null,attached:null,readonly:!1,visible:!1,disabled:!1,active:!1,focused:!1,get hasAttached(){return!(0,s.xb)(this.attached)},attach(e,t){this.attached.push(e)},detach(e){this.attached.slice(this.attached.indexOf(e),1)},getAttached(e){return(0,s.mf)(e)?this.attached.filter((t=>e(t))):this.attached},show(){return(0,n.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,n.Cp)(this.element),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},focus(){return this.element.focus(),this.focused=!0,this.active=!0,this},_focusIn:e=>!1,navigate(e,t,i){return this.focusable?(this.element.focus(),!0):this.parent.arrowHandler(e,this.element)},clear:()=>!0,delete(){this.environment.notify("This element cannot be removed",n.k$.WARNING,1500),(0,n.lL)(this.element)},spaceHandler(e){return this.arrowHandler("right",e)},_spaceHandler(e){return this.environment.notify("Nothing do here.",n.k$.NORMAL,1500),!1},escapeHandler(e){let t=(0,s.wr)(e,(e=>0===e.tabIndex));return this.projection.resolveElement(t).focus(t),!0},enterHandler(e){this.element.click()},deleteHandler(e){return this.environment.notify("This element cannot be removed",n.k$.WARNING,1500),(0,n.lL)(this.element),!1},backspaceHandler(e){return this.arrowHandler("left",e)},arrowHandler(e,t){return!!this.parent&&this.parent.arrowHandler(e,t)},clickHandler:e=>(console.warn("CLICK_HANDLER NOT IMPLEMENTED"),!1),controlHandler:e=>(console.warn("CONTROL NOT IMPLEMENTED"),!1)},Dt=Object.assign(Nt),Bt={init(){return this.children=[],this},render(){const e=(0,s.DZ)(),{help:t,style:i,content:n}=this.schema;return(0,s.Re)(this.element)||(this.element=(0,s.K$)({class:["static","audio-static"],src:n,dataset:{nature:"static",static:"audio",id:this.id,ignore:"all"}})),(0,s.le)(t)||(this.element.title=t),Ze.call(this.projection,this.element,i),e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},bindEvents(){}},Xt=Object.assign(Object.create(Dt),Bt);function Zt(e,t){let i=e.param.find((e=>e.name===t));if((0,s.le)(i))return;const{type:n="string",value:r}=i;let a=(0,s.XI)(r,i.default);return(0,s.le)(a)?null:"string"===n?a.toString():"number"===n?+a:void 0}function Wt(e){if((0,s.le)(e))return"";const{type:t}=e;return"property"===t?(this.hasProperty=!0,(0,s.XI)(this.source.getProperty(e.name),"")):"param"===t?Zt.call(this,this.schema.template,e.name):"raw"===t?(0,s.Bv)(e.raw):e}function zt(e){return(0,s.hr)(e)?"":e.startsWith("http://")||e.startsWith("https://")?new URL(e).href:zt(`https://${e}`)}const Ft={url:null,alt:null,width:null,height:null,init(){const{url:e,width:t,height:i,alt:s}=this.schema;return this.width=t,this.height=i,this.alt=s,this},render(){let e=!1;const{help:t,style:i,url:n}=this.schema;return this.url=zt(Wt.call(this,n)),(0,s.Re)(this.element)||(this.element=(0,s.Bi)({class:["static","image-static"],src:this.url,alt:this.alt,dataset:{nature:"static",static:"image",id:this.id,ignore:"all"}}),e=!0),(0,s.le)(this.width)||isNaN(this.width)||(this.element.width=this.width),(0,s.le)(this.height)||isNaN(this.height)||(this.element.height=this.height),(0,s.le)(t)||(this.element.title=t),Ze.call(this.projection,this.element,i),e&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return(0,s.hr)(this.url)?this.element.classList.add("empty"):this.element.classList.remove("empty"),this},update(){const{url:e}=this.schema;return this.element.src=zt(Wt.call(this,e)),this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(e=>{this.update()})),this.projection.registerHandler("value.added",(e=>{this.update()})),this.projection.registerHandler("value.removed",(e=>{this.update()})))}},qt=Object.assign(Object.create(Dt),Ft),Ut={email:e=>`mailto:${e}`,phone:e=>`tel:${e}`,link:e=>`${e}`};function Qt(e,t){let i=e.param.find((e=>e.name===t));if((0,s.le)(i))return;const{type:n="string",value:r}=i;let a=(0,s.XI)(r,i.default);return(0,s.le)(a)?null:"string"===n?a.toString():"number"===n?+a:void 0}function Gt(e){if((0,s.le)(e))return"";const{type:t}=e;return"property"===t?(this.hasProperty=!0,(0,s.XI)(this.source.getProperty(e.name),"")):"param"===t?Qt.call(this,this.schema.template,e.name):"raw"===t?(0,s.Bv)(e.raw):e}const Kt={url:null,urlType:null,href:null,hrefHandler:null,content:null,init(){const{content:e=[],urlType:t="link"}=this.schema;if(this.content=e,this.urlType=t,this.children=[],this.hrefHandler=Ut[this.urlType],!(0,s.mf)(this.hrefHandler))throw new TypeError("type not handled");return this},render(){let e=!1;const t=(0,s.DZ)(),{help:i,style:n,url:r}=this.schema;return this.href=this.hrefHandler(Gt.call(this,r)),(0,s.Re)(this.element)||(this.element=(0,s.cH)({class:["static","link"],href:this.href,dataset:{nature:"static",static:"link",id:this.id,ignore:"all"}}),"link"===this.urlType&&(this.element.target="_blank"),e=!0),this.content.forEach((e=>{let i=Li.call(this,e,this.projection.concept,{focusable:!1});t.append(i)})),(0,s.le)(i)||(this.element.title=i),Ze.call(this.projection,this.element,n),t.hasChildNodes()&&this.element.append(t),e&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this},update(){const{url:e}=this.schema;return this.element.href=this.hrefHandler(Gt.call(this,e)),(0,s.ep)(this.element),this.content.forEach((e=>{this.element.append(Li.call(this,e,this.projection.concept,{focusable:!1}))})),this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(e=>{this.update()})),this.projection.registerHandler("value.added",(e=>{this.update()})),this.projection.registerHandler("value.removed",(e=>{this.update()})))}},Jt=Object.assign(Object.create(Dt),Kt);function Yt(e,t){let i=e.param.find((e=>e.name===t));if((0,s.le)(i))return;const{type:n="string",value:r}=i;let a=(0,s.XI)(r,i.default);return(0,s.le)(a)?null:"string"===n?a.toString():"number"===n?+a:void 0}function ei(e){if((0,s.le)(e))return"";const{type:t}=e;return"property"===t?(this.hasProperty=!0,(0,s.XI)(this.source.getProperty(e.name),"")):"param"===t?Yt.call(this,this.schema.template,e.name):"html"===t?(0,s.Bv)(e.html):"raw"===t?(0,s.Bv)(e.raw):e}const ti={editable:null,focusable:null,hasProperty:!1,asHTML:!1,init(e={}){Object.assign(this.schema,e);const{content:t,editable:i=!1,focusable:s=!1}=this.schema;return this.children=[],this._content=t,this.editable=i,this.focusable=s,this},render(){let e=!1;const{content:t,help:i,style:n}=this.schema;if(!(0,s.Re)(this.element)){if(this.element=(0,s.kQ)({class:["text","static","text-static"],editable:this.editable,dataset:{nature:"static",view:"text",static:"text",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0),Array.isArray(t))t.forEach((e=>{let t=ei.call(this,e),i=(0,s.kQ)({class:["text","static","text-static"],dataset:{nature:"static-component",view:"text",static:"text",content:t,id:this.id,ignore:"all"}},t);Ze.call(this.projection,i,e.style),this.element.append(i)}));else{let e=ei.call(this,t);this.element.append(e),this.element.content=e}e=!0}return(0,s.le)(i)||(this.element.title=i),Ze.call(this.projection,this.element,n),e&&this.bindEvents(),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},getLength(){return this.element.textContent.length},backspaceHandler(e){return this.arrowHandler("left",e)},arrowHandler(e,t){if(!this.editable&&this.parent)return this.parent.arrowHandler(e,t);if("right"===e){if(this.getLength()<(0,n.qO)(this.element)+1&&this.parent)return this.parent.arrowHandler(e,t)}else if("left"===e){if(0===(0,n.qO)(this.element)&&this.parent)return this.parent.arrowHandler(e,t)}else if(this.parent)return this.parent.arrowHandler(e,t);return!1},escapeHandler(e){let t=(0,s.wr)(e,(e=>0===e.tabIndex));this.projection.resolveElement(t).focus(t)},update(){const{content:e}=this.schema;return(0,s.ep)(this.element),Array.isArray(e)?e.forEach((e=>{this.element.append((0,s.kQ)({class:["text","static","text-static"],dataset:{nature:"static-component",view:"text",static:"text",id:this.id,ignore:"all"}},ei.call(this,e)))})):this.element.append(ei.call(this,e)),this},refresh(){return this},bindEvents(){this.hasProperty&&(this.projection.registerHandler("value.changed",(e=>{this.update()})),this.projection.registerHandler("value.added",(e=>{this.update()})),this.projection.registerHandler("value.removed",(e=>{this.update()})))}},ii=Object.assign(Object.create(Dt),ti),si={contentType:null,editable:null,focusable:null,init(e={}){Object.assign(this.schema,e);const{focusable:t=!0}=this.schema;return this.children=[],this.focusable=t,this},render(){const e=(0,s.DZ)(),{help:t,style:i,content:n}=this.schema;return(0,s.Re)(this.element)||(this.element=(0,s.ax)({class:["btn","static"],dataset:{nature:"static",view:"plink",static:"plink",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0)),n.forEach((t=>{let i=Li.call(this,t,this.projection.concept,{focusable:!1});e.append(i)})),(0,s.le)(t)||(this.element.title=t),Ze.call(this.projection,this.element,i),e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},arrowHandler(e,t){return(!this.editable&&this.parent||!!this.parent)&&this.parent.arrowHandler(e,t)},escapeHandler(e){let t=(0,s.wr)(e,(e=>0===e.tabIndex));this.environment.resolveElement(t).focus(t)},enterHandler(e){const t=this.projection.schema.findIndex((e=>e.tags.includes(this.schema.tag)));return this.projection.changeView(t),!1},clickHandler(e){let t=this.projection.findView(this.schema.tag);return-1===t||this.projection.changeView(t),!1},refresh(){return this},bindEvents(){}},ni=Object.assign(Object.create(Dt),si),ri={template:null,selector:null,content:null,init(){return this.selector=this.schema.selector,this.template=(0,s.t4)(this.selector),this},render(){const{style:e,content:t}=this.schema;return(0,s.UG)(this.element)||(this.element=(0,s.jC)(this.template)),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},refresh(){return this}},ai=Object.assign(Object.create(Dt),ri);function li(e,t){let i=e.param.find((e=>e.name===t));if((0,s.le)(i))return;const{type:n="string",value:r}=i;let a=(0,s.XI)(r,i.default);return(0,s.le)(a)?null:"string"===n?a.toString():"number"===n?+a:void 0}const oi={contentType:null,editable:null,focusable:null,disabled:null,init(e={}){Object.assign(this.schema,e);const{focusable:t=!0,disabled:i=!1}=this.schema;return this.children=[],this.focusable=t,this.disabled=i,this},render(){const e=(0,s.DZ)(),{help:t,style:i,content:n}=this.schema;return(0,s.Re)(this.element)||(this.element=(0,s.ax)({class:["btn","static"],dataset:{nature:"static",view:"button",static:"button",id:this.id,ignore:"all"}}),this.focusable&&(this.element.tabIndex=0)),n.forEach((t=>{let i=Li.call(this,t,this.projection.concept,{template:this.schema.template,focusable:!1});e.append(i)})),(0,s.le)(t)||(this.element.title=t),Ze.call(this.projection,this.element,i),e.hasChildNodes()&&(this.element.append(e),this.bindEvents()),this.refresh(),this.element},focusIn(){return this.focused=!0,this.element.classList.add("active"),this},focusOut(){return this.messageElement&&((0,n.Cp)(this.messageElement),(0,s.ep)(this.messageElement)),this.element.classList.remove("active"),this.refresh(),this.focused=!1,this},arrowHandler(e,t){return(!this.editable&&this.parent||!!this.parent)&&this.parent.arrowHandler(e,t)},escapeHandler(e){let t=(0,s.wr)(e,(e=>0===e.tabIndex));this.environment.resolveElement(t).focus(t)},enterHandler(e){const t=this.projection.schema.findIndex((e=>e.tags.includes(this.schema.tag)));return this.projection.changeView(t),!1},clickHandler(e){let t=this.source;if(this.schema.bind&&(t=this.source.getValue(!0)),this.schema.action){const{type:e,value:i,target:n}=this.schema.action;if((0,s.le)(n)&&t.createElement(),(0,s.Kn)(i))for(const e in i){const t=i[e];"param"===t.type&&(i[e]=li.call(this,this.schema.template,t.name))}return"attribute"===n.type&&t.getAttribute(n.name).target.createElement({value:i}),!1}return this.environment.triggerEvent({name:this.schema.trigger,args:[t]}),!1},refresh(){return this},bindEvents(){}},ci=Object.assign(Object.create(Dt),oi);var hi=0;const ui=()=>"static"+hi++,di={audio:(e,t,i)=>Object.create(Xt,{object:{value:"static"},name:{value:"audio-static"},type:{value:"audio"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),plink:(e,t,i)=>Object.create(ni,{object:{value:"static"},name:{value:"plink-static"},type:{value:"plink"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),image:(e,t,i)=>Object.create(qt,{object:{value:"static"},name:{value:"image-static"},type:{value:"image"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),link:(e,t,i)=>Object.create(Jt,{object:{value:"field"},name:{value:"link-static"},type:{value:"link"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),text:(e,t,i)=>Object.create(ii,{object:{value:"static"},name:{value:"text-static"},type:{value:"text"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),html:(e,t,i)=>Object.create(ai,{object:{value:"static"},name:{value:"html-static"},type:{value:"html"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}}),button:(e,t,i)=>Object.create(ci,{object:{value:"static"},name:{value:"button-static"},type:{value:"button"},id:{value:ui()},model:{value:e},schema:{value:t},projection:{value:i}})},pi={createStatic(e,t,i){const{type:n}=t,r=di[n];if((0,s.le)(r))throw new Error(`Missing handler: The '${n}' static could not be handled`);var a=r(e,t,i);if((0,s.le)(a))throw new Error(`Bad request: The '${n}' static could not be created`);return(0,s.le)(a.id)&&(a.id=ui()),a}},mi={focusable:null,readonly:!1,visible:!1,editable:!1,active:!1,container:null,elements:null,children:null,editing:!1,getStyle(){return this.schema.style},setStyle(e){return this.schema.style=e,Ze.call(this.projection,this.container,e),this.refresh(),!0},getContainer(){return this.container},isRoot(){return(0,s.le)(this.parent)},getField(e){return this.projection.getField(e)},getStatic(e){return this.projection.getStatic(e)},getLayout(e){return this.environment.getLayout(e)},show(){return(0,n.$Z)(this.element),this.visible=!0,this.active=!0,this},hide(){return(0,n.Cp)(this.element),this.visible=!1,this},toggle(){return(0,n.ZN)(this.container),this.visible=!this.visible,this},_focusIn:e=>!1,spaceHandler(e){return e===this.container&&!(0,s.le)(this.parent)&&this.parent.spaceHandler(this.container)},_spaceHandler(e){return console.warn(`CTRL_SPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},escapeHandler(e){if(this.isRoot())return!1;let t=(0,s.wr)(e,(e=>0===e.tabIndex)),i=this.environment.resolveElement(t);return!(0,s.le)(i)&&(i.focus(t),!0)},enterHandler(e){let t=(0,s.sb)('[tabindex]:not([tabindex="-1"])',this.container),i=this.environment.resolveElement(t);return!(0,s.le)(i)&&(i.focus(),!0)},delete(){var e=this.source.delete();e.success||this.environment.notify(e.message)},deleteHandler(e){if(this.projection.element!==this)return!1;if(!this.projection.optional)return(0,n.lL)(this.container),!1;let t=(0,s.wr)(e,(e=>0===e.tabIndex)),i=this.container.cloneNode(!0);this.source.hasParent()&&this.environment.save(this.source.getParent(),i),this.source.delete();let r=this.environment.resolveElement(t);return(0,s.le)(r)||r.focus(),!1},backspaceHandler(e){return console.warn(`BACKSPACE_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},arrowHandler(e,t){if(t===this.container)return!(0,s.le)(this.parent)&&this.parent.arrowHandler(e,this.container);let i=(0,n.As)(t,e,this.container);if(!(0,s.Re)(i))return!(0,s.le)(this.parent)&&"layout"===this.parent.object&&this.parent.arrowHandler(e,this.container);let r=this.environment.resolveElement(i);return r&&((0,s.mf)(r.navigate)?r.navigate(e):r.focus()),!0},shiftHandler(e,t){if("up"===e){let e=(0,n.a2)(window.getComputedStyle(this.container).marginTop);this.container.style.marginTop=`${e+1}px`}return!0},_arrowHandler(e,t){return console.warn(`CTRL_ARROW_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},clickHandler(e){return console.warn(`CLICK_HANDLER NOT IMPLEMENTED FOR ${this.name}`),!1},controlHandler(e){this.toolbar&&this.toolbar.remove()}},fi={ROW:"row",COLUMN:"column"},gi={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center",stretch:"stretch",baseline:"baseline"},bi={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center","space-between":"space-between","space-around":"space-around","space-evenly":"space-evenly"};var vi=0;function yi(e,t,i){return Object.create(Ei,{object:{value:"layout"},name:{value:"flex-layout"},type:{value:"flex"},id:{value:"layout"+vi++},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}})}const wi={orientation:null,wrappable:null,alignItems:null,justifyContent:null,args:null,init(e={}){const{editable:t=!0,focusable:i=!1}=this.schema,{orientation:s=fi.ROW,wrappable:n=!0,alignItems:r,justifyContent:a}=this.schema.layout;return this.orientation=s,this.wrappable=n,this.alignItems=r,this.justifyContent=a,this.focusable=i,this.editable=t,this.elements=[],this.children=[],this.args=e,Object.assign(this,e),this},getOrientation(){return this.orientation},setOrientation(e){(0,s.RI)(fi,e)&&(this.orientation=e,this.refresh())},collapse(e=!1){if(!this.collapsed||e)return this.collapseContainer=(0,s.wC)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(e=!1){if(!this.collapsed&&!e)return;let t=(0,s.DZ)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(t),this.collapseContainer.remove(),this.collapsed=!1,this.refresh(),this},render(){const{label:e,content:t,style:i,help:n}=this.schema,r=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["layout-container"],dataset:{nature:"layout",layout:"flex",id:this.id}})),n&&(this.container.title=n);for(let e=0;e<t.length;e++){let i=Li.call(this,t[e],null,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),r.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Ze.call(this.projection,this.container,i),r.hasChildNodes()&&(this.container.append(r),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="flex",this.refresh(),this.container},refresh(){return this.container.style.flexDirection=this.orientation,this.container.style.justifyContent=bi[this.justifyContent],this.container.style.alignItems=gi[this.alignItems],this.wrappable?this.container.style.flexWrap="wrap":this.container.style.flexWrap="nowrap",this},focus(e){if(this.focusable)this.container.focus();else{let e=(0,s.sb)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.le)(e))return!1;let t=this.environment.resolveElement(e);t&&t.focus(e)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(e=>{const{target:t}=e,{prop:i}=t.dataset;"orientation"===i&&this.setOrientation(t.value)})),this.projection.registerHandler("view.changed",((e,t)=>{t&&t.parent===this.projection&&(e.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(e=>{this.collapsed?this.expand():this.collapse()}))}},Ei=Object.assign({},mi,wi);function Ci(e){return"property"===e.type?this.projection.concept.getProperty(e.name):e}function ji(e,t,i){const{tag:r,placeholder:a={},style:l,options:o}=t;if(!i.hasAttribute(e)){let t=`Attribute '${e}' does not exist in the concept '${i.name}'`;return this.environment.notify(t,n.k$.ERROR),this.environment.addError({source:"projection",code:"attribute_not_found",message:t}),(0,s.oL)({hidden:!0},e)}(0,s.XI)(t.required,i.isAttributeRequired(e))&&!i.isAttributeCreated(e)&&i.createAttribute(e);const c={name:e,get created(){return i.isAttributeCreated(e)},schema:t,placeholder:(0,s.oL)({class:["projection-element"],hidden:!0},e),parent:this,projection:this.projection,element:null};if(this.projection.attributes.push(c),!c.created){const{content:t}=a;return c.placeholder=t?Li.call(this,t,i,{focusable:!0}):(0,s.oL)({class:["projection-element","projection-element--placeholder"],tabindex:0,dataset:{object:"attribute",id:e}},`Add ${e}`),c.placeholder.addEventListener("click",(t=>{i.createAttribute(e),this.projection.resolveElement(c.element).focus()})),c.placeholder}{const{target:t,schema:n}=i.getAttributeByName(e);let a=this.projection.model.createProjection(t,r).init(o);if(a.parent=this.projection,a._style=l,c.element=a.render(),(0,s.le)(c.element))return(0,s.oL)({hidden:!0},e);a.element.parent=this}return c.element}function Li(e,t,i={}){if(e.kind)return xi.call(this,e,t,i);const n=(0,s.XI)(t,this.projection.concept);if("container"===e.type){let t=yi(this.model,e,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerLayout(t),t.render()}if("layout"===e.type){let t=Xi.createLayout(this.model,e.layout,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerLayout(t),t.render()}if("field"===e.type){let t=Pt.createField(this.model,e.field,this.projection);return t.parent=this,t.init(i),this.model.registerField(t),t.render()}if("static"===e.type){let t=pi.createStatic(this.model,e.static,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerStatic(t),t.render()}if("dynamic"===e.type)return Li.call(this,e.dynamic,t,i);if("attribute"===e.type)return ji.call(this,e.name,e,n);if("template"===e.type){let n=e.name;"param"===n.type&&(n=this.projection.getParam(n.name));let r=this.model.getTemplateSchema(n);r.param&&(e.param&&r.param.forEach((t=>{Object.assign(t,e.param.find((e=>e.name===t.name)))})),this.projection.addParam(r.param));const a=(0,s.DZ)();let l=Object.assign({template:r},i);return r.content.forEach((e=>{a.append(Li.call(this,e,t,l))})),a}if("projection"===e.type){const{tag:t,style:i,src:r,required:a=!1}=e;if(r&&"attribute"===r.type)return ji.call(this,r.name,e,n);const l={schema:e,placeholder:(0,s.oL)({class:["projection-element"],hidden:!0}),parent:this,projection:this.projection,element:null};return l.update=function(e,r,a){if(l.element&&(l.element.remove(),l.element=null),n.hasValue()){let e=n.getValue(!0),r=this.projection.model.createProjection(e,t).init();r.placeholder=l.placeholder,r.parent=this.projection,l.element=r.render(),l.placeholder&&l.placeholder.after(l.element),(0,s.Re)(l.element)&&Ze.call(this.projection,l.element,i),r.element.parent=this.projection.element}},n.register(l),l.update(),l.element||l.placeholder}if("property"===e.type){const{name:t}=e;return this.projection.concept.getProperty(t)}if("html"===e.type){const{html:t}=e;return(0,s.Bv)(t)}if("raw"===e.type){const{raw:t}=e;return t}if("state"===e.type){let s={},n=it.call(this,s,e.state);return Li.call(this,n.content,t,i)}throw console.error(e),new TypeError("Bad argument: The type is not recognized")}function xi(e,t,i={}){const n=(0,s.XI)(t,this.projection.concept),{kind:r}=e;if("container"===r){let t=yi(this.model,e,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerLayout(t),t.render()}if("layout"===r){let t=Xi.createLayout(this.model,e,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerLayout(t),t.render()}if("field"===r){let t=Pt.createField(this.model,e,this.projection);return t.parent=this,t.init(i),this.model.registerField(t),t.render()}if("static"===r){let t=pi.createStatic(this.model,e,this.projection);return t.source=n,t.parent=this,t.init(i),this.model.registerStatic(t),t.render()}if("dynamic"===r)return Li.call(this,e,t,i);if("attribute"===r)return ji.call(this,e.name,e,n);if("template"===r){let n=e.name;"param"===n.type&&(n=this.projection.getParam(n.name));let r=this.model.getTemplateSchema(n);r.param&&(e.param&&r.param.forEach((t=>{Object.assign(t,e.param.find((e=>e.name===t.name)))})),this.projection.addParam(r.param));const a=(0,s.DZ)();return r.content.forEach((e=>{a.append(Li.call(this,e,t,i))})),a}if("projection"===r){const{tag:t,style:i,required:r=!1}=e,a={schema:e,placeholder:(0,s.oL)({class:["projection-element"],hidden:!0}),parent:this,projection:this.projection,element:null};return a.update=function(e,r,l){if(a.element&&(a.element.remove(),a.element=null),n.hasValue()){let e=n.getValue(!0),r=this.projection.model.createProjection(e,t).init();r.placeholder=a.placeholder,r.parent=this.projection,a.element=r.render(),a.placeholder&&a.placeholder.after(a.element),(0,s.Re)(a.element)&&Ze.call(this.projection,a.element,i),r.element.parent=this.projection.element}},n.register(a),a.update(),a.element||a.placeholder}if("property"===r){const{name:t}=e;return this.projection.concept.getProperty(t)}if("html"===r){const{html:t}=e;return(0,s.Bv)(t)}if("raw"===r){const{raw:t}=e;return t}if("state"===r){let s={},n=it.call(this,s,e.state);return Li.call(this,n.content,t,i)}throw console.error(e),new TypeError("Bad argument: The type is not recognized")}const Ri={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ii=[{concept:{name:"stack-layout"},type:"layout",tags:[],projection:{type:"stack",orientation:"vertical",disposition:[{type:"attribute",name:"orientation"}]}}],_i={orientation:null,args:null,init(e={}){const{orientation:t=Ri.HORIZONTAL,editable:i=!0,focusable:s=!1}=this.schema;return this.orientation=t,this.focusable=s,this.editable=i,this.elements=[],this.children=[],this.args=e,Object.assign(this,e),this},getOrientation(){return this.orientation},setOrientation(e){this.orientation=e,this.refresh()},render(){const{disposition:e,style:t,help:i}=this.schema;if(!Array.isArray(e))throw new SyntaxError("Bad disposition");const n=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["layout-container","stack-layout"],title:i,dataset:{nature:"layout",layout:"stack",id:this.id}}));for(let t=0;t<e.length;t++){let i=Li.call(this,e[t],null,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Ze.call(this.projection,this.container,t),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.container.style.display="flex",this.container.style.flexWrap="nowrap",this.refresh(),this.container},design(){return{concept:[{name:"stack-layout",nature:"concrete",attributes:[{name:"orientation",target:{name:"string",default:this.orientation,constraint:{values:["horizontal","vertical"]}}}]}],projection:Ii,handlers:{orientation:(e,t)=>{this.setOrientation(t)}}}},refresh(){return this.orientation===Ri.VERTICAL?this.container.style.flexDirection="column":this.orientation===Ri.HORIZONTAL&&(this.container.style.flexDirection="row"),this},focus(e){if(this.focusable)this.container.focus();else{let e=(0,s.sb)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.le)(e))return!1;let t=this.environment.resolveElement(e);t&&t.focus(e)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(e=>{const{target:t}=e,{prop:i}=t.dataset;"orientation"===i&&this.setOrientation(t.value)})),this.projection.registerHandler("view.changed",((e,t)=>{t&&t.parent===this.projection&&(e.parent=this)}))}},Ai=Object.assign({},mi,_i),Oi={args:null,init(e={}){const{editable:t=!0,focusable:i=!1}=this.schema;return this.focusable=i,this.editable=t,this.elements=[],this.children=[],this.args=e,Object.assign(this,e),this},render(){const{disposition:e,style:t,help:i}=this.schema;if(!Array.isArray(e))throw new SyntaxError("Bad disposition");const n=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["layout-container"],title:i,dataset:{nature:"layout",layout:"wrap",id:this.id}}));for(let t=0;t<e.length;t++){let i=Li.call(this,e[t],this.source,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Ze.call(this.projection,this.container,t),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="inline-flex",this.container.style.alignItems="baseline",this.refresh(),this.container},refresh(){return this.collapsed?this.container.classList.add("collapsed"):this.container.classList.remove("collapsed"),this},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},focus(e){if(this.focusable)this.container.focus();else{let e=(0,s.sb)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.le)(e))return!1;let t=this.environment.resolveElement(e);t&&t.focus(e)}},bindEvents(){this.projection.registerHandler("view.changed",((e,t)=>{t&&t.parent===this.projection&&(e.parent=this)}))}},Si=Object.assign({},mi,Oi),Vi={elements:null,edit:!1,btnEdit:!1,btnCollapse:!1,menu:!1,collapsed:!1,init(e={}){const{editable:t=!0,collapsible:i=!1,focusable:s=!1}=this.schema;return this.focusable=s,this.collapsible=i,this.editable=t,this.elements=[],this.children=[],Object.assign(this,e),this},collapse(e){if(!this.collapsed)return this.collapseContainer=(0,s.wC)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(e){if(!this.collapsed)return;let t=(0,s.DZ)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(t),this.collapseContainer.remove(),this.collapsed=!0,this.refresh(),this},refresh(){return this.collapsed?this.container.classList.add("collapsed"):this.container.classList.remove("collapsed"),this},render(){const{disposition:e,style:t,help:i}=this.schema;if(!Array.isArray(e))throw new SyntaxError("Bad disposition");const n=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["layout-container"],dataset:{nature:"layout",layout:"table"}})),this.focusable?this.container.tabIndex=-1:this.container.dataset.ignore="all";for(let t=0;t<e.length;t++){let i=e[t],r=(0,s.wC)({class:["table-row"]});r.style.display="table-row";for(let e=0;e<i.length;e++){const t=i[e];let n=(0,s.wC)({class:["table-cell"]},Li.call(this,t.content));n.style.display="table-cell",Ze.call(this.projection,n,t.style),r.append(n)}n.append(r)}return Ze.call(this.projection,this.container,t),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.container.style.display="table",this.refresh(),this.container},bindEvents(){this.projection.registerHandler("view.changed",((e,t)=>{t&&t.parent===this.projection&&(e.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(e=>{this.collapsed?this.expand():this.collapse()}))}},Ti=Object.assign({},mi,Vi),ki={ROW:"row",COLUMN:"column"},Mi={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center",stretch:"stretch",baseline:"baseline"},$i={start:"flex-start",end:"flex-end","flex-start":"flex-start","flex-end":"flex-end",center:"center","space-between":"space-between","space-around":"space-around","space-evenly":"space-evenly"},Hi={orientation:null,wrappable:null,alignItems:null,justifyContent:null,args:null,init(e={}){const{orientation:t=ki.ROW,wrappable:i=!0,alignItems:s,justifyContent:n,editable:r=!0,focusable:a=!1}=this.schema;return this.orientation=t,this.wrappable=i,this.alignItems=s,this.justifyContent=n,this.focusable=a,this.editable=r,this.elements=[],this.children=[],this.args=e,Object.assign(this,e),this},getOrientation(){return this.orientation},setOrientation(e){(0,s.RI)(ki,e)&&(this.orientation=e,this.refresh())},collapse(e=!1){if(!this.collapsed||e)return this.collapseContainer=(0,s.wC)({class:"layout-container-collapse"},this.elements),this.btnCollapse.after(this.collapseContainer),this.collapsed=!0,this.refresh(),this},expand(e=!1){if(!this.collapsed&&!e)return;let t=(0,s.DZ)(Array.from(this.collapseContainer.children));return this.btnCollapse.after(t),this.collapseContainer.remove(),this.collapsed=!1,this.refresh(),this},render(){const{disposition:e,style:t,help:i}=this.schema;if(!Array.isArray(e))throw new SyntaxError("Bad disposition");const n=(0,s.DZ)();(0,s.Re)(this.container)||(this.container=(0,s.wC)({class:["layout-container"],dataset:{nature:"layout",layout:"flex",id:this.id}})),i&&(this.container.title=i);for(let t=0;t<e.length;t++){let i=Li.call(this,e[t],null,this.args),s=this.environment.resolveElement(i);s&&(s.parent=this),this.elements.push(i),n.append(i)}return this.focusable?this.container.tabIndex=0:this.container.dataset.ignore="all",Ze.call(this.projection,this.container,t),n.hasChildNodes()&&(this.container.append(n),this.bindEvents()),this.collapsed&&this.collapse(!0),this.container.style.display="flex",this.refresh(),this.container},refresh(){return this.container.style.flexDirection=this.orientation,this.container.style.justifyContent=$i[this.justifyContent],this.container.style.alignItems=Mi[this.alignItems],this.wrappable?this.container.style.flexWrap="wrap":this.container.style.flexWrap="nowrap",this},focus(e){if(this.focusable)this.container.focus();else{let e=(0,s.sb)('[tabindex]:not([tabindex="-1"])',this.container);if((0,s.le)(e))return!1;let t=this.environment.resolveElement(e);t&&t.focus(e)}},focusIn(){return this.focused=!0,this.container.classList.add("active"),this.container.classList.add("focus"),this},focusOut(){return this.container.classList.remove("active"),this.container.classList.remove("focus"),this.focused=!1,this},bindEvents(){this.container.addEventListener("change",(e=>{const{target:t}=e,{prop:i}=t.dataset;"orientation"===i&&this.setOrientation(t.value)})),this.projection.registerHandler("view.changed",((e,t)=>{t&&t.parent===this.projection&&(e.parent=this)})),this.btnCollapse&&this.btnCollapse.addEventListener("click",(e=>{this.collapsed?this.expand():this.collapse()}))}},Pi=Object.assign({},mi,Hi);var Ni=0;const Di=()=>"layout"+Ni++,Bi={stack:(e,t,i)=>Object.create(Ai,{object:{value:"layout"},name:{value:"stack-layout"},type:{value:"stack"},id:{value:Di()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}}),wrap:(e,t,i)=>Object.create(Si,{object:{value:"layout"},name:{value:"wrap-layout"},type:{value:"wrap"},id:{value:Di()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}}),table:(e,t,i)=>Object.create(Ti,{object:{value:"layout"},name:{value:"table-layout"},type:{value:"table"},id:{value:Di()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}}),flex:(e,t,i)=>Object.create(Pi,{object:{value:"layout"},name:{value:"flex-layout"},type:{value:"flex"},id:{value:Di()},model:{value:e},schema:{value:t},projection:{value:i},source:{value:i.concept,writable:!0}})},Xi={createLayout(e,t,i){const{type:n}=t,r=Bi[n];if((0,s.le)(r))throw new TypeError(`Missing handler: The '${n}' layout could not be handled`);const a=r(e,t,i);if((0,s.le)(a))throw new Error(`Bad request: The '${n}' layout could not be created`);return a.createLayout=this.createLayout,(0,s.le)(a.id)&&(a.id=Di()),a}};var Zi=0;const Wi={createProjection(e,t,i,n){var r=Object.create(zi,{id:{value:(0,s.XI)(t.id,"projection"+Zi++)},model:{value:e},schema:{value:t,writable:!0},environment:{value:n}});return r.concept=i,r}},zi={handlers:null,init(e={}){return this.containers=new Map,this.attributes=[],this.params=[],this.templates=[],this.handlers={},this.args=e,this.concept.register(this),this},schema:null,concept:null,environment:null,parent:null,containers:null,placeholder:null,element:null,attributes:null,params:null,index:0,editing:!1,optional:!1,collapsible:!1,searchable:!1,focusable:!0,get hasMultipleViews(){return this.schema.length>1},get isReadOnly(){return(0,s.XI)(this.getSchema().readonly,!1)},isRoot(){return(0,s.le)(this.parent)},getSchema(e){return this.schema[(0,s.XI)(e,this.index)]},hasSchema(e){return-1!==this.schema.findIndex((t=>t.tags.includes(e)))},getContainer(e){return this.containers.get((0,s.XI)(e,this.index))},getStyle(){const{style:e}=this.getSchema();return e},addTemplate(e){this.templates.push(e)},addParam(e){this.params.push(...Array.isArray(e)?e:[e])},getParam(e,t){let i=this.params.find((t=>t.name===e));if((0,s.le)(i))return;const{type:n="string",value:r}=i;let a=(0,s.XI)(r,i.default);return(0,s.le)(a)?null:"string"===n?a.toString():"number"===n?+a:"boolean"===n?(0,s.sw)(a):void 0},getParent(){return this.isRoot()?null:this.parent},getAttributes(e){return this.attributes.filter((t=>t.name===e))},getField(e){return this.environment.getField(e)},getStatic(e){return this.environment.getStatic(e)},getLayout(e){return this.environment.getLayout(e)},resolveElement(e){return this.environment.resolveElement(e)},getHandlers(e){return(0,s.XI)(this.handlers[e],[])},update(e,t,i){if((0,s.xb)(this.containers))return;if("delete"===e)return void this.delete();const r=this.getHandlers(e);switch((0,s.xb)(r)||r.forEach((e=>{e(t,i)})),e){case"attribute.added":return void this.getAttributes(t.name).forEach((e=>{const{schema:i}=e,s=this.model.createProjection(t.target,i.tag).init();s.parent=this,s.optional=!0;const r=s.render();Ze.call(this,r,i.style),s.element.parent=e.parent,e.element=r,e.placeholder&&(e.placeholder.after(r),(0,n.Cp)(e.placeholder))}));case"attribute.removed":return void this.getAttributes(t.name).forEach((e=>{e.element&&((0,s.ep)(e.element).remove(),e.element=null),e.placeholder&&(0,n.$Z)(e.placeholder)}))}},delete(){return this.concept&&this.concept.unregister(this),this.placeholder&&this.getContainer().after(this.placeholder),this.containers.forEach((e=>{(0,s.ep)(e),(0,s.Re)(e)&&e.remove()})),this.model.removeProjection(this.id),!0},registerHandler(e,t){return Array.isArray(this.handlers[e])||(this.handlers[e]=[]),this.handlers[e].push(t),!0},unregisterHandler(e,t){if(!(0,s.RI)(this.handlers,e))return!1;for(let i=0;i<this.handlers[e].length;i++)if(this.handlers[e][i]===t)return this.handlers[e].splice(i,1),!0;return!1},focus(){this.element.focus()},render(){const e=this.getSchema();if((0,s.le)(e))return null;const{type:t,projection:i,content:r,kind:a}=e;var l=null;if("layout"===t||"layout"===a)this.element=Xi.createLayout(this.model,(0,s.XI)(i,r),this).init(this.args),this.model.registerLayout(this.element);else if("field"===t||"field"===a){let t=(0,s.RI)(e,"field")?e.field:(0,s.XI)(i,r);this.element=Pt.createField(this.model,t,this).init(this.args),this.model.registerField(this.element)}else"static"===t||"static"===a?(this.element=pi.createStatic(this.model,(0,s.XI)(i,r),this).init(this.args),this.element.source=this.concept,this.model.registerStatic(this.element)):"dynamic"===t||"dynamic"===a?(this.element=pi.createStatic(this.model,(0,s.XI)(i,r),this).init(this.args),this.model.registerStatic(this.element)):(this.element=yi(this.model,e.container,this).init(this.args),this.model.registerLayout(this.element));if(this.isRoot()&&(this.element.focusable=!0),this.focusable||(this.element.focusable=!1),this.readonly&&(this.element.readonly=!0),l=this.element.render(),"layout"!==t&&"container"!==t||(0,n.n2)(l),this.element.focusable||(l.tabIndex=-1),!(0,s.UG)(l))throw new Error("Projection element container could not be created");if(l.classList.add("projection"),Object.assign(l.dataset,{projection:this.id,concept:this.concept.id,object:this.concept.object}),this.optional){let e=(0,s.ax)({class:["btn","structure__btn-delete","projection__btn-delete"],title:`Delete ${this.concept.name}`,tabindex:-1,dataset:{action:"delete",projection:this.id}});e.addEventListener("click",(e=>{let t=this.getContainer(),i=(0,s.wr)(t,(e=>0===e.tabIndex));this.environment.save(this.concept.getParent(),t.cloneNode(!0)),this.concept.delete();let n=this.environment.resolveElement(i);(0,s.le)(n)||n.focus()})),l.dataset.deletable=!0,l.prepend(e)}if(this.collapsible){let e=(0,s.ax)({class:["btn","projection__btn-collapse"],title:`Collapse ${this.concept.name}`,tabindex:-1,dataset:{action:"collapse",projection:this.id}});e.addEventListener("click",(e=>{this.getContainer().classList.toggle("collapsed")})),l.dataset.collapsible=!0,l.prepend(e)}return this._style&&Ze.call(this,l,this._style),this.containers.set(this.index,l),l},refresh(){this.editing?this.containers.forEach((e=>{e.tabIndex=0})):this.containers.forEach((e=>{e.tabIndex=null}))},changeView(e){if(!this.hasMultipleViews)return void this.environment.notify("There is no alternative projection for this concept");let t=this.getContainer();this.index=(0,s.XI)(e,(this.index+1)%this.schema.length);let i=this.getContainer();(0,s.Re)(i)||(this.params=[],i=this.render()),t.replaceWith(i),this.element=this.resolveElement(i);const n=this.getHandlers("view.changed");return(0,s.xb)(n)||n.forEach((e=>e(i))),this.focus(),this},findView(e){if(!this.hasSchema(e)){if(!this.model.hasProjectionSchema(this.concept,e))return-1;let t=this.model.getProjectionSchema(this.concept,e);this.schema.push(...t)}return this.schema.findIndex((t=>t.tags.includes(e)))},export(){return{id:this.id,root:this.isRoot(),concept:{id:this.concept.id,name:this.concept.name}}},bindEvents(){}},Fi=[{concept:{name:"set"},type:"field",tags:[],content:{type:"list"}},{concept:{name:"boolean"},type:"field",tags:[],content:{type:"binary"}},{concept:{name:"string"},type:"field",tags:[],content:{type:"text"}},{concept:{name:"number"},type:"field",tags:[],content:{type:"text",input:{type:"number"}}},{concept:{name:"reference"},type:"field",tags:[],content:{type:"choice"}}],qi={projections:null,fields:null,statics:null,layouts:null,init(e){return this.projections=[],this.fields=new Map,this.statics=new Map,this.layouts=new Map,this},addSchema(e){return Array.isArray(e.projection)&&this.schema.projection.push(...e.projection),Array.isArray(e.template)&&this.schema.template.push(...e.template),Array.isArray(e.style)&&this.schema.style.push(...e.style),this.environment.update("concept-model.updated"),!0},setSchema(e){return this.schema=e,this.environment.update("projection-model.updated"),this},done(){for(;!(0,s.xb)(this.projections);)this.projections[0].delete();return this.projections=[],this.fields.clear(),this.layouts.clear(),this.statics.clear(),this},createProjection(e,t){const i=this.getProjectionSchema(e,t);(0,s.xb)(i)&&this.environment.notify(`Missing projection (#${t}) for ${e.name}`,n.k$.WARNING);const r=Wi.createProjection(this,i,e,this.environment);return r.tag=t,this.addProjection(r),r},getProjections(){return this.projections.slice()},getProjection(e){return Number.isInteger(e)?this.projections[e]:this.projections.find((t=>t.id===e))},addProjection(e){if((0,s.le)(e))throw new TypeError("Bad request: The 'projection' argument must be a Projection");return this.projections.push(e),this},removeProjection(e){var t=this.projections.findIndex((t=>t.id===e));return-1!==t&&(this.projections.splice(t,1),!0)},registerField(e){return e.environment=this.environment,this.fields.set(e.id,e),this},unregisterField(e){var t=this.fields.get(e.id);return t&&(t.environment=null,this.fields.delete(t.id)),this},getField(e){return this.fields.get(e)},registerStatic(e){return e.environment=this.environment,this.statics.set(e.id,e),this},unregisterStatic(e){var t=this.statics.get(e.id);return t&&(t.environment=null,this.statics.delete(t.id)),this},getStatic(e){return this.statics.get(e)},registerLayout(e){return e.environment=this.environment,this.layouts.set(e.id,e),this},unregisterLayout(e){var t=this.layouts.get(e.id);return t&&(t.environment=null,this.layouts.delete(t.id)),this},getLayout(e){return this.layouts.get(e)},getMetadata(e){let t=this.schema.find((t=>t.id===e));return t?t.metadata:null},hasConceptProjection(e,t){let i=null;return i=(0,s.HD)(e)?this.schema.projection.filter((t=>t.concept.name===e)):this.schema.projection.filter((t=>{return(t=>t&&(t===e.name||e.schema&&t===e.schema.base))(t.concept.name)||(i=t.concept.prototype,!(0,s.le)(i)&&"prototype"!==e.nature&&e.hasPrototype(i));var i})),(0,s.TW)(t)&&!(0,s.xb)(t)?-1!==i.findIndex((e=>(e=>Array.isArray(e.tags)&&e.tags.includes(t))(e))):!(0,s.xb)(i)},getSchema(){return this.schema},getProjectionSchema(e,t){if((0,s.le)(e))throw new TypeError("Bad parameter: concept");var i=null;return i=(0,s.HD)(e)?this.schema.projection.filter((t=>t.concept.name===e)):this.schema.projection.filter((t=>{return(t=>t&&(t===e.name||e.schema&&t===e.schema.base))(t.concept.name)||(i=t.concept.prototype,!(0,s.le)(i)&&"prototype"!==e.nature&&e.hasPrototype(i));var i})),(0,s.TW)(t)&&!(0,s.xb)(t)?i.filter((e=>e.tags&&e.tags.includes(t))):i},getTemplateSchema(e){let t=this.schema.template.find((t=>t.name===e));return(0,s.le)(t)?null:(0,n.p$)(t)},getRuleSchema(e){let t=this.schema.find((t=>"rule"===t.type&&t.name===e));return(0,s.le)(t)?null:(0,n.p$)(t)},getStyleSchema(e){let t=this.schema.style.find((t=>t.name===e));return(0,s.le)(t)?null:(0,n.p$)(t)},hasProjectionSchema(e,t){if((0,s.le)(e))throw new TypeError("Bad parameter: concept");let i=[];return i=(0,s.HD)(e)?this.schema.projection.filter((t=>t.concept.name===e)):this.schema.projection.filter((t=>{return(t=>t&&(t===e.name||e.schema&&t===e.schema.base))(t.concept.name)||(i=t.concept.prototype,!(0,s.le)(i)&&"prototype"!==e.nature&&e.hasPrototype&&e.hasPrototype(i));var i})),(0,s.TW)(t)&&!(0,s.xb)(t)?i.some((e=>e.tags&&e.tags.includes(t))):!(0,s.xb)(i)},export(){const e=[];return this.getProjections().forEach((t=>{e.push(t.export())})),e}},Ui={unloadAllConcept(){return this.hasConceptModel&&(this.conceptModel.done(),this.conceptModel=null,this.refresh()),this.triggerEvent({name:"editor.unload-concept@post"}),this},unloadAllProjection(){return this.hasProjectionModel&&(this.projectionModel.done(),this.projectionModel=null,this.refresh()),this.triggerEvent({name:"editor.unload-projection@post"}),this},loadSession(){this.conceptModel.getRootConcepts().forEach((e=>{this.createInstance(e)}))},loadConcept(e,t){let i=e.concept||e,r=e.values;return Array.isArray(i)?(0,s.xb)(i)?(this.notify("The concept schema is empty",n.k$.ERROR),!1):((0,s.le)(this.conceptModel)&&(this.conceptModel=Ne.createModel(null,this).init()),this.conceptModel.addConceptSchema(i),this.conceptModel.init(r),this.triggerEvent({name:"editor.load-concept@post",args:[t,JSON.stringify(e)]}),this.refresh(),this):(this.notify("Invalid concept schema",n.k$.ERROR),!1)},loadProjection(e,t){return this.activeElement=null,this.activeInstance=null,this.activeConcept=null,this.activeProjection=null,(0,s.le)(this.projectionModel)&&(this.projectionModel=function(e,t){if(!Array.isArray(e.projection))throw new TypeError("Bad projection schema");return e.projection.push(...Fi),Object.create(qi,{schema:{value:e,writable:!0},environment:{value:t}})}(e,this).init()),this.projectionModel.addSchema(e),(0,s.le)(this.projectionModel),this.instances.forEach((e=>{e.projection=this.projectionModel.createProjection(e.concept).init(),e.render()})),this.triggerEvent({name:"editor.load-projection@post",args:[t,JSON.stringify(e)]}),this.refresh(),this},load(e,t){let i=e.type;if((0,s.hr)(i)){let t=e.name.indexOf(".")+1;i=e.name.substring(t)}else i=n.D3[i];"jsoncp"===i&&"json"===i||this.addResource(e,t);let r=new FileReader;return r.onload=e=>{const i=JSON.parse(r.result),{type:s}=i;"concept"===s?this.loadConcept(i,t):"projection"===s?this.loadProjection(i,t):"model"===s&&(this.loadConcept(i.concept,"model"),this.loadProjection(i.projection,"model"))},r.readAsText(e),!0},unload(){return this.unloadAllConcept(),this.unloadAllProjection(),this.clear(),this}},Qi={getField(e){if(!(0,s.Re)(e))return console.warn("Field error: Bad argument"),null;const{id:t,nature:i}=e.dataset;return(0,s.le)(t)?(console.warn("Field error: Missing id attribute on field"),null):["field","field-component"].includes(i)?this.projectionModel.getField(t):(console.warn("Field error: Unknown nature attribute on field"),null)},getStatic(e){if(!(0,s.Re)(e))return console.warn("Static error: Bad argument"),null;const{id:t,nature:i}=e.dataset;return(0,s.le)(t)?(console.warn("Static error: Missing id attribute on field"),null):["static","static-component"].includes(i)?this.projectionModel.getStatic(t):(console.warn("Static error: Unknown nature attribute on field"),null)},getLayout(e){if(!(0,s.Re)(e))return console.warn("Layout error: Bad argument"),null;const{id:t,nature:i}=e.dataset;return(0,s.le)(t)?(console.warn("Layout error: Missing id attribute on field"),null):["layout","layout-component"].includes(i)?this.projectionModel.getLayout(t):(console.warn("Layout error: Unknown nature attribute on field"),null)},resolveElement(e){if(!(0,s.Re)(e))return null;const{nature:t}=e.dataset;if((0,s.le)(t))return null;let i=null;switch(t){case"field":case"field-component":i=this.getField(e);break;case"layout":case"layout-component":i=this.getLayout(e);break;case"static":case"static-component":i=this.getStatic(e)}return i&&(i.environment=this),i}};var Gi=0;const Ki={createState(e,t){const{id:i,name:n}=e;let r="value"+Gi++,a=JSON.stringify(e.clone()),l=((0,s.p6)(new Date,"hh:dd"),(0,s.oL)({class:["ico","ico-delete"]},"✖")),o=(0,s.ax)({class:["btn","btn-delete"],title:`Delete ${n} state`},l),c=(0,s.wC)({class:["model-state-preview"],title:`Preview ${n}`},t),h=(0,s.kQ)({class:["model-state-content","fit-content"]},`${e.getName()}`),u=(0,s.HV)({class:["model-state"],title:`Restore ${n} state`,dataset:{id:r,concept:i}},[o,h,c]);u.addEventListener("click",(e=>{let t=function(e){const t=e=>e===u||e===o;return t(e)?e:(0,s.wr)(e,(e=>t(e)),5)}(e.target);if(this.unhighlight(),t===o)this.removeState(r);else{let e=this.restore(a);this.removeState(r);let t=(0,s.sb)(`.projection[data-concept="${e.id}"]`,this.body);t&&t.focus()}}));let d=`.projection[data-concept="${i}"]`;if(u.addEventListener("mouseenter",(e=>{let t=(0,s.sb)(d,this.body);t&&this.highlight(t)})),u.addEventListener("mouseleave",(e=>{this.unhighlight()})),this.states.length>8){let{id:e}=this.stateList.lastChild.dataset;this.removeValue(e)}let p=Object.create({},{id:{value:r},object:{value:"value"},type:{value:"state"},element:{value:u},concept:{value:e},value:{value:a}});return this.addState(p),p},getState(e){if(!(0,s.le)(e)&&!(0,s.xb)(this.states))return this.states[e]},addState(e){return this.stateList.append(e.element),this.states.push(e),this.refresh(),e},removeState(e){if((0,s.le)(e))return;const t=this.states.findIndex((t=>t.id===e));if(-1===t)return null;let i=this.states.splice(t,1)[0],{element:n}=i;return(0,s.ep)(n).remove(),this.refresh(),this}};var Ji=0;const Yi={conceptModel:null,projectionModel:null,concept:null,activeConcept:null,activeProjection:null,activeInstance:null,container:null,header:null,body:null,instanceSection:null,designSection:null,navigationSection:null,valueWindow:null,valueList:null,breadcrumb:null,filter:null,home:null,style:null,logs:null,status:null,group:null,input:null,copyValue:null,states:null,activeElement:null,decoratedElements:null,config:null,active:!1,visible:!1,frozen:!1,handlers:null,actions:null,attached:null,instances:null,windows:null,values:null,resources:null,models:null,errors:null,init(e={}){const{conceptModel:t,projectionModel:i,toolbar:s=[],config:n={},handlers:r={},actions:a={}}=e;this.config=Object.assign({},n),this.handlers=new Map,this.actions=new Map,this.attached=[],this.instances=new Map,this.windows=new Map,this.values=new Map,this.resources=new Map,this.models=new Map,this.errors=[],Object.assign(this,E,L),this.states=[],this.decoratedElements=new Set;for(const e in r){const t=r[e];this.registerHandler(e,t)}return this.header=_.call(this).init(),this.home=O.call(this).init(),this.breadcrumb=A.call(this).init(),this.logs=V.call(this).init(),this.status=S.call(this).init(),this.render(),t&&this.loadConcept(t),i&&this.loadProjection(i),this.isReady?(this.conceptModel.getRootConcepts().forEach((e=>{this.createInstance(e)})),this.open()):(this.home.open(),this.refresh()),this},setConfig(e){return!(0,s.le)(e)&&(this.config=e,this.refresh(),this)},getConfig(e){return(0,s.le)(e)?this.config:this.config[e]},getName(){return(0,s.XI)(this.config.name,`editor${(new Date).getTime()}`)},createConcept(e){if((0,s.le)(e))throw new TypeError("Missing argument: The 'name' is required to create a concept");return this.conceptModel.isConcept(e)?this.conceptModel.createConcept(e):(this.notify(`The concept '${e}' is not defined in the model`,n.k$.ERROR),!1)},addConcept(e){let t=e.concept||e;Array.isArray(t)?this.conceptModel.schema.push(...t):this.conceptModel.schema.push(t),this.refresh()},createProjection(e,t){if((0,s.le)(e))throw new TypeError("Missing argument: The 'concept' is required to create a projection");return this.projectionModel.hasConceptProjection(e,t)?this.projectionModel.createProjection(e,t).init():(this.notify(`The projection for the concept '${e.name}' is not defined in the model`,n.k$.ERROR),!1)},addProjection(e){Array.isArray(e)?this.projectionModel.schema.projection.push(...e):this.projectionModel.addSchema(e),this.refresh()},download(e,t,i){const n="application/jsoncp";window.URL=window.webkitURL||window.URL;var r=(0,s.cH)({class:["bare-link","download-item__link"]},"Download");(0,s.hr)(r.href)||window.URL.revokeObjectURL(r.href);var a=new Blob([JSON.stringify(e)],{type:n});return Object.assign(r,{download:`${(0,s.XI)(t,(new Date).getTime())}.jsoncp`,href:window.URL.createObjectURL(a)}),r.dataset.downloadurl=[n,r.download,r.href].join(":"),r.click(),setTimeout((()=>{window.URL.revokeObjectURL(r.href),r.remove()}),1500),e},export(e=!1){const t="application/jsoncp";window.URL=window.webkitURL||window.URL;var i=(0,s.cH)({});this.container.append(i),(0,s.hr)(i.href)||window.URL.revokeObjectURL(i.href);const r={concept:this.conceptModel.schema,values:this.conceptModel.export(),editor:this.config};var a=new Blob([JSON.stringify(r)],{type:t});return Object.assign(i,{download:"model.jsoncp",href:window.URL.createObjectURL(a)}),console.log(a.type),i.dataset.downloadurl=[t,i.download,i.href].join(":"),e?((0,s.WA)(JSON.stringify(r)),this.notify("The model has been copied to clipboard",n.k$.SUCCESS)):(i.click(),this.notify("The model has been downloaded",n.k$.SUCCESS)),setTimeout((()=>{window.URL.revokeObjectURL(i.href),i.remove()}),1500),r},save(e,t){this.createState(e,t),this.refresh()},restore(e){let t=JSON.parse(e),i=this.conceptModel.getConcept(t.id);return i.restore(t),this.refresh(),i},undo(){if((0,s.xb)(this.states))return void this.notify("There are no previous state",n.k$.NORMAL,2e3);let e=(0,s.Z$)(this.states);this.restore(e.value),this.removeState(e.id)},notify(e,t,i=4500){let n=(0,s.qm)({class:["notify"],html:e});const r="open";t&&n.classList.add(t),this.container.append(n),setTimeout((()=>{n.classList.add(r)}),50),setTimeout((()=>{n.classList.remove(r),setTimeout((()=>{n.remove()}),500)}),i)},addResource(e,t){let i=(0,s.XI)(t,e.name.split(".")[0]);this.resources.set(i,e);let n=new FileReader;return n.onload=e=>{this.addModel(i,n.result)},n.readAsText(e),this.refresh(),e},getResource(e){return this.resources.get(e)},hasResource(e){return this.resources.has(e)},removeResource(e){return this.resources.delete(e),this.triggerEvent({name:"resource.removed"}),this.refresh(),!0},addError(e){return this.errors.push(e),this.refresh(),(0,n.lL)(this.status.editorstatusBadge),e},removeError(e){return this.errors.pop(),this.refresh(),!0},clearError(e){return this.errors=[],this.refresh(),!0},getModel(e){let t=this.models.get(e);return(0,s.le)(t)?null:JSON.parse(t)},addModel(e,t){this.models.set(e,t)},removeModel(e){return this.triggerEvent({name:"model.remove@pre",args:[e]},(()=>{this.models.delete(e),this.refresh(),this.triggerEvent({name:"model.remove@post"})}),!1),!0},hasModel(e){return this.models.has(e)},getValue(e){if(this.values.has(e))return this.values.get(e)},addValue(e){let t="value"+Ji++,i=(0,s.oL)({class:["ico","ico-copy"]}),n=(0,s.oL)({class:["ico","ico-delete"]},"✖"),r=(0,s.ax)({class:["btn","btn-copy","fit-content"],title:`Copy ${e.name}`},[i,e.name]),a=(0,s.ax)({class:["btn","btn-delete"]},n),l=(0,s.HV)({class:["model-value"],dataset:{id:t}},[r,a]);if(r.addEventListener("click",(t=>{this.copy(e)})),a.addEventListener("click",(e=>{this.removeValue(t)})),this.values.size>5){let{id:e}=this.valueList.lastChild.dataset;this.removeValue(e)}return this.valueList.prepend(l),this.values.set(t,{element:l,value:e}),this.refresh(),e},removeValue(e){if((0,s.le)(e)||!this.values.has(e))return;let{element:t}=this.values.get(e);return(0,s.ep)(t).remove(),this.values.delete(e),this.refresh(),this},copy(e,t=!1){return(0,s.le)(e)||(this.copyValue=e,(0,s.WA)(JSON.stringify(e)),t&&this.addValue(e),this.notify(`${e.name} copied`,n.k$.NORMAL)),this},paste(e,t){let i=(0,s.XI)(t,this.copyValue);if(!(0,s.le)(i)){if((0,s.le)(e)){let e=this.createConcept(i.name).init();e.setValue(i),this.createInstance(e)}else"prototype"===i.nature?e.setValue(i.value):e.setValue(i);return this}},show(){return this.triggerEvent({name:"editor.show@pre"},(()=>{(0,n.$Z)(this.container),this.attached.forEach((e=>e.show())),this.visible=!0,this.triggerEvent({name:"editor.show@post"})}),!1),this},hide(){return this.triggerEvent({name:"editor.hide@pre"},(()=>{(0,n.Cp)(this.container),this.attached.forEach((e=>e.hide())),this.visible=!1,this.triggerEvent({name:"editor.hide@post"})}),!1),this},toggle(){return this.triggerEvent({name:"editor.toggle@pre"},(()=>{(0,n.ZN)(this.container),this.visible=!this.visible,this.triggerEvent({name:"editor.toggle@post"})}),!1),this},open(){return this.triggerEvent({name:"editor.open@pre"},(()=>{this.show(),this.active=!0,this.isReady&&this.home.close(),this.triggerEvent({name:"editor.open@post"})}),!1),this},close(){return this.triggerEvent({name:"editor.close@pre"},(()=>{this.hide(),this.active=!1,this.done(),this.clear(),this.triggerEvent({name:"editor.close@post"})}),!1),this},destroy(){return this.triggerEvent({name:"editor.destroy@pre"},(()=>{this.hide(),this.done(),this.instances.forEach((e=>e.delete())),(0,s.ep)(this.container).remove()}),!1),!0},freeze(){return this.triggerEvent({name:"editor.freeze@pre"},(()=>{this.frozen=!0,this.refresh(),this.triggerEvent({name:"editor.freeze@post"})}),!1),this},unfreeze(){return this.frozen=!1,this.refresh(),this},done(){return this.conceptModel&&this.conceptModel.done(),this.projectionModel&&this.projectionModel.done(),this},highlight(e){return(0,s.Re)(e)?((0,n.CH)(e),this.decoratedElements.add(e),this):this},unhighlight(e){return(0,s.Re)(e)?((0,n.HW)(e),this.decoratedElements.delete(e),this):(this.decoratedElements.forEach((e=>(0,n.HW)(e))),this.decoratedElements.clear(),this)},createWindow(){let e=(0,s.wC)({class:["editor-window"],tabindex:0});this.body.append(e)},clear(){return this.triggerEvent({name:"editor.clear@pre"},(()=>{this.instances.forEach((e=>e.delete())),this.instances.clear(),this.resources.clear(),this.models.clear(),this.states.forEach((e=>e.element.remove())),this.states=[],this.activeElement=null,this.activeInstance=null,this.activeConcept=null,this.activeProjection=null,this.refresh(),this.triggerEvent({name:"editor.clear@post"})}),!1),this},update(e,t,i){this.triggerEvent({name:e})},attach(e){this.attached.push(e)},detach(e){let t=this.attached.findIndex((t=>t===e));if(-1===t)return null;this.attached.splice(t,1)},render(e){const t=(0,s.DZ)();if(this.home.isRendered||t.append(this.home.render()),this.header.isRendered||t.append(this.header.render()),(0,s.Re)(this.navigationSection)||(this.navigationSection=(0,s.vB)({class:["model-navigation-section"]}),this.viewSection=(0,s.Pi)({class:["model-view-section"]}),this.navigationSection.append(this.viewSection),t.append(this.navigationSection)),!(0,s.Re)(this.body)){this.body=(0,s.wC)({class:["editor-body"],tabindex:0});let e=(0,s.wC)({class:["editor-body-main"],tabindex:0});this.instanceSection=(0,s.vB)({class:["model-concept-section"]}),e.append(this.instanceSection),this.body.append(e),t.append(this.body)}return(0,s.Re)(this.timeline)||(this.timeline=(0,s.wC)({class:["editor-timeline"]}),this.stateList=(0,s.w_)({class:["bare-list","model-state-list"]}),this.timeline.append(this.stateList),t.append(this.timeline)),this.logs.isRendered||t.append(this.logs.render()),this.breadcrumb.isRendered||this.navigationSection.append(this.breadcrumb.render()),(0,s.Re)(this.valueSection)||(this.valueSection=(0,s.wC)({class:["model-value-window"]}),this.valueList=(0,s.w_)({class:["bare-list","model-value-list"]}),this.valueSection.append(this.valueList),this.navigationSection.append(this.valueSection)),this.status.isRendered||t.append(this.status.render()),(0,s.Re)(this.input)||(this.input=(0,s.Ju)({type:"file",class:["hidden"],accept:".json,.jsoncp"}),t.append(this.input)),t.hasChildNodes()&&(this.container.append(t),this.bindEvents()),(0,s.Re)(e)&&e.append(this.container),this.refresh(),this.container},refresh(e=!1){return this.frozen&&!e||(this.home.isOpen?this.container.classList.add("unfocus"):this.container.classList.remove("unfocus"),this.hasValues?(0,n.$Z)(this.valueWindow):(0,n.Cp)(this.valueWindow),this.header.refresh(),this.breadcrumb.refresh(),this.home.refresh(),this.logs.refresh(),this.status.refresh(),this.instanceSection.dataset.view=this.status.view,["grid"].includes(this.status.view)?(0,n.Cp)(this.viewSection):["tab"].includes(this.status.view)&&(0,n.$Z)(this.viewSection),(0,s.xb)(this.states)?(0,n.Cp)(this.timeline):((0,n.$Z)(this.timeline),this.states.forEach((e=>{this.conceptModel.hasConcept(e.concept.id)?this.hasActiveConcept&&this.activeConcept===e.concept?e.element.classList.add("active"):e.element.classList.remove("active"):this.removeState(e.id)})))),this},updateActiveElement(e){return this.activeElement&&this.activeElement===e||(this.activeElement=e,this.triggerEvent({name:"editor.element@active:updated"})),this},updateActiveConcept(e){return this.hasActiveConcept&&this.activeConcept===e||(this.activeConcept=e,this.triggerEvent({name:"editor.concept@active:updated"}),this.refresh()),this},updateActiveProjection(e){if(this.activeProjection&&this.activeProjection===e)return this;let t=(0,s.$3)(".active-parent",this.body);for(let e=0;e<t.length;e++)t[e].classList.remove("active-parent");this.activeProjection=e;let i=this.activeProjection.parent;for(;i;)i.getContainer().classList.add("active-parent"),i=i.parent;return this.triggerEvent({name:"editor.projection@active:updated"}),this.refresh(),this},updateActiveInstance(e){if(this.activeInstance){if(this.activeInstance===e)return this;this.activeInstance,this.activeInstance.container.classList.remove("active")}return this.activeInstance=e,this.activeInstance.container.classList.add("active"),this.triggerEvent({name:"editor.instance@active:updated"}),this.refresh(),this},bindEvents(){var e=null,t=null;const i={open:e=>{const{context:t}=e.dataset;t?this[t].open():this.open()},close:e=>{const{context:t,id:i,type:s}=e.dataset;t?this[t].close():this.close()},collapse:e=>{const{rel:t,target:i}=e.dataset;if("parent"===t){let t=(0,s.wr)(e,(e=>e.dataset.name===i));if((0,s.Re)(t)){const{alias:i=""}=t.dataset;t.classList.toggle("collapsed");let s=t.classList.contains("collapsed");e.dataset.state=s?"ON":"OFF",e.title=s?`Expand ${i.toLowerCase()}`:`Collapse ${i.toLowerCase()}`}}},delete:e=>{const{target:t}=e.dataset;if("parent"===t){let t=e.parentElement;(0,s.ep)(t),t.remove()}},"delete:value":e=>{const{id:t}=e.dataset;this.conceptModel.removeValue(t),this.header._valueSelector.update()},"delete:resource":e=>{const{id:t}=e.dataset;this.removeResource(t)},"change-view":e=>{const{value:t}=e.dataset;this.status.changeView(t)},"add-group":e=>{this.status.addGroup()},style:e=>{this.style.toggle()},home:e=>{this.home.toggle()},logs:e=>{this.logs.toggle()},export:e=>{this.export()},"export--copy":e=>{this.export(!0)},"create-instance":e=>{const{concept:t}=e.dataset;let i=this.createConcept(t);this.createInstance(i)},"create-instance:value":e=>{const{id:t}=e.dataset;let i=this.conceptModel.getValue(t),s=this.createConcept(i.name);s.initValue(i),this.createInstance(s)},"copy:value":e=>{const{id:t}=e.dataset;let i=this.conceptModel.getValue(t);this.copy(i)},save:e=>{this.save()},undo:e=>{this.undo()},load:e=>{let t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(t)},unload:e=>{this.unload()},"load-concept":e=>{let t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(t)},"unload-concept":e=>{this.unloadAllConcept()},"download-concept":e=>{const{schema:t,values:i}=this.conceptModel;let s=this.getName().toLowerCase().replace(/\s+/g," ").replace(" ","_");this.download({concept:t},`${s}_model`)},"load-projection":e=>{let t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});this.input.dispatchEvent(t)},"unload-projection":e=>{this.unloadAllProjection()},"download-projection":e=>{const{schema:t,views:i}=this.projectionModel;let s=this.getName().toLowerCase().replace(/\s+/g," ").replace(" ","_");this.download({projection:t},`${s}_projection`)}},r={[n.sr.up_arrow]:"up",[n.sr.right_arrow]:"right",[n.sr.down_arrow]:"down",[n.sr.left_arrow]:"left"};this.container.addEventListener("click",(e=>{var t=(0,n.NI)(e.target);const{action:r,context:a,id:l}=t.dataset;if("instance"===a)return void this.getInstance(l).actionHandler(r);if("menu"===a)return void this.home.actionHandler(r,t);if(this.activeElement&&this.activeElement.clickHandler(t),(0,s.le)(r))return;if(this.actions.has(r))return console.warn(r),this.actions.get(r).call(this,t),void t.blur();const o=i[r];(0,s.mf)(o)?(o(t),t.blur()):r&&this.triggerEvent({name:r})}),!0),this.input.addEventListener("change",(e=>{let i=this.input.files[0];this.load(i,t),this.input.value=""})),this.body.addEventListener("copy",(e=>{if(!(0,n.QE)(e.target)){let t=this.activeConcept.copy(!1);this.copy(t,!0),e.preventDefault()}})),this.body.addEventListener("keydown",(t=>{const{target:i}=t,{nature:a}=i.dataset;var l=!1;switch(t.key){case n.sr.backspace:this.activeElement&&e!==n.sr.ctrl&&!0===this.activeElement.backspaceHandler(i)&&t.preventDefault();break;case n.sr.ctrl:case n.sr.shift:t.preventDefault(),l=!0;break;case n.sr.delete:this.activeElement&&e!==n.sr.ctrl&&!(0,n.QE)(i)&&this.activeElement.deleteHandler(i)&&t.preventDefault();break;case n.sr.spacebar:this.activeElement&&e!==n.sr.ctrl&&this.activeElement.spaceHandler(i)&&t.preventDefault();break;case n.sr.alt:t.preventDefault();break;case n.sr.enter:this.activeElement?!0===this.activeElement.enterHandler(i)&&t.preventDefault():"concept-container"===a?this.activeInstance.projection.focus():"editable"===a?i.blur():"BUTTON"===i.tagName?(i.click(),t.preventDefault()):t.preventDefault();break;case n.sr.escape:this.activeElement&&(!0===this.activeElement.escapeHandler(i)?t.preventDefault():(0,s.wr)(i,(e=>0===e.tabIndex)).focus());break;case n.sr.insert:this.activeElement&&t.preventDefault();break;case n.sr.up_arrow:case n.sr.right_arrow:case n.sr.down_arrow:case n.sr.left_arrow:if(this.activeElement&&![n.sr.ctrl,n.sr.shift,n.sr.alt].includes(e))!0===this.activeElement.arrowHandler(r[t.key],i)&&t.preventDefault();else if("concept-container"===a&&![n.sr.ctrl,n.sr.shift,n.sr.alt].includes(e)){let e=(0,n.As)(i,r[t.key],this.instanceSection);if(!(0,s.Re)(e))return!1;e.focus()}break;case"s":e===n.sr.ctrl&&(this.activeConcept.copy(),this.header.valueCount++,this.refresh(),t.preventDefault());break;case"c":if(e===n.sr.ctrl){let e=new ClipboardEvent("copy");this.body.dispatchEvent(e)}break;case"v":if(e===n.sr.ctrl){if((0,n.QE)(i))return;this.paste(this.activeConcept,this.copyValue)}break;case"e":e===n.sr.ctrl&&this.activeConcept&&(this.createInstance(this.activeConcept,this.activeProjection,{type:"projection",close:"DELETE-PROJECTION"}),t.preventDefault());break;case"f":break;case"z":e===n.sr.ctrl&&((0,n.QE)(i)||(this.undo(),t.preventDefault()))}l&&(e=t.key)}),!1),this.body.addEventListener("keyup",(t=>{var i=t.target;const{nature:a}=i.dataset;switch(t.key){case n.sr.spacebar:this.activeElement&&e===n.sr.ctrl&&this.activeElement._spaceHandler(i);break;case n.sr.delete:this.activeElement&&e===n.sr.ctrl&&this.activeElement.delete(i);break;case n.sr.alt:break;case n.sr.up_arrow:case n.sr.down_arrow:case n.sr.right_arrow:case n.sr.left_arrow:if(this.activeElement&&e===n.sr.ctrl)!0===this.activeElement._arrowHandler(r[t.key],i)&&t.preventDefault();else if("concept-container"===a&&e===n.sr.ctrl){let a=(0,n.As)(i,r[t.key],this.instanceSection);if(!(0,s.Re)(a))return!1;this.swapInstance(i,a,!0),i.focus(),e=n.sr.ctrl}}e===t.key&&(e=-1)}),!1),this.body.addEventListener("focusin",(t=>{const{target:i}=t,s=this.resolveElement(i);if(e=-1,s?(this.activeElement&&this.activeElement!==s&&(this.activeElement.focusOut(),this.activeElement=null),this.updateActiveElement(s),this.activeElement.focusIn(i)):(this.activeElement&&this.activeElement.focusOut(i),this.activeElement=null),this.activeElement){let e=this.activeElement.projection;this.updateActiveProjection(e),this.updateActiveConcept(e.concept)}else this.activeConcept=null,this.activeProjection=null;this.refresh()})),this.registerHandler("export",(()=>this.export())),this.registerHandler("value.changed",(()=>this.refresh())),this.registerHandler("value.added",(()=>this.refresh())),this.registerHandler("value.removed",(()=>this.refresh())),this.registerHandler("load-resource",(e=>{let i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t=e[0],this.input.dispatchEvent(i)}))}},es=Object.assign(Ki,Ui,Qi,T,Yi);Object.defineProperty(es,"hasConceptModel",{get(){return!(0,s.le)(this.conceptModel)}}),Object.defineProperty(es,"hasProjectionModel",{get(){return!(0,s.le)(this.projectionModel)}}),Object.defineProperty(es,"hasInstances",{get(){return this.instances.size>0}}),Object.defineProperty(es,"hasWindows",{get(){return this.windows.size>0}}),Object.defineProperty(es,"hasValues",{get(){return this.values.size>0}}),Object.defineProperty(es,"isReady",{get(){return this.hasConceptModel&&this.hasProjectionModel}}),Object.defineProperty(es,"hasActiveConcept",{get(){return!(0,s.le)(this.activeConcept)}}),Object.defineProperty(es,"hasActiveProjection",{get(){return!(0,s.le)(this.activeProjection)}}),Object.defineProperty(es,"hasActiveInstance",{get(){return!(0,s.le)(this.activeInstance)}}),Object.defineProperty(es,"hasError",{get(){return!(0,s.xb)(this.errors)}});const ts="editor";function is(e){let t=(0,n.fP)(e);return(0,s.Re)(e)||(t=(0,s.wC)({tabindex:-1})),t.classList.add("gentleman-editor"),t.dataset.gentleman=ts,Object.create(es,{object:{value:"environment"},type:{value:ts},name:{value:"gentleman editor"},container:{value:t}})}},943:(e,t,i)=>{"use strict";function s(e){let t=0;if(I(e))return e.selectionStart;if(0!==window.getSelection().rangeCount){const i=window.getSelection().getRangeAt(0),s=i.cloneRange();s.selectNodeContents(e),s.setEnd(i.endContainer,i.endOffset),t=s.toString().length}return t}i.d(t,{D3:()=>L,sr:()=>E,hi:()=>j,k$:()=>C,WV:()=>w,wo:()=>v,p$:()=>X,Oj:()=>Z,jn:()=>y,GV:()=>N,qO:()=>s,As:()=>M,NI:()=>x,EE:()=>H,GF:()=>P,Sd:()=>$,sB:()=>k,Cp:()=>u,CH:()=>m,xj:()=>R,u7:()=>I,QE:()=>_,n2:()=>B,a2:()=>A,fP:()=>D,Ys:()=>g,lL:()=>p,$Z:()=>h,ZN:()=>d,HW:()=>f,hF:()=>b});var n=i(835);const r="hidden",a="collapsed",l="highlighted",o="shake",c="selected";function h(e){return(0,n.Re)(e)?(e.classList.remove(r),e):e}function u(e){return(0,n.Re)(e)?(e.classList.add(r),e):e}function d(e){return(0,n.Re)(e)?(e.classList.toggle(r),e):e}function p(e){e.classList.contains(o)||(e.classList.add(o),setTimeout((()=>{e.classList.remove(o)}),1e3))}function m(e){return(0,n.Re)(e)?(e.classList.add(l),e):e}function f(e){return(0,n.Re)(e)?(e.classList.remove(l),e):e}function g(e){return(0,n.Re)(e)?(e.classList.add(c),e):e}function b(e){return(0,n.Re)(e)?(e.classList.remove(c),e):e}function v(e){return(0,n.Re)(e)&&e.classList.add(a),e}function y(e){return(0,n.Re)(e)&&e.classList.remove(a),e}const w={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",REFERENCE:"reference",SET:"set",list(){return[this.STRING,this.NUMBER,this.BOOLEAN,this.REFERENCE,this.SET]}},E={backspace:"Backspace",tab:"Tab",enter:"Enter",ctrl:"Control",shift:"Shift",alt:"Alt",escape:"Escape",spacebar:" ",page_up:"PageUp",page_down:"PageDown",insert:"Insert",end:"End",home:"Home",left_arrow:"ArrowLeft",up_arrow:"ArrowUp",right_arrow:"ArrowRight",down_arrow:"ArrowDown",delete:"Delete",period:"."},C={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"},j={NORMAL:"normal",WARNING:"warning",SUCCESS:"success",ERROR:"error"},L={"audio/aac":"aac","application/octet-stream":"bin","image/jpeg":"jpeg","application/json":"json","audio/mpeg":"mp3","application/pdf":"pdf","image/svg+xml":"svg","text/plain":"txt","text/xml":"xml","application/zip":"zip"};function x(e){const t=e=>!(0,n.RI)(e.dataset,"ignore");return t(e)?e:(0,n.wr)(e,t,10)}function R(e){if(!n.Re)throw new TypeError("Bad parameter");return e.hidden||"none"===window.getComputedStyle(e).display}const I=e=>(0,n.Re)(e,["input","textarea"]),_=e=>I(e)||"true"===e.contentEditable,A=e=>+e.substring(0,e.indexOf("px")),O={top:e=>e.marginTop,right:e=>e.marginRight,bottom:e=>e.marginBottom,left:e=>e.marginLeft},S={top:e=>e.paddingTop,right:e=>e.paddingRight,bottom:e=>e.paddingBottom,left:e=>e.paddingLeft},V={top:e=>e.borderTopWidth,right:e=>e.borderRightWidth,bottom:e=>e.borderBottomWidth,left:e=>e.borderLeftWidth};function T(e,t,i){const s=window.getComputedStyle(e),n=window.getComputedStyle(t),r=O[i](s),a=S[i](n),l=V[i](n);return o=e.getBoundingClientRect()[i]+A(r),c=t.getBoundingClientRect()[i]-A(a)-A(l),Math.abs(o-c)<2;var o,c}function k(e){for(let t=0;t<e.children.length;t++){const i=e.children[t];if(!R(i))return i}return null}function M(e,t,i,s){return"up"===t?function(e,t,i=!0){const s=t.children,{top:n,left:r}=e.getBoundingClientRect();if(i&&T(e,t,"top"))return null;let a=null,l=99999,o=99999;for(let t=0;t<s.length;t++){const i=s[t];if(R(i)||i.classList.contains("badge")||i===e)continue;const{bottom:c,left:h}=i.getBoundingClientRect();let u=Math.abs(n-c),d=Math.abs(r-h);n>=c-1&&(u<l||u===l&&d<o)&&(a=i,l=u,o=d)}return a}(e,i,s):"down"===t?function(e,t,i=!0){const s=t.children,{bottom:n,left:r}=e.getBoundingClientRect();if(i&&T(e,t,"bottom"))return null;let a=null,l=99999,o=99999;for(let t=0;t<s.length;t++){const i=s[t];if(R(i)||i.classList.contains("badge")||i===e)continue;const{top:c,left:h}=i.getBoundingClientRect();let u=Math.abs(n-c),d=Math.abs(r-h);n<=c+1&&(u<l||u===l&&d<o)&&(a=i,l=u,o=d)}return a}(e,i,s):"left"===t?function(e,t,i=!0){const s=t.children,{top:n,left:r}=e.getBoundingClientRect();if(i&&T(e,t,"left"))return null;let a=null,l=99999,o=99999;for(let t=0;t<s.length;t++){const i=s[t];if(R(i)||i.classList.contains("badge")||i===e)continue;const{top:c,right:h}=i.getBoundingClientRect();let u=Math.abs(n-c),d=Math.abs(r-h);r>=h-1&&(d<o||d===o&&u<l)&&(a=i,l=u,o=d)}return a}(e,i,s):"right"===t?function(e,t,i=!0){const s=t.children,{top:n,right:r}=e.getBoundingClientRect();if(i&&T(e,t,"right"))return null;let a=null,l=99999,o=99999;for(let t=0;t<s.length;t++){const i=s[t];if(R(i)||i.classList.contains("badge")||i===e)continue;const{top:c,left:h}=i.getBoundingClientRect();let u=Math.abs(n-c),d=Math.abs(r-h);r<=h+1&&(d<o||d===o&&u<l)&&(a=i,l=u,o=d)}return a}(e,i,s):(console.error("unknown direction",t),null)}function $(e,t){const i=e.children,{top:s,left:r}=e.getBoundingClientRect();if(0===i.length)return null;const a=(0,n.mf)(t);let l=null,o=99999,c=99999;for(let e=0;e<i.length;e++){const n=i[e];if(a&&!t(n))continue;if(R(n)||n.classList.contains("badge"))continue;const{top:h,left:u}=n.getBoundingClientRect();let d=Math.abs(s-h),p=Math.abs(r-u);s<=h+1&&(d<o||d===o&&p<c)&&(l=n,o=d,c=p)}return l}function H(e,t){const i=e.children,{top:s,left:r}=e.getBoundingClientRect();if(0===i.length)return null;const a=(0,n.mf)(t);let l=null,o=99999,c=99999;for(let e=0;e<i.length;e++){const n=i[e];if(a&&!t(n))continue;if(R(n)||n.classList.contains("badge"))continue;const{top:h,left:u}=n.getBoundingClientRect();let d=Math.abs(s-h),p=Math.abs(r-u);r<=u+1&&(p<c||p===c&&d<o)&&(l=n,o=d,c=p)}return l}function P(e,t){const i=e.children,{top:s,right:r}=e.getBoundingClientRect();if(0===i.length)return null;const a=(0,n.mf)(t);let l=null,o=99999,c=99999;for(let e=0;e<i.length;e++){const n=i[e];if(a&&!t(n))continue;if(R(n)||n.classList.contains("badge"))continue;const{top:h,right:u}=n.getBoundingClientRect();let d=Math.abs(s-h),p=Math.abs(r-u);r>=u-1&&(p<c||p===c&&d<o)&&(l=n,o=d,c=p)}return l}function N(e,t){const i=e.children,{bottom:s,left:r}=e.getBoundingClientRect();if(0===i.length)return null;const a=(0,n.mf)(t);let l=null,o=99999,c=99999;for(let e=0;e<i.length;e++){const n=i[e];if(a&&!t(n))continue;if(R(n)||n.classList.contains("badge"))continue;const{bottom:h,left:u}=n.getBoundingClientRect();let d=Math.abs(s-h),p=Math.abs(r-u);s>=h-1&&(d<o||d===o&&p<c)&&(l=n,o=d,c=p)}return l}function D(e){return(0,n.Re)(e)?e:(0,n.HD)(e)&&!(0,n.hr)(e)?(0,n.sb)(e):null}function B(e,t={}){const i=D(e);if(!(0,n.Re)(i))return null;const s=Object.assign({horizontal:!0,vertical:!0,minWidth:60,minHeight:60},t),r=function(){let e=(0,n.wC)({class:["resizers"]});return["horizontal","vertical"].forEach((t=>{e.append((0,n.wC)({class:["resizer",`${t}`],dataset:{dir:t}}))})),e}();i.prepend(r),s.horizontal&&s.vertical?i.dataset.resizable="both":s.horizontal?i.dataset.resizable="horizontal":s.vertical&&(i.dataset.resizable="vertical");const{minWidth:a,minHeight:l}=getComputedStyle(i),o=(0,n.XI)(A(a),s.minWidth),c=(0,n.XI)(A(l),s.minHeight);let h=0,u=null;function d(e){const{dir:t}=u.dataset,{width:s,height:n}=getComputedStyle(i);let r="horizontal"===t?e.pageX:e.pageY;if("horizontal"===t){const e=A(s)+(r-h);e>o&&(i.style.width=`${e}px`)}else if("vertical"===t){const e=A(n)+(r-h);e>c&&(i.style.height=`${e}px`)}h=r}for(let e=0;e<r.childElementCount;e++){const t=r.children[e];t.addEventListener("mousedown",(function(e){e.preventDefault(),u=t;const{dir:i}=u.dataset;h="horizontal"===i?e.pageX:e.pageY,document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",(()=>{document.body.removeEventListener("mousemove",d)}))}))}return i}const X=e=>JSON.parse(JSON.stringify(e));function Z(){window.URL=window.webkitURL||window.URL;var e=(0,n.cH)({href:"",target:"_blank",rel:"noopener noreferrer"},"");(0,n.hr)(e.href)||window.URL.revokeObjectURL(e.href),e.click(),setTimeout((()=>{window.URL.revokeObjectURL(e.href),e.remove()}),1500)}i(914)},914:(e,t,i)=>{"use strict";i.d(t,{h:()=>s});const s=function(){var e={},t=[];for(let e=0;e<256;e++)t[e]=e<16?"0"+e.toString(16):e.toString(16);return e.generate=function(){var e=4294967296*Math.random()>>>0,i=4294967296*Math.random()>>>0,s=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&i]+t[i>>8&255]+"-"+t[i>>16&15|64]+t[i>>24&255]+"-"+t[63&s|128]+t[s>>8&255]+"-"+t[s>>16&255]+t[s>>24&255]+t[255&n]+t[n>>8&255]+t[n>>16&255]+t[n>>24&255]},e}()}},t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const{App:e}=i(129),{Preview:t}=i(839),s=localStorage.getItem("gentleman.preview");s?(t.init(s),localStorage.removeItem("gentleman.preview")):e.init()})()})();
>>>>>>> 4fa52361a28ed3a1b742c8a26a93a0bb513e021c
